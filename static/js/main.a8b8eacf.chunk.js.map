{"version":3,"sources":["constants/portals.ts","assets/brain.png","web/HomePage/MainPanel.tsx","assets/disease-trait.png","assets/gene-bcre.png","assets/snp-qtl.png","assets/single-cell.png","web/HomePage/PortalsPanel.tsx","web/HomePage/AboutUsPanel.tsx","web/HomePage/FooterPanel.tsx","web/HomePage/HomePage.tsx","hooks/useViewportSize.ts","mobile-portrait/HomePage/MainPanel.tsx","mobile-portrait/HomePage/HomePage.tsx","web/DownloadsPage/DownloadsPage.tsx","web/Portals/DiseaseTraitPortal/DiseaseTraitPortal.tsx","web/Portals/SnpPortal/SNPPortal.tsx","web/Portals/GenePortal/GenePortal.tsx","web/Portals/SingleCellPortal/SingleCellPortal.tsx","web/Portals/DiseaseTraitPortal/GeneAssociations.tsx","web/Portals/DiseaseTraitPortal/AssociatedSnpQtl.tsx","web/Portals/DiseaseTraitPortal/DiseaseIntersectingSnpsWithccres.tsx","web/Portals/DiseaseTraitPortal/utils.ts","web/Portals/GenePortal/violin/utils.ts","web/Portals/DiseaseTraitPortal/RiskLoci.tsx","web/Portals/GenePortal/Browser/Explorer/Cytobands.tsx","web/Portals/GenePortal/Browser/EGeneTracks.tsx","web/cCREDetails/hooks.ts","web/cCREDetails/CCRETooltip.tsx","genome-explorer/SettingsModals/EpigeneticTracks.tsx","genome-explorer/EpigeneticTracks.tsx","web/Portals/GenePortal/AssociatedxQTL.tsx","genome-explorer/ManhattanPlotTrack.tsx","genome-explorer/SettingsModals/VariantTracks.tsx","genome-explorer/VariantTracks.tsx","web/Portals/DiseaseTraitPortal/Browser.tsx","web/Portals/DiseaseTraitPortal/DiseaseTraitDetails.tsx","web/Portals/SingleCellPortal/SingleCellDetails.tsx","web/Portals/GenePortal/axis/utils.ts","web/Portals/GenePortal/axis/yaxis.tsx","web/Portals/GenePortal/violin/tooltip.tsx","web/Portals/GenePortal/violin/legend.tsx","web/Portals/GenePortal/violin/violin.tsx","web/Portals/GenePortal/consts.ts","web/Portals/GenePortal/OpenTarget.tsx","web/Portals/GenePortal/scatterplot/utils.ts","web/Portals/GenePortal/scatterplot/xaxis.tsx","web/Portals/GenePortal/scatterplot/yaxis.tsx","web/Portals/GenePortal/scatterplot/legend.tsx","web/Portals/GenePortal/scatterplot/trendline.tsx","web/Portals/GenePortal/scatterplot/adult-fetal.tsx","web/Portals/GenePortal/GeneExpression.tsx","genome-explorer/SettingsModals/DeepLearnedTracks.tsx","web/Portals/GenePortal/Browser/DefaultTracks.tsx","genome-explorer/CCRETooltip.tsx","genome-explorer/TitledImportanceTrack.tsx","genome-explorer/DeepLearnedModels.tsx","web/Portals/GenePortal/Browser/Browser.tsx","web/Portals/GenePortal/GTexUMAP.tsx","web/Portals/GenePortal/GeneOverview.tsx","web/Portals/SingleCellPortal/DotPlot.tsx","web/Portals/GenePortal/SingleCell.tsx","web/Portals/GenePortal/GeneDetails.tsx","web/Portals/SnpPortal/GwasPage.tsx","web/Portals/SnpPortal/EGeneTable.tsx","web/Portals/SnpPortal/RegulatoryElements.tsx","web/Portals/SnpPortal/SNPDetails.tsx","web/Portals/SingleCellPortal/SingleCellDotPlot.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PORTAL_SELECT_OPTIONS","value","name","helperText","MainPanel","props","useState","searchVal","setSearchVal","navigate","useNavigate","selectedPortal","setSelectedPortal","Grid","container","item","sm","md","lg","xl","Container","style","marginTop","width","type","size","fontWeight","fontSize","lineHeight","letterSpacing","marginBottom","display","alignItems","flexWrap","marginRight","onSelectChange","val","selectOptions","onChange","e","target","onClick","state","searchvalue","alt","src","BRAIN","useStyles","makeStyles","theme","root","breakpoints","up","paddingLeft","between","DiseaseTraitPortalPanel","classes","xs","className","DiseaseTrait","bvariant","btheme","GeneBCREPortalPanel","useTheme","useMediaQuery","down","GeneBCRE","marginLeft","SNPQTLPortalPanel","SNPQTL","SingleCellPortalPanel","SingleCell","PortalsPanel","AboutUsPanel","FooterPanel","backgroundColor","color","paddingRight","paddingBottom","paddingTop","HomePage","onDownloadsClicked","onHomepageClicked","onPortalClicked","index","PORTALS","centered","getWindowDimensions","window","innerWidth","height","innerHeight","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useViewportSize","reactiveThreshold","reactiveWidth","containerWidth","Logo","textAlign","title","DownloadsPage","href","download","textDecoration","DISEASE_CARDS","aliases","cardLabel","cardDesc","diseaseDesc","URL_MAP","DiseaseTraitPortal","useLocation","setVal","filter","d","toLowerCase","includes","find","el","undefined","diseaseCards","setdiseaseCards","fixed","length","Slide","direction","in","timeout","onCardClick","v","cardContentText","SNPPortal","fetching","setFetching","snpCards","setsnpCards","onSearchChange","useCallback","fetch","method","body","JSON","stringify","query","variables","assembly","id","headers","response","json","data","suggest","snpSuggestion","r","map","g","coordinates","chromosome","start","end","onSearchButtonClick","CircularProgress","f","snpid","split","GenePortal","geneCards","setgeneCards","genesSuggestion","geneid","SingleCellPortal","GeneAssociations","tabledata","useMemo","sort","a","b","twas_bonferroni","header","gene_id","gene_name","hsq","toFixed","twas_p","toExponential","dge_fdr","dge_log2fc","compareByMinimumP","Math","min","association_p_val","AssociatedSnpQtl","SnpAssociationData","chrom","stop","toLocaleString","analyses_identifying_snp","riskallele","associated_gene","join","DiseaseIntersectingSnpsWithccres","tabIndex","setTabIndex","page","setPage","GWASIntersectingSnpDataWithCcre","ccredata","snp_chrom","snp_stop","ccre_chrom","ccre_start","ccre_stop","ccreid","ccre_class","AdultGWASIntersectingSnpDataWithBcre","adult_bcredata","FetalGWASIntersectingSnpDataWithBcre","fetal_bcredata","Box","Tabs","_","newTabIndex","Tab","label","Divider","compare","ca","replace","cb","standardNormalKernel","input","sampleDomain","bandWidth","sampleRate","minimum","maximum","max","samplePositions","i","push","retval","x","forEach","gaussian","sqrt","PI","amplitude","mean","stdev","positions","exp","median","values","half","floor","linearTransform","FRIENDLY","Map","HUMAN_CYTOBAND_QUERY","gql","colorGradient","c","l","cappedLinearTransform","log10","RiskLocusView","groupedLoci","groupBy","loci","cytobands","useQuery","groupedCytobands","cytoband","maxes","keys","k","get","selected","setSelected","reduce","viewBox","transform","dominantBaseline","textAnchor","fontFamily","highlights","minimump","domain","onHighlightMouseOver","ii","onHighlightMouseOut","onHighlightClick","__","onLocusClick","opacity","y","stroke","strokeWidth","fill","fillOpacity","count","CYTOBAND_QUERY","CytobandView","loading","highlight","position","EGeneTracks","settingsMousedOver","setSettingsMousedOver","setHeight","text","squish","rowHeight","expandedCoordinates","genes","onHeightChanged","onMouseOver","onMouseOut","onSettingsClick","BIOSAMPLE_QUERY","CCRE_QUERY","COLORS","GROUPS","useBrainBiosamples","client","ApolloClient","uri","cache","InMemoryCache","useBiosamples","brainBiosamples","ccREBiosampleQuery","biosamples","ontology","toLocaleLowerCase","dnase","Set","h3k4me3","h3k27ac","ctcf","CCRETooltip","rDHSAccession","rDHS","cCREQuery","zScores","experiment","score","useCCREInformation","maxZ","DNase","H3K4me3","H3K27ac","CTCF","border","padding","background","accession","Loader","active","group","Fragment","top","left","bgcolor","p","borderRadius","TRACKS","EpigeneticTrackModal","Object","expanded","setExpanded","initialSelection","selectedTracks","setSelectedTracks","toggleTrack","track","expand","key","onAccept","Modal","open","onClose","onCancel","sx","Accordion","AccordionSummary","expandIcon","AccordionDetails","FormGroup","FormControlLabel","control","Checkbox","checked","overflowY","maxHeight","slice","TRACK_ORDER","tracks","pos","chr1","url","preRenderedWidth","BIG_QUERY","TitledTrack","svgRef","endsWith","tooltipContent","rect","noTransparency","EpigeneticTracks","cTracks","setTracks","bigRequests","settingsModalShown","setSettingsModalShown","expandCoordinates","CCRE_FIELDS","SNP_COORDINATE_QUERY","SNP_QUERY","QUERY","useGenePageData","resolvedTranscript","context","clientName","snpCoordinateResponse","queriedGene","fetal_eqtls","eqtls","snp","queriedTranscript","fetal_isoqtls","isoqtls","skip","snpResponse","groupedTranscripts","gene","transcripts","xx","snpData","snpCoordinateData","AssociatedxQTL","groupedQTLs","associateBy","allQTLs","snpQuery","eQTL","fdr","allQTLsData","nominal_pval","intersecting_ccres","render","Tooltip","Header","as","rsId","ManhattanPlotTrack","urls","inView","flatMap","chr","titles","onSNPMousedOver","snpProps","sortOrder","threshold","anchor","snps","ld","onVariantMouseOver","ldThreshold","highlighted","highlightColor","VariantTrackModal","LD_QUERY","VariantTracks","useApolloClient","setLD","ldSet","rSquared","snpMouseOver","then","linkageDisequilibrium","gradient","useRef","setURLs","trait","setTitles","has","Browser","setCoordinates","epigeneticTracks","onDomainChanged","round","withInput","noMargin","ceil","AssociatedSnpQuery","AssociatedGenesQuery","GwasIntersectingSnpswithCcresQuery","GwasIntersectingSnpswithBcresQuery","DiseaseTraitDetails","disease","useParams","browserCoordinates","setBrowserCoordinates","navigateBrowser","diseaseLabel","summaryStatisticsURL","riskLoci","currentLocus","gwassnpAssociationsQuery","genesdata","limit","gwasIntersectingSnpWithCcresData","adultgwasIntersectingSnpWithBcresData","bcre_group","fetalgwasIntersectingSnpWithBcresData","genesAssociationsQuery","gwasintersectingSnpsWithCcreQuery","gwasintersectingSnpsWithBcreQuery","SingleCellDetails","ticks","range","cscale","sfig","pow","lrange","YAxis","verticalTransform","rangeValue","alignmentBaseline","content","Legend","SingleViolin","rendered","reversed","reverse","leftTransform","rightTransform","acc","complete","Violin","colors","mousedOver","onMousedOver","onMousedOut","ViolinPlot","localeCompare","mouseOverTitle","inner","outer","tKeys","onViolinMousedOver","onViolinMousedOut","legendTitle","indexOf","n","toString","tissueColors","set","tissueTypeColors","OpenTargetQuery","roundTo","num","places","factor","OpenTarget","geneID","geneId","useOpenTargetsData","formattedData","studiesAndLeadVariantsForGeneByL2G","q","study","studyId","rel","traitReported","pubAuthor","pmid","nInitial","variant","pval","beta","betaCI","odds","oddsCI","betaCILower","betaCIUpper","yProbaModel","standardDeviation","avg","average","squareDiffs","diff","avgSquareDiff","sum","XAxis","horizontalTransform","nsort","Trendline","xt","yt","resolution","step","averages","stdevs","filtered","trendline","akeys","skeys","skeysr","center","identityTransform","AdultFetalScatterPlot","xtitle","ytitle","fx","fy","ax","ay","logScale","legendContent","normalized","yy","yyy","log","fetalDomain","adultDomain","fhorizontalTransform","ahorizontalTransform","fpaired","j","apaired","x1","y1","x2","y2","GeneExpressionPage","wBiosamples","biosampleQuery","formattedExpression","expressionQuery","assay_term_name","diagnosis","sex","biosample","agedeath_adult","fetal","age","agedeath_fetus","gene_quantification_files","quantifications","tpm","expression","DeepLearnedTrackModal","seqToPWM","sequence","M","best","e_value","ImportantRegions","neutralRegions","positiveRegions","onRegionClick","negativeRegions","TitledImportanceTrack","signalURL","imputedSignalURL","negativeRegionURL","positiveRegionURL","backgroundFrequencies","ppm","coordinateMap","coordinate","selectedHighlight","setSelectedHighlight","setHighlights","onSelectionEnd","base","pwms","motif","meme_motif_search","results","reverseComplement","catch","error","console","onImportantRegionClick","requests","chr2","importance","bw","endpoint","sequenceURL","allowSelection","alphabet","DNAAlphabet","pwm","entry","log2","glyphWidth","stackHeight","tomtom_matches","target_id","startsWith","jaspar_name","CELL_TYPES","DeepLearnedModelTracks","onSettingsClicked","displayedTracks","setDisplayedTracks","obj","eexpandedCoordinates","fromEntries","entries","lower5","upper5","by","newVals","GTexUMAP","setData","pcdata","setPcData","vals","tissueid","tissuetype","tissuedetail","points","svgProps","pcpoints","pcdomain","uref","pcuref","llegendref","marginFraction","innerSize","xAxisProps","yAxisProps","scatterData","ref","TISSUE_TYPE_COLORS","m","BRAIN_COLORS","TissueClusterPlot","xOffset","yOffset","geneUrl","titleCoordinates","titleSize","useSampleScatter","sampleData","sampleColors","geneData","useGeneScatter","setHighlighted","tPoints","tooltip","setTooltip","onPointMouseOver","onPointMouseOut","LABEL_MAP","LABEL_ORDER","specificityCategory","GeneOverview","category","setCategory","description","setDescription","matches","useGeneDescription","specificities","setSpecificities","useSpecificities","ToggleButtonGroup","exclusive","ToggleButton","pickHex","color1","color2","weight","w1","w2","dotPlotQuery","DotPlot","React","singleCellBoxPlotQuery","celltype","radius","mean_count","colorpercent","expr_frac","radiusDomain","radiusTransform","radiusRange","cy","cx","SINGLE_CELL_GENE_QUERY","SINGLE_CELL_UMAP_QUERY","useSingleCellData","dataset","featureKey","useSingleCellGeneData","expressionLoading","expressionData","useSingleCellUMAPData","UMAPLoading","UMAPData","maximumValue","singleCellGenesQuery","UMAP_map","singleCellUmapQuery","barcodekey","expression_map","expressionColor","unique_celltypes","subclass","rcolors","generateColors","DATASETS","setDataset","colorScheme","setColorScheme","umap_1","umap_2","strokeOpacity","groupedVals","groups","onRowMouseOver","row","onRowMouseOut","offset","GTEX_GENES_QUERY","GeneDetails","tissueCategory","setTissueCategory","grouped","gtex_genes","tissue_type_detail","tissue_type","sortedKeys","toPlot","parseInt","GeneExpression","newTissueCategory","GwasPage","gwasData","genomeWideAssociation","pubMedId","author","EGeneTable","genemap","egeneData","slope","SEARCH_QUERY","RegulatoryElements","ur","allResults","rDHSQuery","combinedResults","tableData","dnaseZ","SNPDetails","population","rSquaredThreshold","fetal_eQTLQuery","SingleCellDotPlot","wengLink","HttpLink","openTargetLink","psychscreenLink","LINK","ApolloLink","operation","getContext","App","link","TabletHomePage","WebHomePage","ApolloProvider","path","element","to","portal","createElement","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","StrictMode"],"mappings":"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","file":"static/js/main.a8b8eacf.chunk.js","sourcesContent":["export const PORTAL_SELECT_OPTIONS = [\n    { value: \"disease/trait\", name: \"Disease/Trait\", helperText: \"e.g. schizophrenia, years of education\" },\n    { value: \"gene/bcre\", name: \"Gene/bCRE\", helperText: \"e.g. APOE, SOX4\" },\n    { value: \"snp/qtl\", name: \"SNP/QTL\", helperText: \"e.g. rs2836883, rs7690700\" }\n];\n","export default __webpack_public_path__ + \"static/media/brain.a1faa932.png\";","import React, {useState} from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport BoltIcon from '@mui/icons-material/Bolt';\nimport AccessibilityNewIcon from '@mui/icons-material/AccessibilityNew';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport { SearchBoxWithSelect } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate } from 'react-router-dom';\nimport { PORTAL_SELECT_OPTIONS } from '../../constants/portals';\nimport BRAIN from '../../assets/brain.png';\n\nconst MainPanel: React.FC<GridProps> = props => {\n    const [searchVal, setSearchVal] = useState<string>('')     \n    const navigate = useNavigate(); \n    const [selectedPortal, setSelectedPortal] =  useState<string>('Disease/Trait');\n    \n    return (\n    <Grid {...props} container>\n        <Grid item sm={0}  md={0} lg={1} xl={2}></Grid>\n        <Grid item  sm={9} md={8} lg={7} xl={5}>\n            <Container style={{ marginTop: \"147px\", width: \"741px\" }}>\n                <Typography\n                    type=\"display\"\n                    size=\"medium\"\n                    style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                >\n                    Explore the genetics and epigenetics of human brain development, function, and pathophysiology.\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"4px\" }}\n                >\n                    <BoltIcon style={{ marginRight: \"9px\" }} /> Powered by the PsychENCODE Consortium\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"56px\" }}\n                >\n                    <AccessibilityNewIcon style={{ marginRight: \"9px\" }} /> Accessible to all\n                </Typography>\n                <SearchBoxWithSelect\n                    onSelectChange={(val: {name: string})=>{                    \n                        setSelectedPortal(val.name)\n                    }}\n                    selectOptions={PORTAL_SELECT_OPTIONS}\n                    style={{ marginBottom: \"14px\" }}\n                    onChange={e => { \n                        if(e.target.value===''){\n                            \n                        }\n                        setSearchVal(e.target.value)                            \n                    }}\n                    onClick={()=>{\n                        if(searchVal !== ''){   \n                            if(selectedPortal==='Disease/Trait')\n                            {\n                                navigate(\"/psychscreen/traits\", { state: { searchvalue: searchVal } })\n                            } else if(selectedPortal==='Gene/bCRE') {\n                                navigate(\"/psychscreen/gene\", { state: { searchvalue: searchVal } })\n                            } else if(selectedPortal==='SNP/QTL') {\n                                navigate(\"/psychscreen/snp\", { state: { searchvalue: searchVal } })\n                            }\n                            \n                         }\n                    }}\n                />\n            </Container>\n        </Grid>\n        <Grid item sm={3} md={4} lg={3} xl={3}>\n            <Container style={{ marginTop: \"143px\" }}>\n-               <img alt=\"PsychSCREEN\" src={BRAIN} style={{ width: \"85%\" }} />\n            </Container>\n        </Grid>\n        <Grid item sm={0} md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n)};\nexport default MainPanel;\n","export default __webpack_public_path__ + \"static/media/disease-trait.604481d8.png\";","export default __webpack_public_path__ + \"static/media/gene-bcre.1e6ddfd8.png\";","export default __webpack_public_path__ + \"static/media/snp-qtl.532ae331.png\";","export default __webpack_public_path__ + \"static/media/single-cell.c1020702.png\";","import React from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { Button, Typography } from '@zscreen/psychscreen-ui-components';\n\nimport DiseaseTrait from '../../assets/disease-trait.png';\nimport GeneBCRE from '../../assets/gene-bcre.png';\nimport SNPQTL from '../../assets/snp-qtl.png';\nimport SingleCell from '../../assets/single-cell.png';\nimport { useNavigate } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nconst useStyles = makeStyles(theme => ({\n    root: {      \n      [theme.breakpoints.up('xl')]: {\n        paddingLeft: \"90px\"\n      },\n      [theme.breakpoints.between('md','lg')]: {\n        paddingLeft: \"40px\"\n      }\n    }\n    \n  }));\n\n\n\nconst DiseaseTraitPortalPanel: React.FC<GridProps> = props => {\n    const navigate = useNavigate();      \n    const classes = useStyles()    \n    return(\n    <Grid container {...props}>\n        <Grid item xs={0} sm={1}  md={0} lg={1} xl={2}></Grid>\n        <Grid item xs={12} sm={11} md={0} lg={11} xl={10}>          \n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    className={classes.root}\n                    style={{ fontSize: \"32px\", lineHeight: \"38.4px\", fontWeight: 700 }}\n                >\n                    Portals\n                </Typography>\n        </Grid>\n        <Grid item xs={0} sm={0}  md={0} lg={1} xl={2}></Grid>\n        <Grid item xs={12} sm={12} md={8} lg={6} xl={5}>\n            <Container style={{ marginTop: \"111px\", width: \"508px\" }}>\n                <img alt=\"Disease/Trait Portal\" src={DiseaseTrait} style={{ width: \"90%\" }} />\n            </Container>\n        </Grid>\n        <Grid item xs={12} sm={12} md={4} lg={4} xl={3}>\n            <Container style={{ marginTop: \"140px\", width: \"508px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                >\n                    Disease/Trait Portal\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                >\n                    Explore heritability enrichment for 40 distinct psychiatric, behavioral, and neuronal traits within gene regulatory features,\n                    such as bCREs and quantitative trait loci (QTLs). Search genes associated with complex traits based on PsychENCODE TWAS.\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                >\n                    <CheckIcon style={{ marginRight: \"9px\" }} /> 40 total traits cataloged\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                >\n                    <CheckIcon style={{ marginRight: \"9px\" }} /> 1,103 bCRE/trait associations\n                </Typography>\n                <Button bvariant=\"filled\" btheme=\"light\" onClick={()=>{ navigate(\"/psychscreen/traits\")}} >Explore Diseases/Traits</Button>\n            </Container>\n        </Grid>\n        <Grid item xs={0} sm={0} md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n)};\n\nconst GeneBCREPortalPanel: React.FC<GridProps> = props => {\n    const theme = useTheme();\n    const navigate = useNavigate();      \n    return(\n    <Grid container {...props}>\n        <Grid item  xs={0} sm={0} md={0} lg={1} xl={2}></Grid>\n        {\n            useMediaQuery(theme.breakpoints.down('sm')) ? \n            <>\n                <Grid item xs={12} sm={12} md={4} lg={5} xl={3}>\n                    <Container style={{ width: \"508px\" }}>\n                        <img alt=\"Gene bCRE portal\" src={GeneBCRE} style={{ width: \"80%\" }} />\n                    </Container><br/><br/>\n                </Grid>\n                <Grid item xs={12} sm={12} md={8} lg={5} xl={5}>\n                    <Container style={{ marginLeft: \"110px\",  width: \"508px\" }}>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                        >\n                            Gene/bCRE Portal\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Explore gene expression and regulatory element activity in the fetal and adult brain at bulk and single-cell resolution. Visualize gene/bCRE\n                            links based on PsychENCODE QTLs and single cell co-expression analyses.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Gene expression in 11 brain regions\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 23 fetal, adolescent, and adult time points covered\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 761,984 brain regulatory elements\n                        </Typography>\n                        <Button bvariant=\"filled\" btheme=\"light\" onClick={()=>{ navigate(\"/psychscreen/gene\")}}>Explore Genes/bCREs</Button>\n                    </Container>\n                </Grid> \n            </>: \n            <>                \n                <Grid item xs={12} sm={12} md={8} lg={5} xl={5}>\n                    <Container style={{ marginLeft: \"70px\",  width: \"508px\" }}>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                        >\n                            Gene/bCRE Portal\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Explore gene expression and regulatory element activity in the fetal and adult brain at bulk and single-cell resolution. Visualize gene/bCRE\n                            links based on PsychENCODE QTLs and single cell co-expression analyses.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Gene expression in 11 brain regions\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 23 fetal, adolescent, and adult time points covered\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 761,984 brain regulatory elements\n                        </Typography>\n                        <Button bvariant=\"filled\" btheme=\"light\"   onClick={()=>{ navigate(\"/psychscreen/gene\")}}>Explore Genes/bCREs</Button>\n                    </Container>\n                </Grid>\n                <Grid item xs={12} sm={12} md={4} lg={5} xl={3}>\n                    <Container style={{ width: \"508px\" }}>\n                        <img alt=\"Gene bCRE portal\" src={GeneBCRE} style={{ width: \"90%\" }} />\n                    </Container>\n                </Grid>\n            </>\n        }\n       \n        <Grid item xs={0} sm={0}  md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n)};\n\nconst SNPQTLPortalPanel: React.FC<GridProps> = props => {\n    const navigate = useNavigate();      \n    return(\n    <Grid container {...props}>\n        <Grid item xs={0} sm={0}  md={0} lg={1} xl={2}></Grid>\n        <Grid item xs={12} sm={12} md={8} lg={6} xl={5}>\n            <Container style={{ marginTop: \"111px\", width: \"508px\"}}>\n                <img alt=\"SNP/QTL Portal\" src={SNPQTL} style={{ width: \"80%\" }} />\n            </Container>\n        </Grid>\n        <Grid item xs={12} sm={12} md={4} lg={4} xl={3}>\n            <Container style={{ marginTop: \"140px\",  width: \"508px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                >\n                    SNP/QTL Portal\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                >\n                    Search SNPs of interest and explore their impact on gene expression, chromatin accessibility, transcription factor (TF) binding\n                    and other molecular traits in the human brain based on PsychENCODE QTLs and sequence analysis of bCREs. Link SNPs to complex traits\n                    using GWAS annotations.\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                >\n                    <CheckIcon style={{ marginRight: \"9px\" }} /> 441,502 eQTLs, sQTLs, caQTLs, and fQTLs\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                >\n                    <CheckIcon style={{ marginRight: \"9px\" }} /> 13,336 variants associated with complex traits\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"large\"\n                    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                >\n                    <CheckIcon style={{ marginRight: \"9px\" }} /> 510,062 variants in bCREs\n                </Typography>\n                <Button bvariant=\"filled\" btheme=\"light\"   onClick={()=>{ navigate(\"/psychscreen/snp\")}}>Explore SNPs/QTLs</Button>\n            </Container>\n        </Grid>\n        <Grid item xs={0} sm={0} md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n)};\n\nconst SingleCellPortalPanel: React.FC<GridProps> = props => {\n   const theme = useTheme();\n   const navigate = useNavigate();      \n   return (\n    <Grid container {...props}>\n        <Grid item xs={0} sm={0} md={0} lg={1} xl={2}></Grid>\n        { useMediaQuery(theme.breakpoints.down('sm')) ? \n            <>\n                <Grid item xs={12} sm={12} md={4} lg={4} xl={3}>\n                    <Container style={{ width: \"408px\" }}>\n                        <img alt=\"single cell portal\" src={SingleCell} style={{ width: \"100%\" }} />\n                    </Container><br/><br/>\n                </Grid>\n                <Grid item xs={12} sm={12} md={8} lg={6} xl={5}>\n                    <Container style={{ marginLeft: \"120px\",  width: \"508px\" }}>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                        >\n                            Single-Cell Portal\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Visualize the single cell composition of the human brain based on single cell ATAC-seq and RNA-seq from PsychENCODE and public\n                            sources. Identify marker genes and bCREs specific to particular cell types and states.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Transcriptomes for 1,391,772 single cells\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Chromatin accessibility for 1,009,942 single cells\n                        </Typography>\n                        <Button bvariant=\"filled\" btheme=\"light\"  onClick={()=>{ navigate(\"/psychscreen/single-cell\")}}>Explore Single Cells</Button>\n                    </Container>\n                </Grid>\n            </> : \n            <>\n                <Grid item xs={12} sm={12} md={8} lg={6} xl={5}>\n                    <Container style={{ marginLeft: \"70px\",  width: \"508px\" }}>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"20px\", lineHeight: \"24.4px\", fontWeight: 700, letterSpacing: \"1%\", marginBottom: \"40px\" }}\n                        >\n                            Single-Cell Portal\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"medium\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Visualize the single cell composition of the human brain based on single cell ATAC-seq and RNA-seq from PsychENCODE and public\n                            sources. Identify marker genes and bCREs specific to particular cell types and states.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Transcriptomes for 1,391,772 single cells\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Chromatin accessibility for 1,009,942 single cells\n                        </Typography>\n                        <Button bvariant=\"filled\" btheme=\"light\" onClick={()=>{ navigate(\"/psychscreen/single-cell\")}}>Explore Single Cells</Button>\n                    </Container>\n                </Grid>\n                <Grid item xs={12} sm={12} md={4} lg={4} xl={3}>\n                    <Container style={{ width: \"508px\",  marginLeft: \"40px\" }}>\n                        <img alt=\"single cell portal\" src={SingleCell} style={{ width: \"80%\" }} />\n                    </Container>\n                </Grid>\n            </>\n        }\n        <Grid item xs={0} sm={0} md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n)};\n\nconst PortalsPanel: React.FC<GridProps> = props => (\n    <>\n        <DiseaseTraitPortalPanel {...props} />\n        <GeneBCREPortalPanel style={{ marginTop: \"216px\" }} />\n        <SNPQTLPortalPanel style={{ marginTop: \"156px\" }} />\n        <SingleCellPortalPanel style={{ marginTop: \"176px\" }} />\n    </>\n);\nexport default PortalsPanel;\n","import React from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport { Button, Typography } from '@zscreen/psychscreen-ui-components';\n\nconst AboutUsPanel: React.FC<GridProps> = props => (\n    <Grid container {...props}>\n        <Grid item sm={0}  md={0} lg={1} xl={2}></Grid>\n        <Grid item sm={0}  md={0} lg={11} xl={10}>\n            <Container style={{ marginLeft: \"10px\", width: \"741px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"32px\", lineHeight: \"38.4px\", fontWeight: 700 }}\n                >\n                    About Us\n                </Typography>\n            </Container>\n        </Grid>\n        <Grid item sm={0}  md={0} lg={1} xl={2}></Grid>\n        <Grid item  sm={6} md={8} lg={6} xl={5}>\n            <Container style={{ marginLeft: \"10px\", marginTop: \"100px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", letterSpacing: \"0.5px\", marginBottom: \"40px\", width: \"497px\" }}\n                >\n                    PsychSCREEN is a comprehensive catalog of genetic and epigenetic knowledge about the human brain. It was designed and built by Dr. Zhiping Weng's\n                    lab at UMass Chan Medical School as a product of the PsychENCODE Consortium.\n                </Typography>\n                <Button bvariant='outlined' btheme='light'>Learn More</Button>\n            </Container>\n        </Grid>\n        <Grid item sm={6} md={4} lg={4} xl={3}>\n            <Container style={{ marginTop: \"86px\" }}>\n                <img alt=\"UMass Chan Medical School\" src=\"data:image/png;base64,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\" />\n            </Container>\n        </Grid>\n        <Grid item sm={0} md={0} lg={1} xl={2} ></Grid>\n    </Grid>\n);\nexport default AboutUsPanel;\n","import React from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\n\nconst FooterPanel: React.FC<GridProps> = props => (\n    <Grid container {...props}>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={4}>\n            <Container style={{ marginLeft: \"160px\", marginTop: \"116px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"32px\", lineHeight: \"27px\", fontWeight: 700, marginBottom: \"14px\" }}\n                >\n                    psych<br />&nbsp;screen\n                </Typography>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"14px\", lineHeight: \"22px\", fontWeight: 400, width: \"180px\" }}\n                >\n                    Explore the genetics and epigenetics of human brain.\n                </Typography>\n            </Container>\n        </Grid>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={2}>\n            <Container style={{ marginTop: \"116px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 700, letterSpacing: \"0.5px\", marginBottom: \"21.5px\" }}\n                >\n                    About Us\n                </Typography>\n                <div style={{ marginLeft: \"10px\" }}>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Overview\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Weng Lab\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        PsychENCODE Consortium\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        UMass Chan Medical School\n                    </Typography>\n                </div>\n            </Container>\n        </Grid>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={2}>\n            <Container style={{ marginTop: \"116px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 700, letterSpacing: \"0.5px\", marginBottom: \"21.5px\" }}\n                >\n                    Portals\n                </Typography>\n                <div style={{ marginLeft: \"10px\" }}>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Disease/Trait\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Gene/bCRE\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        SNP/QTL\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Single Cell\n                    </Typography>\n                </div>\n            </Container>\n        </Grid>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={1}>\n            <Container style={{ marginTop: \"116px\", marginLeft: \"-60px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 700, letterSpacing: \"0.5px\", marginBottom: \"21.5px\" }}\n                >\n                    Resources\n                </Typography>\n                <div style={{ marginLeft: \"10px\" }}>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Tutorials\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"medium\"\n                        style={{ fontSize: \"14px\", lineHeight: \"20px\", fontWeight: 400, letterSpacing: \"0.1px\", marginBottom: \"10px\" }}\n                    >\n                        Tools\n                    </Typography>\n                </div>\n            </Container>\n        </Grid>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={2}>\n            <Container style={{ marginTop: \"116px\" }}>\n                <Typography\n                    type=\"body\"\n                    size=\"medium\"\n                    style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 700, letterSpacing: \"0.5px\", marginBottom: \"21.5px\" }}\n                >\n                    Downloads\n                </Typography>\n            </Container>\n        </Grid>\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\" }} item sm={1} />\n        <Grid style={{ backgroundColor: \"#000000\", color: \"#ffffff\", paddingLeft: \"160px\", paddingRight: \"205px\", paddingBottom: \"60px\", paddingTop: \"107px\" }} item sm={12}>\n            <hr />\n            Copyright &copy; 2022 Weng Lab\n        </Grid>\n    </Grid>\n);\nexport default FooterPanel;\n","/**\n * HomePage.tsx: the app home page.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { AppBar } from '@zscreen/psychscreen-ui-components';\n\nimport { PORTALS } from '../../App';\nimport MainPanel from './MainPanel';\nimport PortalsPanel from './PortalsPanel';\nimport AboutUsPanel from './AboutUsPanel';\nimport FooterPanel from './FooterPanel';\n\nconst HomePage: React.FC = () => {\n    const navigate = useNavigate();\n    return (\n        <>\n            <AppBar\n                onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n                centered={true}\n            />\n            <MainPanel />\n            <PortalsPanel style={{ marginTop: \"160px\" }} />\n            <AboutUsPanel style={{ marginTop: \"355px\" }} />\n            <FooterPanel style={{ marginTop: \"160px\" }} />\n        </>\n    );\n};\nexport default HomePage;\n","import { useState, useEffect } from 'react';\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nexport function useViewportSize() {\n    const [ windowDimensions, setWindowDimensions ] = useState(getWindowDimensions());\n    useEffect(() => {\n        const handleResize = () => { setWindowDimensions(getWindowDimensions()); };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n    return windowDimensions;\n}\n","import React, { useState } from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport BoltIcon from '@mui/icons-material/Bolt';\nimport AccessibilityNewIcon from '@mui/icons-material/AccessibilityNew';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport { SearchBoxWithSelect } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate } from 'react-router-dom';\n\nimport { PORTAL_SELECT_OPTIONS } from '../../constants/portals';\nimport { useViewportSize } from '../../hooks/useViewportSize';\nimport BRAIN from '../../assets/brain.png';\n\nconst MainPanel: React.FC<GridProps> = props => {\n    const { width } = useViewportSize();\n    const [searchVal, setSearchVal] = useState<string>('')     \n    const navigate = useNavigate(); \n    const [selectedPortal, setSelectedPortal] =  useState<string>('Disease/Trait');\n    return (\n        <Grid {...props} container>\n            <Grid item xs={6}>\n                <img alt=\"PsychSCREEN\" src={BRAIN} style={{ width: \"80%\", marginTop: \"22px\", marginLeft: \"20px\" }} />\n            </Grid>\n            <Grid item xs={6} />\n            <Grid item xs={12} style={{ marginTop: \"28px\" }}>\n                <Container style={{ marginLeft: \"29px\", marginRight: \"29px\", width: \"92%\" }}>\n                    <Typography\n                        type=\"display\"\n                        size=\"medium\"\n                        style={{ fontWeight: 700, fontSize: \"28px\", lineHeight: \"33.6px\", letterSpacing: \"0.5px\", marginBottom: \"23px\" }}\n                    >\n                        Explore the genetics and epigenetics of human brain development, function, and pathophysiology.\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"large\"\n                        style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"4px\" }}\n                    >\n                        <BoltIcon style={{ marginRight: \"9px\" }} /> Powered by the PsychENCODE Consortium\n                    </Typography>\n                    <Typography\n                        type=\"body\"\n                        size=\"large\"\n                        style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"56px\" }}\n                    >\n                        <AccessibilityNewIcon style={{ marginRight: \"9px\" }} /> Accessible to all\n                    </Typography>\n                    <SearchBoxWithSelect\n                        reactiveThreshold={500}\n                        reactiveWidth={width * 0.8}\n                        containerWidth={width}\n                        selectOptions={PORTAL_SELECT_OPTIONS}\n                        style={{ marginBottom: \"14px\" }}\n                        onSelectChange={(val: {name: string})=>{                    \n                            setSelectedPortal(val.name)\n                        }}\n                        onChange={e => { \n                            if(e.target.value===''){\n                                \n                            }\n                            setSearchVal(e.target.value)                            \n                        }}\n                        onClick={()=>{\n                            if(searchVal !== ''){   \n                                if(selectedPortal==='Disease/Trait')\n                                {\n                                    navigate(\"/psychscreen/traits\", { state: { searchvalue: searchVal } })\n                                }\n                                \n                             }\n                        }}\n                    />\n                </Container>\n            </Grid>\n        </Grid>\n    );\n};\nexport default MainPanel;\n","/**\n * HomePage.tsx: the app home page.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { TabletAppBar } from '@zscreen/psychscreen-ui-components';\n\nimport { PORTALS } from '../../App';\nimport MainPanel from './MainPanel';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport PortalsPanel from '../../web/HomePage/PortalsPanel';\n\nexport const Logo: React.FC = () => {\n    const navigate = useNavigate();\n    \n    return(\n        <div>\n            <Typography\n                type=\"display\"\n                size=\"medium\"\n                style={{ display: \"inline-block\", fontWeight: 700, fontSize: \"20px\", lineHeight: \"15px\", textAlign: \"left\", marginLeft: \"-30px\" }}\n                onClick={() => navigate(\"/\")}\n            >\n                psych<br />&nbsp;screen\n            </Typography>\n        </div>\n)};\n\nconst HomePage: React.FC = () => {\n    const navigate = useNavigate();\n    return (\n        <>\n            <TabletAppBar\n                onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n                title={<Logo /> as any}\n            />\n            <MainPanel />\n            <PortalsPanel style={{ marginTop: \"160px\" }} />\n        </>\n    );\n};\nexport default HomePage;\n","/**\n * DownloadsPage.tsx: contains links to various PsychSCREEN downloads.\n */\n\nimport React from 'react';\nimport { Typography, Button, AppBar } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate } from 'react-router-dom';\nimport { Container } from '@mui/system';\nimport DownloadIcon from '@mui/icons-material/Download';\n\nimport { PORTALS } from '../../App';\n\nconst DownloadsPage: React.FC = () => {\n    const navigate = useNavigate();\n    return (\n        <>\n            <AppBar\n                onDownloadsClicked={() => navigate(\"/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(PORTALS[index][0])}\n            />\n            <Container style={{ marginTop: \"5em\", marginLeft: \"6em\", width: \"40%\" }}>\n                <Typography\n                    type=\"display\"\n                    size=\"small\"\n                >\n                    Downloads\n                </Typography>\n                <div style={{ height: \"2em\" }} />\n                <a href=\"https://storage.googleapis.com/gcp.wenglab.org/adult-bCREs.bed\" download style={{ textDecoration: \"none\" }}>\n                    <Button bvariant=\"filled\" btheme=\"light\">\n                        <DownloadIcon /> Adult brain cCREs\n                    </Button>\n                </a>&nbsp;\n                <a href=\"https://storage.googleapis.com/gcp.wenglab.org/fetal-bCREs.bed\" download style={{ textDecoration: \"none\" }}>\n                    <Button bvariant=\"filled\" btheme=\"light\">\n                        <DownloadIcon /> Fetal brain cCREs\n                    </Button>\n                </a>\n            </Container>\n        </>\n    );\n};\nexport default DownloadsPage;\n","/**\n * DiseaseTraitPortal.tsx: the disease/trait portal page.\n */\n\nimport React, { useState } from 'react';\nimport { AppBar } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Grid, Container, GridProps, Slide } from '@mui/material';\nimport DiseaseTrait from '../../../assets/disease-trait.png';\nimport { TabletAppBar } from '@zscreen/psychscreen-ui-components';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { SearchBox, HorizontalCard } from '@zscreen/psychscreen-ui-components';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { PORTALS } from '../../../App';\nimport { Logo } from '../../../mobile-portrait/HomePage/HomePage';\n \n\nexport const DISEASE_CARDS = [\n{aliases:[\"ADHD\"], val: \"ADHD\", cardLabel: \"Attention deficit hyperactive disorder\", cardDesc: \"\", diseaseDesc: \"Attention deficit hyperactive disorder (ADHD) is a neurodevelopmental psychiatric disease usually diagnosed in childhood and characterized by trouble paying attention, controlling impulses, or being overly active that affects about 5% of children and 2.5% of adults. Twin studies suggest ADHD is approximately 70% heritable and shares genetic risk with other psychiatric conditions, including mood disorders, schizophrenia, and autism spectrum disorder. Treatment of ADHD involves behavioral therapy and medications, usually stimulants.\"},\n{val: \"AgeFirstBirth\", cardLabel: \"Mother's Age at birth of first child\", cardDesc: \"\", diseaseDesc: \"The mother’s age when she has her first child.\"},\n{aliases:[\"Alzheimers\"],val: \"Alzheimers\", cardLabel: \"Alzheimer's Disease\", cardDesc: \"\", diseaseDesc: \"Alzheimer’s disease is a neurodegenerative disease beginning with mild and progressively worsening memory loss that affects approximately 6% of people over age 65. It is the most common cause of dementia and symptoms include problems with recent memory, language, disorientation, mood swings, self-neglect and behavioral issues. Alzheimer’s disease has complex risk factors, including APOE mutations, advanced age, environmental factors, and common genetic variants. Medications can help with some symptoms and new treatments promising to slow disease progression are emerging, but their efficacy in clinical use remains unclear.\"},\n{aliases:[\"Anorexia\",\"Eating disorder\"],val: \"Anorexia\", cardLabel: \"Anorexia Nervosa\", cardDesc: \"\", diseaseDesc: \"Anorexia nervosa (often simply anorexia) is an eating disorder characterized by food restriction, body image problems, fear of weight gain, and low weight that affects women more than men. Cultural, social, and genetic factors play a role, and identical twins are more often both affected than fraternal twins. Therapy is the mainstay of treatment although medications may be used for concomitant depression or anxiety.\"},\n{aliases:[\"ASD\",\"Autism\"], val: \"ASD\", cardLabel: \"Autism spectrum disorder\", cardDesc: \"\", diseaseDesc: \"Autism spectrum disorder is a range of neurodevelopmental diseases that involve difficulties in social communication, repetitive behaviors, restricted interests and sensory reactivity. Autism has a strong genetic basis and several rare genetic abnormalities are highly causative; however, many common variants also confer risk of the disease. Autism commonly co-occurs with other neurologic, psychiatric or congenital abnormalities and shares genetic risk variants with other psychiatric diseases.\"},\n{aliases:[\"mania\"] ,val: \"BipolarDisorder\", cardLabel: \"Bipolar Disorder\", cardDesc: \"\", diseaseDesc: \"Bipolar disorder is a mood disorder characterized by bouts of depression intermixed with episodes of mania or hypomania. During manic episodes, people experience elated moods, happiness, and sometimes make impulsive decisions. There is a strong genetic basis to bipolar disorder and environmental factors also play a role. Medical therapy including mood stabilizers and anticonvulsants are the mainstay of treatment, supported by therapy.\"},\n{val: \"Schizophrenia\", cardLabel: \"Schizophrenia\", cardDesc: \"\", diseaseDesc: \"Schizophrenia is a psychiatric disease characterized by psychosis, a state of altered mental status with symptoms including hallucinations, delusions, disorganized thinking. Other symptoms include social withdrawal, apathy and decreased emotional expression. Schizophrenia affects approximately 0.5% of people. Genetic and environmental factors play a role in developing schizophrenia and over one hundred genetic variants have been associated with the disease. Medical treatment involves antipsychotics which primarily act as dopamine antagonists.\"},\n{aliases:[\"BMI\"] ,val: \"BMI\", cardLabel: \"Body Mass Index\", cardDesc: \"\", diseaseDesc: \"A person’s body mass index (BMI) – weight divided by height-squared (in kilograms and meters).\"},\n{aliases:[\"smoking\"], val: \"CigsPerDay\", cardLabel: \"Cigarettes smoked per day\", cardDesc: \"\", diseaseDesc: \"The number of cigarettes a cigarette smoker has per day. This averages around 15 but is skewed by people who smoke many cigarettes per day.\"},\n{aliases:[\"smoking\"] ,val: \"EverSmoked\", cardLabel: \"History of smoking\", cardDesc: \"\", diseaseDesc: \"Whether someone has ever smoked. Smoking as a behavior is affected by personality, upbringing, social and cultural factors, and genetics to some extent. \"},\n//{val: \"GeneralRiskTolerance_KarlssonLinner2019\", cardLabel: \"General risk tolerance\", cardDesc: \"Description\"},\n{val: \"Insomnia\", cardLabel: \"Insomnia\", cardDesc: \"\", diseaseDesc: \"Insomnia is a sleep disorder characterized by difficulty falling asleep or staying asleep, and often involves daytime sleepiness, low energy, and depressed mood. Genetic and environmental risk factors play a role. Treatments for insomnia include sleep hygiene, lifestyle changes such as reducing caffeine or alcohol consumption or increasing exercise, and medications including melatonin agonists or central nervous system depressants. Approximately 6% of people are affected by insomnia that lasts more than a month and is not due to another primary cause.\"},\n{val: \"Intelligence\", cardLabel: \"Intelligence\", cardDesc: \"\", diseaseDesc: \"As measured by an assessment of “fluid intelligence,” this describes a capacity to solve problems that require logic and reasoning and do not depend on prior knowledge. \"},\n//{val: \"NumberChildrenEverBorn\", cardLabel: \"Number of children\", cardDesc: \"Description\"},\n{val: \"ReactionTime\", cardLabel: \"Reaction Time\", cardDesc: \"\", diseaseDesc: \"This category examines the genetics of reaction time as measured by 12 rounds of a card game, “Snap.” A participant is shown two cards at a time. If both cards are the same, they press a button as quickly as possible. \"},\n{val: \"Dyslexia\", cardLabel: \"Dyslexia\", cardDesc: \"\", diseaseDesc: \"Dyslexia is a disorder characterized by below-age-level reading ability, including difficulties spelling, reading, writing, and “sounding-out” words. It has a genetic basis and runs in families, and affects about 3-7% of the general population. Boys are diagnosed more often than girls, but this may be due to social factors in diagnosis rather than a true gender disparity. Dyslexia can develop after insult to the brain’s language processing faculties, such as by trauma, stroke or dementia. Treatment for dyslexia involves changing how reading and writing are taught. \"},\n{val: \"Parkinsons\", cardLabel: \"Parkinson’s Disease\", cardDesc: \"\", diseaseDesc: \"Parkinson’s disease is a long-term neurodegenerative movement disease that affects the motor system, and in more advanced disease, other brain functions. Parkinson’s disease is caused by loss of dopaminergic neurons in the substancia nigra of the midbrain. It affects approximately 1% of people over age 60. The cause is unknown with a genetic component and an environmental component, with pesticide exposure and head injuries conferring increasing risk, and drinking coffee, tea, or smoking decreasing risk. Primary treatments include dopamine agonists; however, these become less useful in advanced disease. \"},\n{val: \"SleepDuration\", cardLabel: \"Sleep Duration\", cardDesc: \"\", diseaseDesc: \"The number of hours of sleep per day a person gets. On average, people sleep a little more than 7 hours a day, with most people sleeping between 6 to 8 hours on average.\"},\n{val: \"YearsEducation\", cardLabel: \"Years of Education\", cardDesc: \"\", diseaseDesc: \"The level of education of people in the United Kingdom, ranging from little or no formal education to advanced professional degrees. \"},\n{aliases:[\"Major Depressive Disorder\", \"Depression\",\"MDD\"],val: \"Depression\", cardLabel: \"Major Depressive Disorder\", cardDesc: \"\", diseaseDesc: \"Major depressive disorder (commonly: clinical depression) is a mood disorder characterized by periods of low mood, low self-esteem, and disinterest or loss of pleasure in normally enjoyable activities. Depression causes the second most years lived with disability, after back pain. The disease has a genetic basis that accounts for about 40% of disease risk with other environmental factors including some major life changes, medications, and other health conditions contributing additional risk. Depression can be treated with psychotherapy and medications (often SSRIs).\"},\n];\n\nexport const URL_MAP = {\n    \"ADHD\": \"ADHD\",\n    \"AgeFirstBirth\": \"age-first-birth\",\n    \"Alzheimers\": \"Alzheimer\",\n    \"Anorexia\": \"Anorexia\",\n    \"ASD\": \"autism\",\n    \"BipolarDisorder\": \"bipolar\",\n    \"BMI\": \"BMI\",\n    \"CigsPerDay\": \"cigarettes-per-day\",\n    \"MDD\": \"depression\",\n    \"Dyslexia\": \"dyslexia\",\n    \"EverSmoked\": \"ever-smoked\",\n    \"Insomnia\": \"insomnia\",\n    \"Intelligence\": \"intelligence\",\n    \"Parkinsons\": \"parkinsons\",\n    \"ReactionTime\": \"reaction-time\",\n    \"Schizophrenia\": \"schizophrenia\",\n    \"SleepDuration\": \"sleep-duration\",\n    \"YearsEducation\": \"years-of-education\"\n};\n\nconst DiseaseTraitPortal: React.FC<GridProps> = (props: GridProps) => {\n    const { state }: any = useLocation();\n    const { searchvalue } = state ? state : { searchvalue: ''} \n    const navigate = useNavigate(); \n    const [ val, setVal ] = useState<string>(searchvalue)         \n    const [diseaseCards, setdiseaseCards] = useState<{cardLabel: string, val: string, cardDesc: string}[] | undefined>(searchvalue!=='' ? \n    DISEASE_CARDS.filter(d => (\n        d.cardLabel.toLowerCase().includes(val.toLowerCase()) || (d.aliases && d.aliases.find(el=>(\n            el.toLowerCase().includes(val.toLowerCase())\n        )) )\n    )) : undefined);\n    const theme = useTheme();\n    return (\n        <>\n            {  //show vertical app bar only for mobile view \n                useMediaQuery(theme.breakpoints.down('xs')) ? \n                    <TabletAppBar\n                        onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                        style={{ marginBottom: \"63px\" }}\n                        title={<Logo /> as any}\n                    />\n                    :<AppBar\n                        centered={true}\n                        onDownloadsClicked={() => navigate(\"/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                    /> \n            }           \n            <Grid container {...props}> \n                <Grid item sm={0}  md={1} lg={2} xl={2}></Grid>\n                <Grid item sm={8} md={6} lg={5} xl={4}>\n                    {useMediaQuery(theme.breakpoints.down('sm')) && <Container style={{ marginTop: \"130px\" }}>\n                            <img alt=\"disease/trait portal\" src={DiseaseTrait} style={{ width: \"70%\" ,height: \"100%\" }} />\n                    </Container>}\n                    <Container  style={{ width:\"741px\", marginTop: \"147px\" }} fixed>\n                        <Typography\n                            type=\"display\"\n                            size=\"medium\"\n                            style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                        >\n                            Disease/Trait Portal\n                        </Typography>\n                        <br/>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Explore heritability enrichment for 40 distinct psychiatric, behavioral, and neuronal traits within gene regulatory features,\n                            such as bCREs and quantitative trait loci (QTLs). Search genes associated with complex traits based on PsychENCODE TWAS.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 40 total traits cataloged\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 1,103 bCRE/trait associations\n                        </Typography>\n                        <SearchBox\n                            value={val}\n                            onChange={e => { \n                                if(e.target.value===''){\n                                    setdiseaseCards(undefined)\n                                }\n                                setVal(e.target.value)        \n                            }}\n                            onClick={() => {                             \n                                if(val !== ''){                                    \n                                    setdiseaseCards(\n                                        DISEASE_CARDS.filter(d=> \n                                            {\n                                                return (d.cardLabel.toLowerCase().includes(val.toLowerCase()) || (d.aliases && d.aliases.find(el=>{\n                                                    return el.toLowerCase().includes(val.toLowerCase())\n                                                }) ) )\n                                            }\n                                        )\n\n                                    )\n                                }\n                            }}                \n                            helperText={\"e.g. schizophrenia, years of education\"}                            \n                        />\n                    </Container>\n                    {useMediaQuery(theme.breakpoints.down('sm')) && diseaseCards && diseaseCards.length>0 && <Slide direction=\"up\" in timeout={1000}>\n                            <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                <HorizontalCard width={500}\n                                    onCardClick={(v?: string) => {\n                                        let d = DISEASE_CARDS.find(d=>d.val===v)?.diseaseDesc\n                                        navigate(`/psychscreen/traits/${v}`, { state: { searchvalue: val, diseaseDesc: d } })\n                                    }}\n                                    cardContentText={diseaseCards} \n                                />            \n                            </Container>\n                        </Slide> \n                    }\n                    {useMediaQuery(theme.breakpoints.down('sm')) && diseaseCards && diseaseCards.length===0 &&\n                            <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                 No results found             \n                            </Container>\n                         \n                    }\n                </Grid>\n                {useMediaQuery(theme.breakpoints.up('md'))  && <Grid item sm={4} md={4} lg={3} xl={3}>\n                    {!diseaseCards ? ( \n                            <Container style={{ marginTop: \"170px\" }}>\n                                <img alt=\"disease/trait portal\" src={DiseaseTrait} style={{ width: \"100%\" ,height: \"100%\" }} />\n                            </Container>\n                        ):diseaseCards && diseaseCards.length>0 ? ( \n                            <Slide direction=\"up\" in timeout={1000}>\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    <HorizontalCard width={500}\n                                        onCardClick={(v?: string) => {\n                                            let d = DISEASE_CARDS.find(d=>d.val===v)?.diseaseDesc\n                                            navigate(`/psychscreen/traits/${v}`, { state: { searchvalue: val, diseaseDesc: d } })\n                                        }}\n                                        cardContentText={diseaseCards} \n                                    />            \n                                </Container>\n                            </Slide>              \n                        ): (<Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                            No results found\n                        </Container>)}\n                </Grid>}\n                <Grid item sm={0} md={1} lg={2} xl={3} ></Grid>\n            </Grid>\n        </>\n    );\n};\nexport default DiseaseTraitPortal;\n","\n/**\n * SNPPortal.tsx: the SNP/QTL portal page.\n */\n\n import React, {useState, useCallback} from 'react';\n import { AppBar } from '@zscreen/psychscreen-ui-components';\n import { useNavigate, useLocation } from 'react-router-dom';\n import { Grid, Container, GridProps, Slide } from '@mui/material';\n import { TabletAppBar } from '@zscreen/psychscreen-ui-components';\n import { Typography } from '@zscreen/psychscreen-ui-components';\n import CheckIcon from '@mui/icons-material/Check';\n import { HorizontalCard, SearchBox } from '@zscreen/psychscreen-ui-components';\n import { useTheme, useMediaQuery } from '@material-ui/core';\n import { PORTALS } from '../../../App';\n import { Logo } from '../../../mobile-portrait/HomePage/HomePage';\n import SNPQTL from '../../../assets/snp-qtl.png';\n import CircularProgress from '@mui/material/CircularProgress';\n \n\nconst SNP_AUTOCOMPLETE_QUERY = `\nquery suggest($id: String!, $assembly: String!) {\n    suggest(id: $id, assembly: $assembly, limit: 5) {\n        id\n        coordinates {\n            chromosome\n            start\n            end\n        }\n        ...on Gene {\n            name\n        }\n        ...on Transcript {\n            name\n        }\n        __typename\n    }\n}\n`;\n\n\nconst SNPPortal: React.FC<GridProps> = (props: GridProps) => {\n    const navigate = useNavigate();\n    const theme = useTheme();\n    const { state }: any = useLocation();\n    const { searchvalue } = state ? state : { searchvalue: ''}     \n    const [ val, setVal ] = useState<string>(searchvalue)         \n    const [ fetching, setFetching ] = useState<boolean>(false)         \n    const [ snpCards, setsnpCards] = useState<{cardLabel: string, val: string, cardDesc: string}[] | undefined>(undefined)\n   \n    const onSearchChange = useCallback(\n        async (value: any) => {\n            setFetching(true);\n            const response = await fetch('https://ga.staging.wenglab.org/graphql', {\n                method: 'POST',\n                body: JSON.stringify({\n                    query: SNP_AUTOCOMPLETE_QUERY,\n                    variables: {\n                        assembly: \"GRCh38\",\n                        id: value,\n                    },\n                }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n            const snpSuggestion = (await response.json()).data?.suggest;            \n            if(snpSuggestion && snpSuggestion.length > 0) {\n                const r = snpSuggestion.map((g: any)=>{\n                    return {\n                        val: `${g.id}/${g.coordinates.chromosome}/${g.coordinates.start}/${g.coordinates.end}`,\n                        cardDesc: `${g.coordinates.chromosome}:${g.coordinates.start}-${g.coordinates.end}`, //.split(\".\")[0],\n                        cardLabel: g.id\n                    }\n                });\n                setsnpCards(r);\n            } else if (snpSuggestion && snpSuggestion.length === 0)\n                setsnpCards([]);\n            setFetching(false);\n        },\n        []\n    );\n    return (\n        <>\n            {  //show vertical app bar only for mobile view \n                useMediaQuery(theme.breakpoints.down('xs')) ? \n                    <TabletAppBar\n                        onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                        style={{ marginBottom: \"63px\" }}\n                        title={<Logo /> as any}\n                    />\n                    :<AppBar\n                        centered={true}\n                        onDownloadsClicked={() => navigate(\"/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                    /> \n            }   \n            <Grid container {...props}> \n                <Grid item sm={0}  md={1} lg={2} xl={2}></Grid>\n                <Grid item sm={8} md={6} lg={5} xl={4}>\n                    {useMediaQuery(theme.breakpoints.down('sm')) && <Container style={{ marginTop: \"130px\" }}>\n                            <img alt=\"SNP/QTL Portal\" src={SNPQTL} style={{ width: \"70%\" ,height: \"100%\" }} />\n                    </Container>}\n                    <Container  style={{ width:\"741px\", marginTop: \"147px\" }} fixed>\n                        <Typography\n                            type=\"display\"\n                            size=\"medium\"\n                            style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                        >\n                            SNP/QTL Portal\n                        </Typography>\n                        <br/>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                           Search SNPs of interest and explore their impact on gene expression, chromatin accessibility, transcription factor (TF) binding and other molecular traits in the human brain based on PsychENCODE QTLs and sequence analysis of bCREs. Link SNPs to complex traits using GWAS annotations.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 441,502 eQTLs, sQTLs, caQTLs, and fQTLs\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 13,336 variants associated with complex traits\n                        </Typography>                        \n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 510,062 variants in bCREs\n                        </Typography>\n                        <br/>\n                        <br/>\n                        <SearchBox\n                            value={val}\n                            onChange={\n                            e => { \n                                setVal(e.target.value)       \n                            }}\n                            onSearchButtonClick={() => { \n                                if(val !== ''){\n                                    onSearchChange(val)               \n                                }   \n                            }}                \n                            helperText={\"e.g. rs3794102\"}                            \n                        />\n\n                    </Container>\n                   \n                </Grid>\n                {useMediaQuery(theme.breakpoints.up('md'))  && <Grid item sm={4} md={4} lg={3} xl={3}>\n                    {!snpCards && !fetching ? ( \n                            <Container style={{ marginTop: \"170px\" }}>\n                                <img alt=\"gene/bcre portal\" src={SNPQTL} style={{ width: \"100%\" ,height: \"100%\" }} />\n                            </Container>\n                        ): fetching ? ( <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}> <> \n                        <Typography\n                                               type=\"body\"\n                                               size=\"large\"\n                                               style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                                           >\n                                                   Loading Data...\n                                           </Typography>\n                                           <br/>\n                       <CircularProgress color=\"inherit\"/>\n                       \n                        </>  </Container>) :  ( \n                            <>\n                            {snpCards!.length > 0 && <Slide direction=\"up\" in timeout={1000}>\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {<HorizontalCard width={500}\n                                        onCardClick={(v?: string) => {\n                                            let f = snpCards!!.find((g: any)=> g.val===v)                                            \n                                            navigate(`/psychscreen/snp/${f?.cardLabel}`, { state: { snpid: v!!.split(\"/\")[0], chromosome: v!!.split(\"/\")[1] , start:  v!!.split(\"/\")[2] , end: v!!.split(\"/\")[3] } })\n                                        }}\n                                        cardContentText={snpCards!!} \n                                    />  }          \n                                </Container>\n                            </Slide> } \n                            {snpCards!.length === 0 &&\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {'No Results found'  }          \n                                </Container>\n                            }\n                            </>\n                        )}\n                </Grid>}\n              \n                <Grid item sm={0} md={1} lg={2} xl={3} ></Grid>\n            </Grid>\n         \n        </>\n    );\n};\nexport default SNPPortal;\n","/**\n * GenePortal.tsx: the gene portal page.\n */\n// import { DenseBigBed, EmptyTrack, FullBigWig } from 'umms-gb';\n //import { BigWigData, BigBedData, BigZoomData } from \"bigwig-reader\";\nimport React, { useState, useCallback } from 'react';\nimport { AppBar } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Grid, Container, Slide } from '@mui/material';\n\nimport { TabletAppBar } from '@zscreen/psychscreen-ui-components';\nimport { Typography, Button } from '@zscreen/psychscreen-ui-components';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { SearchBox, HorizontalCard } from '@zscreen/psychscreen-ui-components';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { PORTALS } from '../../../App';\nimport { Logo } from '../../../mobile-portrait/HomePage/HomePage';\nimport GeneBCRE from '../../../assets/gene-bcre.png';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst GENE_AUTOCOMPLETE_QUERY = `\n query suggest($id: String!, $assembly: String!) {\n     suggest(id: $id, assembly: $assembly, limit: 5) {\n         id\n         coordinates {\n             chromosome\n             start\n             end\n         }\n         ...on Gene {\n             name\n         }\n         ...on Transcript {\n             name\n         }\n         __typename\n     }\n }\n `;\n\n const GenePortal: React.FC = props => {\n    const navigate = useNavigate();\n    const theme = useTheme();\n    const { state }: any = useLocation();\n    const { searchvalue } = state ? state : { searchvalue: ''}     \n    const [ val, setVal ] = useState<string>(searchvalue)         \n    const [ fetching, setFetching ] = useState<boolean>(false)         \n    const [ geneCards, setgeneCards] = useState<{cardLabel: string, val: string, cardDesc: string}[] | undefined>(undefined)\n   \n    const onSearchChange = useCallback(\n        async (value: any) => {\n            setFetching(true);\n            const response = await fetch('https://ga.staging.wenglab.org/graphql', {\n                method: 'POST',\n                body: JSON.stringify({\n                    query: GENE_AUTOCOMPLETE_QUERY,\n                    variables: {\n                        assembly: \"GRCh38\",\n                        id: value,\n                    },\n                }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n            const genesSuggestion = (await response.json()).data?.suggest;            \n            if(genesSuggestion && genesSuggestion.length > 0) {\n                const r = genesSuggestion.map((g: any)=>{\n                    return {\n                        val: `${g.id}/${g.coordinates.chromosome}/${g.coordinates.start}/${g.coordinates.end}`,\n                        cardDesc: g.id, //.split(\".\")[0],\n                        cardLabel: g.name\n                    }\n                });\n                setgeneCards(r);\n            } else if (genesSuggestion && genesSuggestion.length === 0)\n                setgeneCards([]);\n            setFetching(false);\n        },\n        []\n    );\n    return (\n        <>\n            {  //show vertical app bar only for mobile view \n                useMediaQuery(theme.breakpoints.down('xs')) ? \n                    <TabletAppBar\n                        onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                        style={{ marginBottom: \"63px\" }}\n                        title={<Logo /> as any}\n                    />\n                    :<AppBar\n                        centered={true}\n                        onDownloadsClicked={() => navigate(\"/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                    /> \n            }   \n            <Grid container {...props}> \n                <Grid item sm={0}  md={1} lg={2} xl={2}></Grid>\n                <Grid item sm={8} md={6} lg={5} xl={4}>\n                    {useMediaQuery(theme.breakpoints.down('sm')) && <Container style={{ marginTop: \"130px\" }}>\n                            <img alt=\"Gene bCRE portal\" src={GeneBCRE} style={{ width: \"70%\" ,height: \"100%\" }} />\n                    </Container>}\n                    <Container  style={{ width:\"741px\", marginTop: \"147px\" }} fixed>\n                        <Typography\n                            type=\"display\"\n                            size=\"medium\"\n                            style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                        >\n                            Gene/bCRE Portal\n                        </Typography>\n                        <br/>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                            Explore gene expression and regulatory element activity in the fetal and adult brain at bulk and single-cell resolution. Visualize gene/bCRE\n                            links based on PsychENCODE QTLs and single cell co-expression analyses.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Gene expression in 11 brain regions\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 23 fetal, adolescent, and adult time points covered\n                        </Typography>                        \n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> 761,984 brain regulatory elements\n                        </Typography>\n                        <br/>\n                        <br/>\n                        <SearchBox\n                            value={val}\n                            onChange={\n                            e => { \n                                setVal(e.target.value)       \n                            }}\n                            onSearchButtonClick={() => { \n                                if(val !== ''){\n                                    onSearchChange(val)               \n                                }   \n                            }}                \n                            helperText={\"e.g. sox4, gapdh\"}                            \n                        />\n\n                    </Container>\n                   \n                </Grid>\n                {useMediaQuery(theme.breakpoints.up('md'))  && <Grid item sm={4} md={4} lg={3} xl={3}>\n                    {!geneCards && !fetching ? ( \n                            <Container style={{ marginTop: \"170px\" }}>\n                                <img alt=\"gene/bcre portal\" src={GeneBCRE} style={{ width: \"100%\" ,height: \"100%\" }} />\n                            </Container>\n                        ): fetching ? ( <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}> <> \n                        <Typography\n                                               type=\"body\"\n                                               size=\"large\"\n                                               style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                                           >\n                                                   Loading Data...\n                                           </Typography>\n                                           <br/>\n                       <CircularProgress color=\"inherit\"/>\n                       \n                        </>  </Container>) :  ( \n                            <>\n                            {geneCards!.length > 0 && <Slide direction=\"up\" in timeout={1000}>\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {<HorizontalCard width={500}\n                                        onCardClick={(v?: string) => {\n                                            let f = geneCards!!.find((g: any)=> g.val===v)\n                                            navigate(`/psychscreen/gene/${f?.cardLabel}`, { state: { geneid: v!!.split(\"/\")[0].split(\".\")[0], chromosome: v!!.split(\"/\")[1] , start:  v!!.split(\"/\")[2] , end: v!!.split(\"/\")[3] } })\n                                        }}\n                                        cardContentText={geneCards!!} \n                                    />  }          \n                                </Container>\n                            </Slide> } \n                            {geneCards!.length === 0 &&\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {'No Results Found'  }          \n                                </Container>\n                            }\n                            </>\n                        )}\n                </Grid>}\n              \n                <Grid item sm={0} md={1} lg={2} xl={3} ></Grid>\n            </Grid>\n            <br/>\n            <br/>\n            <br/>\n            <Grid container>\n                <Grid item sm={1}  md={2} lg={3} xl={3}></Grid>\n                <Grid item sm={8} md={6} lg={5} xl={4}>\n                    <Button bvariant={\"outlined\"}  btheme=\"light\" onClick={()=>{\n                        navigate(`/psychscreen/gene/gtexumap`)\n\n                    }} >{'GTEx Umap Plots'}</Button>\n                </Grid>\n            </Grid>\n         \n        </>\n    );\n};\nexport default GenePortal;\n","/**\n * SingleCellPortal.tsx: the single cell portal page.\n */\n\n import React from 'react';\n import { AppBar } from '@zscreen/psychscreen-ui-components';\n import { useNavigate } from 'react-router-dom';\n import { Grid, Container, GridProps } from '@mui/material';\n import { TabletAppBar } from '@zscreen/psychscreen-ui-components';\n import { Typography } from '@zscreen/psychscreen-ui-components';\n import CheckIcon from '@mui/icons-material/Check';\n import { HorizontalCard } from '@zscreen/psychscreen-ui-components';\n import { useTheme, useMediaQuery } from '@material-ui/core';\n import { PORTALS } from '../../../App';\n import { Logo } from '../../../mobile-portrait/HomePage/HomePage';\n import SingleCell from '../../../assets/single-cell.png';\n\nexport const DISEASE_CARDS = [\n{val: \"DevBrain\", cardLabel: \"DevBrain\", cardDesc: \"\"},\n{val: \"IsoHuB\", cardLabel: \"IsoHuB\", cardDesc: \"\"},\n{val: \"SZBDMulti-Seq\", cardLabel: \"SZBDMulti-Seq\", cardDesc: \"\"},\n{val: \"Urban-DLPFC\", cardLabel: \"Urban-DLPFC\", cardDesc: \"\"},\n{val: \"CMC-CellHashing\", cardLabel: \"CMC-CellHashingr\", cardDesc: \"\"},\n{val: \"UCLA-ASD\", cardLabel: \"UCLA-ASD\", cardDesc: \"\"},\n]\n \nconst SingleCellPortal: React.FC<GridProps> = (props: GridProps) => {\n    const navigate = useNavigate();\n    const theme = useTheme();\n    return (\n        <>\n            {  //show vertical app bar only for mobile view \n                useMediaQuery(theme.breakpoints.down('xs')) ? \n                    <TabletAppBar\n                        onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                        style={{ marginBottom: \"63px\" }}\n                        title={<Logo /> as any}\n                    />\n                    :<AppBar\n                        centered={true}\n                        onDownloadsClicked={() => navigate(\"/downloads\")}\n                        onHomepageClicked={() => navigate(\"/\")}\n                        onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                    /> \n            }           \n            <Grid container {...props}> \n                <Grid item sm={0}  md={1} lg={2} xl={2}></Grid>\n                <Grid item sm={8} md={6} lg={5} xl={4}>\n                    {useMediaQuery(theme.breakpoints.down('sm')) && <Container style={{ marginTop: \"130px\" }}>\n                            <img alt=\"single cell portal\" src={SingleCell} style={{ width: \"70%\" ,height: \"100%\" }} />\n                    </Container>}\n                    <Container  style={{ width:\"741px\", marginTop: \"147px\" }} fixed>\n                        <Typography\n                            type=\"display\"\n                            size=\"medium\"\n                            style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                        >\n                            Single-Cell Portal\n                        </Typography>\n                        <br/>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\", width: \"414px\" }}\n                        >\n                         Visualize the single cell composition of the human brain based on single cell ATAC-seq and RNA-seq from PsychENCODE and public sources. Identify marker genes and bCREs specific to particular cell types and states.\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} />Transcriptomes for 1,391,772 single cells\n                        </Typography>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\", marginBottom: \"40px\" }}\n                        >\n                            <CheckIcon style={{ marginRight: \"9px\" }} /> Chromatin accessibility for 1,009,942 single cells\n                        </Typography>\n                                               \n\n                    </Container>\n                    {\n                            <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                <HorizontalCard width={500}\n                                    onCardClick={(v?: string) => {\n                                        navigate(`/psychscreen/single-cell/${v}`, { state: { searchvalue: v } })\n                                    }}\n                                    cardContentText={DISEASE_CARDS} \n                                />            \n                            </Container>\n                    }\n                </Grid>\n                {useMediaQuery(theme.breakpoints.up('md'))  && <Grid item sm={4} md={4} lg={3} xl={3}>\n                     \n                            <Container style={{ marginTop: \"170px\" }}>\n                                <img alt=\"single cell portal\" src={SingleCell} style={{ width: \"70%\" ,height: \"70%\" }} />\n                            </Container>\n                        \n                </Grid>}\n                <Grid item sm={0} md={1} lg={2} xl={3} ></Grid>\n            </Grid>\n        </>\n    );\n};\nexport default SingleCellPortal;\n","import React, { useMemo } from 'react';\nimport { Grid, Container, CircularProgress } from '@mui/material';\nimport { CustomizedTable } from '@zscreen/psychscreen-ui-components';\nimport { GridProps } from '@mui/material';\n\ntype GeneAssociation = {\n    hsq: number,\n    twas_p: number,\n    twas_bonferroni: number,\n    dge_log2fc: number,\n    gene_id: string,\n    gene_name: string,        \n    dge_fdr: number\n}\n\nexport type GeneAssociationsProps =  GridProps & {\n    disease: string,\n    data: GeneAssociation[]\n};\n\n/*const GENE_ASSOCIATION_DATA = Array(10).fill({\n    Symbol: 'DRD2',\n    'Overall Association Score': 0.60,\n    'Genetic Associations': 'No Data',\n    'Text Mining': 0.08,\n    'RNA Expression': 'No data'\n});*/\n\nconst GeneAssociations: React.FC<GeneAssociationsProps> = props => {\n   \n    const tabledata = useMemo( () => props.data && [ ...props.data ].sort((a, b) => a.twas_bonferroni - b.twas_bonferroni).map(d => [\n        { header: 'Gene ID', value: d.gene_id },\n        { header: 'Gene Name', value: d.gene_name },\n        { header: 'Hsq', value: d.hsq.toFixed(3) },\n        { header: 'p-value', value: d.twas_p < 0.01 ? d.twas_p.toExponential(3) : d.twas_p.toFixed(3) },\n        { header: 'q-value', value: d.twas_bonferroni < 0.01 ? d.twas_bonferroni.toExponential(3) : d.twas_bonferroni.toFixed(3) },\n        { header: 'FDR', value: d.dge_fdr.toFixed(3) },\n        { header: 'log2 fold change', value: d.dge_log2fc.toFixed(3) }\n    ]), [ props.data ]);\n\n    return (        \n        <Grid container {...props}>    \n            <Grid item sm={12}>\n                <Container style={{ marginTop: \"30px\", marginLeft: \"150px\" }}>                   \n                    {props.data ? <CustomizedTable style={{ width: \"max-content\" }}  tabledata={tabledata}/>: <CircularProgress color='inherit'/>}\n                </Container>\n            </Grid>\n        </Grid>\n        \n    );\n};\nexport default GeneAssociations;\n","import React, { useMemo } from 'react';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport { CustomizedTable } from '@zscreen/psychscreen-ui-components';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { GwasIntersectingSnpsWithCcres } from './DiseaseIntersectingSnpsWithccres';\n\nexport type GWAS_SNP = {\n    snpid: string;\n    chrom: string;\n    start: number;\n    stop: number;\n    analyses_identifying_snp: number;\n    associated_gene: string;\n    riskallele: string;\n    association_p_val: number[];\n};\n\nexport type AssociatedSnpQtlProps = GridProps & {\n    disease: string;\n    data: GWAS_SNP[];\n};\n\nexport function compareByMinimumP(a: GWAS_SNP | GwasIntersectingSnpsWithCcres, b: GWAS_SNP | GwasIntersectingSnpsWithCcres) {\n    return Math.min(...a.association_p_val) - Math.min(...b.association_p_val);\n}\n\nconst AssociatedSnpQtl: React.FC<AssociatedSnpQtlProps> = props => {    \n    \n    const SnpAssociationData = useMemo( () => props.data && [ ...props.data ].sort(compareByMinimumP).map( (d: GWAS_SNP) => [\n        { header: 'SNP ID', value: d.snpid },\n        { header: 'Chromosome', value: d.chrom },\n        { header: 'Position', value: d.stop.toLocaleString() },\n        { header: 'Number of Supporting GWAS', value: d.analyses_identifying_snp },\n        { header: 'Risk Allele', value: d.riskallele },\n        { header: 'Nearest Gene', value: d.associated_gene },\n        { header: 'GWAS p-value', value: d.association_p_val.join(\",\") }\n    ]), [ props.data ]);\n\n    return (\n        <Grid container {...props}>    \n            <Grid item sm={12}>\n                <Container style={{ marginTop: \"30px\", marginLeft: \"130px\" }}>\n                    {props.data ? <CustomizedTable style={{ width: \"max-content\" }}  tabledata={SnpAssociationData}/>: <CircularProgress color='inherit'/>}\n                </Container>\n            </Grid>\n        </Grid>\n    );\n    \n};\nexport default AssociatedSnpQtl;\n","import React, { useState } from 'react';\nimport { Grid, Container, GridProps, Divider } from '@mui/material';\nimport { CustomizedTable, Button } from '@zscreen/psychscreen-ui-components';\nimport Box from '@mui/material/Box';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport { compareByMinimumP } from './AssociatedSnpQtl';\n\n/*const SNP_QTL_ASSOCIATION_DATA = Array(10).fill({\n    Chromosome: 'chr12',\n    Position: 2236139,\n    ID: 'rs1006737',\n    'In Regulatory Element?': 'No'\n});*/\n\nexport type GwasIntersectingSnpsWithCcres = {    \n    snpid: string,\n    snp_chrom: string,\n    snp_start: number,\n    snp_stop: number,\n    associated_gene: string,\n    riskallele: string,\n    association_p_val: number[],\n    ccre_chrom: string,\n    ccre_start: number,\n    ccre_stop: number,\n    rdhsid: string,\n    ccreid: string,\n    ccre_class: string\n\n}\n\ntype GwasIntersectingSnpsWithBcres = GwasIntersectingSnpsWithCcres & {        \n    bcre_group: string\n}\n\nexport type DiseaseIntersectingSnpsWithccresProps = GridProps & {\n    disease: string,\n    ccredata: GwasIntersectingSnpsWithCcres[],\n    adult_bcredata: GwasIntersectingSnpsWithBcres[],\n    fetal_bcredata: GwasIntersectingSnpsWithBcres[]\n};\n\nconst DiseaseIntersectingSnpsWithccres: React.FC<DiseaseIntersectingSnpsWithccresProps> = props => {    \n    const [ tabIndex, setTabIndex] = useState(0);\n    const [page, setPage] = useState<number>(0);\n\n    const handleTabChange = (_: any, newTabIndex: number) => {\n        setTabIndex(newTabIndex);\n    };\n\n    const GWASIntersectingSnpDataWithCcre = props.ccredata && [ ...props.ccredata ].sort(compareByMinimumP).map((d: GwasIntersectingSnpsWithCcres)=>{\n        return [{header: 'SNP ID', value: d.snpid},\n            {header: 'Chromosome', value: d.snp_chrom},\n            {header: 'Position', value: d.snp_stop.toLocaleString()},            \n            {header: 'Risk Allele', value: d.riskallele},\n            {header: 'Associated Gene', value: d.associated_gene},\n            {header: 'GWAS p-value', value: d.association_p_val.join(\",\")},\n            {header: 'cCRE chromosome', value: d.ccre_chrom},\n            {header: 'cCRE start', value: d.ccre_start.toLocaleString()},\n            {header: 'cCRE end', value: d.ccre_stop.toLocaleString()},\n            {header: 'cCRE ID', value: d.ccreid},\n            {header: 'cCRE class', value: d.ccre_class},\n        ]\n    });\n    const AdultGWASIntersectingSnpDataWithBcre = props.adult_bcredata && [ ...props.adult_bcredata ].sort(compareByMinimumP).map((d: GwasIntersectingSnpsWithBcres)=>{\n        return [{header: 'SNP ID', value: d.snpid},\n            {header: 'Chromosome', value: d.snp_chrom},\n            {header: 'Position', value: d.snp_stop.toLocaleString()},            \n            {header: 'Risk Allele', value: d.riskallele},\n            {header: 'Nearest Gene', value: d.associated_gene},\n            {header: 'GWAS p-value', value: d.association_p_val.join(\",\")},\n            {header: 'bCRE chromosome', value: d.ccre_chrom},\n            {header: 'bCRE start', value: d.ccre_start.toLocaleString()},\n            {header: 'bCRE end', value: d.ccre_stop.toLocaleString()},\n            {header: 'bCRE ID', value: d.ccreid},\n            {header: 'bCRE class', value: d.ccre_class}\n        ]\n    });\n    const FetalGWASIntersectingSnpDataWithBcre = props.fetal_bcredata && [ ...props.fetal_bcredata ].sort(compareByMinimumP).map((d: GwasIntersectingSnpsWithBcres)=>{\n        return [{header: 'SNP ID', value: d.snpid},\n            {header: 'Chromosome', value: d.snp_chrom},\n            {header: 'Position', value: d.snp_stop.toLocaleString()},            \n            {header: 'Risk Allele', value: d.riskallele},\n            {header: 'Nearest Gene', value: d.associated_gene},\n            {header: 'GWAS p-value', value: d.association_p_val.join(\",\")},\n            {header: 'bCRE chromosome', value: d.ccre_chrom},\n            {header: 'bCRE start', value: d.ccre_start.toLocaleString()},\n            {header: 'bCRE end', value: d.ccre_stop.toLocaleString()},\n            {header: 'bCRE ID', value: d.ccreid},\n            {header: 'bCRE class', value: d.ccre_class}\n        ]\n    });\n\n    return (\n        <Grid container {...props}>    \n            <Grid item sm={12}>\n                <Container style={{ marginTop: \"30px\", marginLeft: \"100px\" }}>\n                    <Box>\n                        <Tabs value={tabIndex} onChange={handleTabChange}>\n                            <Tab label=\"SNPs Intersecting any cCRE\" ></Tab>\n                            {props.adult_bcredata && props.fetal_bcredata && (props.adult_bcredata.length>0 || props.fetal_bcredata.length>0 ) &&<Tab label=\"SNPs Intersecting brain cCREs (bCREs)\" ></Tab>}\n                        </Tabs>\n                        <Divider/>\n                    </Box>\n                    { props.ccredata  && tabIndex === 0 && <CustomizedTable style={{ width: \"max-content\" }} tabledata={GWASIntersectingSnpDataWithCcre} /> }\n                    { props.adult_bcredata && props.fetal_bcredata && (props.adult_bcredata.length>0 || props.fetal_bcredata.length>0 ) && tabIndex === 1 && (\n                        <>\n                            <br/>\n                            { props.adult_bcredata && <Button bvariant={page===0 ? \"filled\" : \"outlined\"}  btheme=\"light\" onClick={() => setPage(0)}>Adult</Button> }&nbsp;&nbsp;&nbsp;\n                            { props.fetal_bcredata && <Button bvariant={page===1 ? \"filled\" : \"outlined\"}  btheme=\"light\" onClick={() => setPage(1)}>Fetal</Button> }\n                            { page === 0 && <CustomizedTable style={{ width: \"max-content\" }}  tabledata={AdultGWASIntersectingSnpDataWithBcre} /> }\n                            { page === 1 && <CustomizedTable style={{ width: \"max-content\" }}  tabledata={FetalGWASIntersectingSnpDataWithBcre} /> }\n                        </>\n                    )}\n                </Container>\n            </Grid>\n        </Grid>\n    );\n};\nexport default DiseaseIntersectingSnpsWithccres;\n","import { GenomicRange } from \"../GenePortal/AssociatedxQTL\";\n\nfunction compare(a: GenomicRange, b: GenomicRange): number {\n    const ca = +a.chromosome!.replace(/chr/g, \"\").replace(/X/g, \"23\").replace(/Y/g, \"24\");\n    const cb = +b.chromosome!.replace(/chr/g, \"\").replace(/X/g, \"23\").replace(/Y/g, \"24\");\n    if (ca < cb) return -1;\n    if (ca > cb) return 1;\n    return a.start < b.start ? -1 : a.start === b.start ? 0 : 1;\n}\n\nexport function riskLoci(snps: (GenomicRange & { p: number })[]): (GenomicRange & { count: number, minimump: number })[] {\n    const expandedCoordinates = snps\n        .filter(x => x.p < 5e-8)\n        .map(x => ({\n            chromosome: x.chromosome,\n            start: x.start - 1500000 < 0 ? 0 : x.start - 1500000,\n            end: x.end + 1500000,\n            p: x.p\n        }))\n        .sort(compare);\n    const riskLoci: (GenomicRange & { count: number, minimump: number })[] = [];\n    expandedCoordinates.forEach((r, i) => {\n        if (i === 0) {\n            riskLoci.push({ ...r, count: 1, minimump: r.p });\n            return;\n        }\n        const currentLocus = riskLoci[riskLoci.length - 1];\n        if (r.chromosome !== currentLocus.chromosome) {\n            riskLoci.push({ ...r, count: 1, minimump: r.p });\n            return;\n        }\n        if (r.start < currentLocus.end) {\n            currentLocus.end = r.end;\n            ++currentLocus.count;\n            if (r.p < currentLocus.minimump) currentLocus.minimump = r.p;\n        } else\n            riskLoci.push({ ...r, count: 1, minimump: r.p });\n    });\n    return riskLoci;\n}\n","import { RefObject } from 'react';\n\n/**\n * Smooths the input data with a normal kernel density estimator.\n * @param input: the input vector to smooth.\n * @param sampleDomain: the domain over which to smooth; defaults to the domain of the input data.\n * @param bandWidth: the standard deviation of the kernel; defaults to 1/20 of the domain width.\n * @param sampleRate: the rate at which to sample the density; defaults to 1/100 of the domain width.\n */\nexport function standardNormalKernel(\n    input: number[],\n    sampleDomain: number[] = [],\n    bandWidth: number = -1.0,\n    sampleRate: number = -1.0\n): number[] {\n    const minimum = 2 === sampleDomain.length ? sampleDomain[0] : Math.min(...input);\n    const maximum = 2 === sampleDomain.length ? sampleDomain[1] : Math.max(...input);\n    if (-1.0 === bandWidth) bandWidth = (maximum - minimum) / 30.0;\n    if (-1.0 === sampleRate) sampleRate = (maximum - minimum) / 100.0;\n    const samplePositions: number[] = [];\n    for (let i = minimum + sampleRate; i <= maximum; i += sampleRate) samplePositions.push(i);\n    const retval = samplePositions.map(x => 0.0);\n    input.forEach(x => {\n        let values = gaussian(Math.sqrt(2.0 * Math.PI) * bandWidth, x, bandWidth, samplePositions);\n        values.forEach((x, i) => {\n            retval[i] += x;\n        });\n    });\n    return retval;\n}\n\n/**\n * Samples a normal distribution at the given positions.\n * @param amplitude the amplitude of the distribution.\n * @param mean the mean of the distribution.\n * @param stdev the standard deviation of the distribution.\n * @param positions the positions at which to sample the distribution.\n */\nexport function gaussian(amplitude: number, mean: number, stdev: number, positions: number[]): number[] {\n    const a = amplitude / (Math.sqrt(2.0 * Math.PI) * stdev);\n    const d = 2.0 * stdev * stdev;\n    return positions.map(x => a * Math.exp((-(x - mean) * (x - mean)) / d));\n}\n\nexport function groupByThenBy<T, U>(\n    data: T[],\n    keyA: (v: T) => string,\n    keyB: (v: T) => string,\n    val: (v: T) => U\n): Map<string, Map<string, U[]>> {\n    const results: Map<string, Map<string, U[]>> = new Map();\n    data.forEach(d => {\n        const kA = keyA(d),\n            kB = keyB(d);\n        if (results.get(kA) === undefined) results.set(kA, new Map<string, U[]>());\n        const mA = results.get(kA)!;\n        if (mA.get(kB) === undefined) mA.set(kB, []);\n        mA.get(kB)!.push(val(d));\n    });\n    return results;\n}\n\nexport function median(values: number[]): number {\n    if (values.length === 0) return 0;\n    values = [...values].sort();\n    const half = Math.floor(values.length / 2);\n    if (values.length % 2) return values[half];\n    return (values[half - 1] + values[half]) / 2.0;\n}\n\nexport function linearTransform(d: [number, number], r: [number, number]): (v: number) => number {\n    return v => r[0] + (r[1] - r[0]) * ((v - d[0]) / (d[1] - d[0]));\n}\n\nfunction hslToRgb(h: number, s: number, l: number): [ number, number, number ] {\n    let r: number, g: number, b: number;\n    if (s === 0)\n        r = g = b = l; // achromatic\n    else {\n        const hue2rgb = (p: number, q: number, t: number): number => {\n            if (t < 0) t += 1;\n            if (t > 1) t -= 1;\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\n            if (t < 1 / 2) return q;\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n            return p;\n        }\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n    return [ Math.round(r * 255), Math.round(g * 255), Math.round(b * 255) ];\n}\n\nexport function spacedColors(n: number, s: number = 50, l: number = 50): (i: number) => string {\n    return i => {\n        const [ r, g, b ] = hslToRgb(((i * (360 / (n || 1))) % 360) / 360, s / 100, l / 100);\n        return `rgb(${r},${g},${b})`\n    };\n}\n\nexport function assignColors(items: Set<string>): { [key: string]: string } {\n    const colors = spacedColors(items.size);\n    const r: { [key: string]: string } = {};\n    [...items].forEach((item, i) => {\n        r[item] = colors(i);\n    });\n    return r;\n}\n\nexport const FRIENDLY: Map<string, string> = new Map([]);\n\nexport const COLORS = {};\n\nexport function downloadBlob(blob: Blob, filename: string) {\n    const url = URL.createObjectURL(blob);\n    const downloadLink = document.createElement('a');\n    downloadLink.href = url;\n    downloadLink.download = filename;\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\n\nexport function svgData(svgNode: RefObject<SVGSVGElement>): string {\n    if (!svgNode.current) return '';\n    const svg = svgNode.current.cloneNode(true) as SVGSVGElement;\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    const preface = '<?xml version=\"1.0\" standalone=\"no\"?>';\n    return preface + svg.outerHTML.replace(/\\n/g, '').replace(/[ ]{8}/g, '');\n}\n\nexport function svgDataE(svgNode: SVGSVGElement[], translations: ([ number, number ] | undefined)[]): string {\n    const svgs = svgNode.map(x => x.cloneNode(true) as SVGSVGElement);\n    svgs[0].setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    svgs.slice(1).forEach( (x, i) => {\n        Array.from(x.children).forEach(c => {\n            const cc = c.cloneNode(true) as SVGGElement;\n            if (translations[i]) {\n                const s = svgs[0].createSVGTransform();\n                s.setTranslate(...(translations[i] as [ number, number ]));\n                cc.transform.baseVal.appendItem(s);\n            }\n            svgs[0].getRootNode().appendChild(cc);\n        });\n    });\n    const preface = '<?xml version=\"1.0\" standalone=\"no\"?>';\n    return preface + svgs[0].outerHTML.replace(/\\n/g, '').replace(/[ ]{8}/g, '');\n}\n\nexport function downloadSVG(svg: RefObject<SVGSVGElement>, filename: string) {\n    downloadBlob(new Blob([svgData(svg)], { type: 'image/svg+xml;charset=utf-8' }), filename);\n}\n\nexport function downloadTSV(text: string, filename: string) {\n    downloadBlob(new Blob([text], { type: 'text/plain' }), filename);\n}\n","import { gql, useQuery } from '@apollo/client';\nimport { Container } from '@mui/system';\nimport { CircularProgress, Grid } from '@mui/material';\nimport { groupBy } from 'queryz';\nimport React, { useMemo, useState } from 'react';\nimport { Cytobands } from 'umms-gb';\nimport { linearTransform } from '../GenePortal/violin/utils';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport { GenomicRange } from '../GenePortal/AssociatedxQTL';\n\ntype Cytoband = {\n    coordinates: {\n        chromosome: string;\n        start: number;\n        end: number;\n    };\n    stain: string;\n    bandname: string;\n};\n\ntype CytobandQueryResponse = {\n    cytoband: Cytoband[];\n};\n\nconst HUMAN_CYTOBAND_QUERY = gql`\nquery {\n  cytoband(assembly: \"hg38\") {\n    coordinates {\n      chromosome\n      start\n      end\n    }\n    stain\n    bandname\n  }\n}\n`;\n\nfunction useCytobands() {\n    return useQuery<CytobandQueryResponse>(HUMAN_CYTOBAND_QUERY);\n}\n\nfunction cappedLinearTransform(a: [ number, number ], b: [ number, number ]): (x: number) => number {\n    const l = linearTransform(a, b);\n    return (x: number) => l(x > a[1] ? a[1] : x);\n}\n\nfunction colorGradient(v: number): string {\n    const start = [ 235, 168, 12 ];\n    const end = [ 235, 168, 12 ];\n    const c = start.map((v, i) => cappedLinearTransform([ -Math.log10(5e-8), 20 ], [ v, end[i] ]));\n    return `rgb(${c.map(x => x(v)).join(\",\")})`;\n}\n\nconst RiskLocusView: React.FC<{ loci: { chromosome?: string, start: number, end: number, count: number, minimump: number }[], onLocusClick?: (locus: GenomicRange) => void }> = props => {\n    const groupedLoci = useMemo(() => groupBy(props.loci, x => x.chromosome, x => x), [ props.loci ]);\n    const { data: cytobands } = useCytobands();\n    const groupedCytobands = useMemo( () => groupBy(cytobands?.cytoband || [], x => x.coordinates.chromosome, x => x), [ cytobands ]);\n    const maxes = useMemo( () => new Map([ ...groupedCytobands.keys() ].map(k => [\n        k, Math.max(...(groupedCytobands.get(k)!.length === 0 ? [1] : groupedCytobands.get(k)!.map(x => x.coordinates.end)))\n    ])), [ groupedCytobands ]);\n    const [ selected, setSelected ] = useState<[ string, number, number, number ] | null>(null);\n    return props.loci.length === 0 ? (\n        <CircularProgress />\n    ) : (\n        <Grid container {...props}>    \n            <Grid item sm={12}>\n                <Typography type=\"body\" size=\"medium\" style={{ width: \"750px\", marginLeft: \"150px\", marginTop: \"30px\" }}>\n                    {[ ...groupedLoci.keys() ].reduce<number>((v, c) => v + groupedLoci.get(c)!.length, 0)} risk loci have been identified by GWAS (orange boxes below). Mouse over or click a locus to\n                    explore PsychENCODE epigenetic and transcriptomic data in that region.\n                </Typography>\n                <Container style={{ marginTop: \"30px\", marginLeft: \"150px\", width: \"750px\" }}>                   \n                    <svg width=\"100%\" viewBox=\"0 0 1000 720\">\n                        { [ ...groupedLoci.keys() ]\n                            .filter(x => x && groupedCytobands.get(x))\n                            .sort((a, b) => +a!.replace(/chr/g, \"\").replace(/X/g, \"23\").replace(/Y/g, \"24\") - +b!.replace(/chr/g, \"\").replace(/X/g, \"23\").replace(/Y/g, \"24\"))\n                            .map((chromosome, i) => (\n                                <>\n                                    <text\n                                        transform={`translate(40,${i * 30 + 13})`}\n                                        fontSize=\"30px\"\n                                        dominantBaseline=\"middle\"\n                                        textAnchor=\"end\"\n                                        fontWeight=\"bold\"\n                                        fontFamily=\"roboto\"\n                                    >\n                                        {chromosome?.replace(/chr/g, \"\")}\n                                    </text>\n                                    <Cytobands\n                                        transform={`translate(50,${i * 30})`}\n                                        data={groupedCytobands.get(chromosome!)!}\n                                        highlights={groupedLoci.get(chromosome)?.map(x => ({ ...x, color: colorGradient(-Math.log10(x.minimump)) }))}\n                                        width={950 * maxes.get(chromosome!)! / maxes.get(\"chr1\")!}\n                                        height={20}\n                                        id=\"\"\n                                        domain={{ start: 0, end: maxes.get(chromosome!)! }}\n                                        onHighlightMouseOver={(_, x, ii) => setSelected([ chromosome!, ii, x + 50, i * 30 ])}\n                                        onHighlightMouseOut={() => setSelected(null)}\n                                        onHighlightClick={(_, __, ii) => props.onLocusClick && props.onLocusClick({\n                                            chromosome: groupedLoci.get(chromosome!)![ii].chromosome,\n                                            start: groupedLoci.get(chromosome!)![ii].start + 1400000,\n                                            end: groupedLoci.get(chromosome!)![ii].end - 1400000,\n                                        })}\n                                        opacity={0.4}\n                                    />\n                                </>\n                            )\n                        )}\n                        { selected ? (\n                            <g transform={`translate(${selected[2] < 180 ? 30 : selected[2] > 700 ? 700 : selected[2] - 150},${selected[3] + (selected[3] >= 550 ? -105 : 30)})`}>\n                                <rect\n                                    x={0}\n                                    y={0}\n                                    width={300}\n                                    height={100}\n                                    stroke=\"#444444\"\n                                    strokeWidth={5}\n                                    fill=\"#ffffff\"\n                                    fillOpacity={0.95}\n                                />\n                                <text x={12} y={24} fontFamily=\"roboto\" fontWeight=\"bold\" fontSize=\"18px\">\n                                    {groupedLoci.get(selected[0])![selected[1]].chromosome}:\n                                    {groupedLoci.get(selected[0])![selected[1]].start.toLocaleString()}-\n                                    {groupedLoci.get(selected[0])![selected[1]].end.toLocaleString()}\n                                </text>\n                                <text x={28} y={48} fontFamily=\"roboto\" fontSize=\"18px\">\n                                    {groupedLoci.get(selected[0])![selected[1]].count} significant\n                                    SNP{groupedLoci.get(selected[0])![selected[1]].count !== 1 ? \"s\" : \"\"} at locus\n                                </text>\n                                <text x={28} y={68} fontFamily=\"roboto\" fontSize=\"18px\">\n                                    lowest p-value at locus: {groupedLoci.get(selected[0])![selected[1]].minimump.toExponential(1)}\n                                </text>\n                                <text x={12} y={88} fontFamily=\"roboto\" fontSize=\"18px\" fill=\"#0000ff\">\n                                    click to explore this locus\n                                </text>\n                            </g>\n                        ) : null}\n                    </svg>\n                </Container>\n            </Grid>\n        </Grid> \n    )\n};\nexport default RiskLocusView;\n","import React, { useMemo } from 'react';\nimport { gql, useQuery } from '@apollo/client';\nimport { Cytobands } from 'umms-gb';\n//import { Grid } from 'semantic-ui-react';\nimport { Grid } from '@mui/material';\nimport { GenomicRange } from './GenomeExplorer';\n\nconst CYTOBAND_QUERY = gql`\n  query cytobands($assembly: String!, $chromosome: String) {\n    cytoband(assembly: $assembly, chromosome: $chromosome) {\n      stain\n      coordinates {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n`;\n\nexport type CytobandQueryResponse = {\n    cytoband: {\n        stain: string;\n        coordinates: {\n            chromosome: string;\n            start: number;\n            end: number;\n        };\n    }[];\n};\n\nexport type CytobandsProps = {\n    assembly: string;\n    chromosome: string;\n    innerWidth: number;\n    height: number;\n    position?: GenomicRange;\n};\n\nconst CytobandView: React.FC<CytobandsProps> = props => {    \n    const { loading, data } = useQuery<CytobandQueryResponse>(CYTOBAND_QUERY, {\n        variables: {\n            assembly: props.assembly,\n            chromosome: props.chromosome\n        }\n    });\n    const domain = useMemo( () => data && ({\n        start: 0,\n        end: Math.max(...(data.cytoband.length === 0 ? [1] : data.cytoband.map(x => x.coordinates.end)))\n    }), [ data ]);\n    return loading || !data ? null : (\n        <Grid container>\n            <Grid item sm={2}  md={2} lg={2} xl={2}/>\n            <Grid item sm={8}  md={8} lg={8} xl={8}>\n                <svg width=\"100%\" viewBox={`0 0 ${props.innerWidth} ${props.height}`}>\n                    <Cytobands\n                        highlight={props.position && { ...props.position, color: \"#0000ff\" }}\n                        data={data.cytoband}\n                        domain={domain || { start: 0, end: 1 }}\n                        width={props.innerWidth}\n                        height={props.height}\n                        id=\"cytobands\"\n                    />\n                </svg>\n            </Grid>\n            <Grid item sm={2}  md={2} lg={2} xl={2}>\n                <strong>{props.assembly}:{props.chromosome}</strong>\n            </Grid>\n        </Grid>\n    );\n};\nexport default CytobandView;\n","//import { GenomicRange } from '../../../HomePage/Browser/Explorer/GenomeExplorer';\nimport React, { useState } from 'react';\nimport { EmptyTrack, PackTranscriptTrack, SquishTranscriptTrack } from 'umms-gb';\nimport { TranscriptList } from 'umms-gb/dist/components/tracks/transcripts/types';\n\nexport type GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}   \nexport type EGeneTrackProps = {\n    expandedCoordinates: GenomicRange;\n    genes: TranscriptList[];\n    highlights?: Set<string>;\n    onSettingsClick?: () => void;\n    onHeightChanged?: (x: number) => void;\n    squish?: boolean;\n};\n\nconst EGeneTracks: React.FC<EGeneTrackProps> = props => {\n    const [ settingsMousedOver, setSettingsMousedOver ] = useState(false);\n    const [ height, setHeight ] = useState(60);\n    return (\n        <g>\n            <EmptyTrack\n                height={40}\n                width={1400}\n                text=\"GENCODE genes\"\n                transform=\"\"\n                id=\"\"\n            />\n            { props.squish ? (\n                <SquishTranscriptTrack\n                    transform=\"translate(0,40)\"\n                    rowHeight={20}\n                    width={1400}\n                    domain={props.expandedCoordinates}\n                    id=\"innergencode\"\n                    data={props.genes || []}\n                    onHeightChanged={x => { setHeight(x + 40); props.onHeightChanged && props.onHeightChanged(40 + x); }}\n                    color=\"#880000\"\n                />\n            ) : (\n                <PackTranscriptTrack\n                    transform=\"translate(0,40)\"\n                    rowHeight={20}\n                    width={1400}\n                    domain={props.expandedCoordinates}\n                    id=\"innergencode\"\n                    data={props.genes || []}\n                    onHeightChanged={x => { setHeight(x + 40); props.onHeightChanged && props.onHeightChanged(40 + x); }}\n                    color=\"#880000\"\n                />\n            )}\n            { settingsMousedOver && (\n                <rect width={1400} height={height} transform=\"translate(0,0)\" fill=\"#bf2604\" fillOpacity={0.1} />\n            )}\n            <rect\n                transform=\"translate(0,0)\"\n                height={height}\n                width={40}\n                fill=\"#ffffff\"\n            />\n            <rect\n                height={height}\n                width={15}\n                fill=\"#bf2604\"\n                stroke=\"#000000\"\n                fillOpacity={settingsMousedOver ? 1 : 0.6}\n                onMouseOver={() => setSettingsMousedOver(true)}\n                onMouseOut={() => setSettingsMousedOver(false)}\n                strokeWidth={1}\n                transform=\"translate(20,0)\"\n                onClick={props.onSettingsClick}\n            />\n            <text transform={`rotate(270) translate(-${height / 2 + 20},12)`} fill=\"#bf2604\">\n                Genes\n            </text>\n        </g>\n    );\n}\nexport default EGeneTracks;\n","import { ApolloCache, ApolloClient, gql, InMemoryCache, useQuery } from \"@apollo/client\";\nimport { useMemo } from \"react\";\n\nexport type BiosampleEntry = {\n    dnase?: string | null;\n    h3k4me3?: string | null;\n    h3k27ac?: string | null;\n    ctcf?: string | null;\n    name: string;\n    lifeStage: string;\n    ontology: string;\n    sampleType: string;\n};\n\nconst BIOSAMPLE_QUERY = gql`\nquery {\n    ccREBiosampleQuery(assembly: \"grch38\") {\n      biosamples {\n        dnase: experimentAccession(assay: \"dnase\")\n        h3k4me3: experimentAccession(assay: \"h3k4me3\")\n        h3k27ac: experimentAccession(assay: \"h3k27ac\")\n        ctcf: experimentAccession(assay: \"ctcf\")\n        name\n        lifeStage\n        ontology\n        sampleType\n      }\n    }\n}`;\n\nexport type CCREInformation = {\n    rDHS: string;\n    accession: string;\n    group: string;\n    coordinates: {\n        chromosome: string;\n        start: number;\n        end: number;\n    };\n    zScores: {\n        experiment: string;\n        score: number;\n    }[];\n};\n\nconst CCRE_QUERY = gql`\nquery q($rDHS: [String!]) {\n    cCREQuery(rDHS: $rDHS, assembly: \"grch38\") {\n      rDHS\n      accession\n      group\n      coordinates {\n        chromosome\n        start\n        end\n      }\n      zScores {\n        experiment\n        score\n      }\n    }\n}`;\n\nexport function useBiosamples() {\n    const client = useMemo( () => new ApolloClient({\n        uri: \"https://psychscreen.api.wenglab.org/graphql\",\n        cache: new InMemoryCache()\n    }), []);\n    return useQuery<{ ccREBiosampleQuery: { biosamples: BiosampleEntry[] } }>(BIOSAMPLE_QUERY, { client });\n};\n\nexport function useCCREInformation(rDHSAccession: string) {\n    const client = useMemo( () => new ApolloClient({\n        uri: \"https://psychscreen.api.wenglab.org/graphql\",\n        cache: new InMemoryCache()\n    }), []);\n    const { data, loading } = useQuery<{ cCREQuery: CCREInformation[] }>(CCRE_QUERY, { variables: { rDHS: rDHSAccession }, client });\n    const r = useMemo( () => data?.cCREQuery[0] && ({\n        ...data?.cCREQuery[0],\n        zScores: new Map<string, number>(data?.cCREQuery[0].zScores.map(x => [ x.experiment, x.score ]) || [])\n    }), [ data ]);\n    return { data: r, loading };\n}\n","import React, { useMemo } from 'react';\nimport { Loader } from 'semantic-ui-react';\nimport { useBiosamples, useCCREInformation } from './hooks';\n\ntype CCRETooltipProps = {\n    start: number;\n    end: number;\n    name?: string;\n    assembly?: string;\n};\n\nexport const COLORS: Map<string, string> = new Map([\n    [ \"PLS\", \"#ff0000\" ],\n    [ \"pELS\", \"#ffa700\" ],\n    [ \"dELS\", \"#ffcd00\" ],\n    [ \"DNase-H3K4me3\", \"#ffaaaa\" ],\n    [ \"CTCF-only\", \"#00b0f0\" ]\n]);\n\nexport const GROUPS: Map<string, string> = new Map([\n    [ \"PLS\", \"promoter-like\" ],\n    [ \"pELS\", \"proximal enhancer-like\" ],\n    [ \"dELS\", \"distal enhancer-like\" ],\n    [ \"DNase-H3K4me3\", \"DNase-H3K4me3\" ],\n    [ \"CTCF-only\", \"CTCF-only\" ]\n]);\n\nconst MARKS = [ \"DNase\", \"H3K4me3\", \"H3K27ac\", \"CTCF\" ];\n\nfunction useBrainBiosamples() {\n    const { data, loading } = useBiosamples();\n    const brainBiosamples = useMemo( () => (\n        data?.ccREBiosampleQuery.biosamples\n            .filter(x => x.ontology.toLocaleLowerCase().includes(\"brain\"))\n    ), [ data ]);\n    return {\n        loading,\n        data: brainBiosamples ? {\n            dnase: new Set(brainBiosamples?.filter(x => x.dnase).map(x => x.dnase!)),\n            h3k4me3: new Set(brainBiosamples?.filter(x => x.h3k4me3).map(x => x.h3k4me3!)),\n            h3k27ac: new Set(brainBiosamples?.filter(x => x.h3k27ac).map(x => x.h3k27ac!)),\n            ctcf: new Set(brainBiosamples?.filter(x => x.ctcf).map(x => x.ctcf!))\n        } : null\n    };\n}\n\nconst CCRETooltip: React.FC<CCRETooltipProps> = props => {\n    \n    const { data, loading } = useCCREInformation(props.name || \"\");\n    const { data: biosamples, loading: biosamplesLoading } = useBrainBiosamples();\n    const maxZ = useMemo( () => data && biosamples && {\n        DNase: Math.max(...[ ...biosamples.dnase ].map(x => data.zScores.get(x) || -10)),\n        H3K4me3: Math.max(...[ ...biosamples.h3k4me3 ].map(x => data.zScores.get(x) || -10)),\n        H3K27ac: Math.max(...[ ...biosamples.h3k27ac ].map(x => data.zScores.get(x) || -10)),\n        CTCF: Math.max(...[ ...biosamples.ctcf ].map(x => data.zScores.get(x) || -10))\n    }, [ data, biosamples ]);\n\n    return (\n        <div style={{ border: \"1px solid\", padding: \"0.75em\", background: \"#ffffff\" }}>\n            { loading || !data?.accession ? <Loader active /> : (\n                <>\n                    <svg height={18}>\n                        <rect width={10} height={10} y={3} fill={COLORS.get(data.group || \"\") || \"#06da93\" } />\n                        <text x={16} y={12}>{props.name} ⸱ {GROUPS.get(data.group || \"\")}</text>\n                    </svg>\n                    Click for details about this cCRE<br /><br />\n                    <strong>Max Z-scores in brain:</strong><br />\n                    { maxZ && [ \"DNase\", \"H3K4me3\", \"H3K27ac\", \"CTCF\" ].map( (x, i) => (\n                        <React.Fragment key={i}>\n                            <strong>{x}</strong>: {maxZ && maxZ[x]?.toFixed(2)}<br />\n                        </React.Fragment>\n                    ))}\n                </>\n            )}\n        </div>\n    );\n\n};\nexport default CCRETooltip;\n","import React, { useCallback, useState } from 'react';\nimport { Modal, Accordion, Box } from '@material-ui/core';\nimport { Typography, Button } from '@zscreen/psychscreen-ui-components';\nimport { AccordionDetails, AccordionSummary, Checkbox, FormControlLabel, FormGroup, Grid } from '@mui/material';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\n\ntype EpigeneticTrackModalProps = {\n    open?: boolean;\n    onAccept?: (tracks: [ string, string ][]) => void;\n    onCancel?: () => void;\n    initialSelection: [ string, string ][];\n};\n\nconst style = {\n    position: 'absolute' as 'absolute',\n    top: '25%',\n    left: '50%',\n    transform: 'translate(-50%, -15%)',\n    width: \"50%\",\n    bgcolor: 'background.paper',\n    backgroundColor: \"#ffffff\",\n    border: '2px solid #000',\n    p: 4,\n    padding: \"2em\",\n    borderRadius: \"20px\"\n};\n\nconst TRACKS = {\n    \"Candidate cis-Regulatory Elements\": [\n        [ \"Adult brain bCREs\", \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/adult_bCREs.bigBed\" ],\n        [ \"Fetal brain bCREs\", \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/fetal_bCREs.bigBed\" ],\n        [ \"ENCODE cCREs, all tissues\", \"gs://gcp.wenglab.org/GRCh38-cCREs.V4.bigBed\" ]\n    ],\n    \"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\": [\n        [ \"all brain regions, aggregated\", \"all\", \"-ATAC\" ],\n        [ \"dorsolateral prefrontal cortex\", \"DLPFC\", \"-healthy-ATAC\" ],\n        [ \"frontopolar prefrontal cortex\", \"FPPFC\", \"-healthy-ATAC\" ],\n        [ \"hippocampus\", \"HIPP\", \"-healthy-ATAC\" ],\n        [ \"insular cortex\", \"INS\", \"-healthy-ATAC\" ],\n        [ \"inferior temporal gyrus\", \"ITC\", \"-healthy-ATAC\" ],\n        [ \"mediodorsal thalamic nucleus\", \"MDT\", \"-healthy-ATAC\" ],\n        [ \"medial orbital frontal cortex\", \"MOFC\", \"-healthy-ATAC\" ],\n        [ \"nucleus accumbens\", \"NA\", \"-healthy-ATAC\" ],\n        [ \"premotor cortex\", \"PMC\", \"-healthy-ATAC\" ],\n        [ \"posterior superior temporal cortex\", \"PMC\", \"-healthy-ATAC\" ],\n        [ \"putamen\", \"PTM\", \"-healthy-ATAC\" ],\n        [ \"primary visual cortex\", \"PVC\", \"-healthy-ATAC\" ],\n        [ \"ventrolateral prefrontal cortex\", \"VLPFC\", \"-healthy-ATAC\" ],\n    ],\n    \"PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq\": [\n        [ \"healthy donors\", \"DLPFC-mixed-Norm-ATAC.bigWig\" ],\n        [ \"bipolar donors\", \"DLPFC-mixed-BD-ATAC.bigWig\" ],\n        [ \"schizophrenia donors\", \"DLPFC-mixed-SCZ-ATAC.bigWig\" ]\n    ],\n    \"Single cell ATAC-seq pseudobulk\": [\n        [ \"child/adult layer 4 neuron, RORβ+\", \"C1_ChildAdult_Neuron_L4-RORB.bigWig\" ],\n        [ \"infant (1 month old) astrocyte\", \"C2_Infant-1Month_Astrocyte_Astrocyte.bigWig\" ],\n        [ \"infant (6 month old) astrocyte\", \"C3_Infant-6Month_Astrocyte_Astrocyte.bigWig\" ],\n        [ \"child/adult astrocyte (cluster 1)\", \"C4_ChildAdult_Astrocyte_Astrocyte.bigWig\" ],\n        [ \"child/adult astrocyte (cluster 2)\", \"C5_ChildAdult_Astrocyte_Astrocyte.bigWig\" ],\n        [ \"child/adult astrocyte (cluster 3)\", \"C6_Child_Astrocyte_Astrocyte.bigWig\" ],\n        [ \"infant (10 month old) astrocyte\", \"C7_Infant-10Month_Astrocyte_Astrocyte.bigWig\"],\n        [ \"child/adult neuron, ID2+ (cluster 1)\", \"C8_ChildAdult_Neuron_IN-ID2.bigWig\" ],\n        [ \"child/adult neuron, ID2+ (cluster 2)\", \"C9_ChildAdult_Neuron_IN-ID2.bigWig\" ],\n        [ \"child/adult neuron, ID2+ (cluster 2)\", \"C9_ChildAdult_Neuron_IN-ID2.bigWig\" ],\n        [ \"infant (1 month old) neuron, TLE4+\", \"C10_Infant-1Month_Neuron_TLE4.bigWig\" ],\n        [ \"infant (3 month old) neuron, layer 2-3 CUX2+\", \"C11_Infant-3Month_Neuron_L2-3-CUX2.bigWig\" ],\n        [ \"fetal (22 week) neuron, THEMIS+\", \"C12_Fetal-GA22_Neuron_Fetal-THEMIS.bigWig\" ],\n        [ \"child inhibitory neuron, SST+\", \"C13_Child_Neuron_IN-SST.bigWig\" ],\n        [ \"child/adult inhibitory neuron, SST+\", \"C14_ChildAdult_Neuron_IN-SST.bigWig\" ],\n        [ \"child neuron, layer 2/3, CUX2+\", \"C15_Child_Neuron_L2-3-CUX2.bigWig\" ],\n        [ \"child/adult neuron, layer 2/3, CUX2+\", \"C16_ChildAdult_Neuron_L2-3-CUX2.bigWig\" ],\n        [ \"fetal (24 week) neuron, CUX2+\", \"C17_Fetal-GA24_Neuron_Fetal-CUX2.bigWig\" ],\n        [ \"infant (10 month old) developing neuron\", \"C18_Infant-10Month_Neuron_Developing.bigWig\" ],\n        [ \"child/adult oligodendrocyte (cluster 1)\", \"C20_ChildAdult_ODC_ODC.bigWig\" ],\n        [ \"child/adult oligodendrocyte (cluster 2)\", \"C21_ChildAdult_ODC_ODC.bigWig\" ],\n        [ \"infant (6 month old) oligodendrocyte precursor\", \"C22_Infant-6Month_OPC_OPC.bigWig\" ],\n        [ \"child oligodendrocyte precursor\", \"C23_Child_OPC_OPC.bigWig\" ],\n        [ \"child/adult oligodendrocyte precursor\", \"C24_ChildAdult_OPC_OPC.bigWig\" ]\n    ]\n};\n\nconst EpigeneticTrackModal: React.FC<EpigeneticTrackModalProps> = props => {\n    const [ expanded, setExpanded ] = useState(new Map(Object.keys(TRACKS).map(k => [ k, false ])));\n    const [ selectedTracks, setSelectedTracks ] = useState(props.initialSelection.map(x => x[0]));\n    const toggleTrack = useCallback( (track: string[]) => {\n        const selected = !!selectedTracks.find(x => x === track[0])?.length;\n        if (!selected) setSelectedTracks([ ...selectedTracks, track[0] ]);\n        else setSelectedTracks(selectedTracks.filter(x => x !== track[0]));\n    }, [ selectedTracks ]);\n    const expand = useCallback((key: string) => setExpanded(new Map(Object.keys(TRACKS).map(k => [ k, k === key ? !expanded.get(k) : !!expanded.get(k) ]))), [ expanded ]);\n\n    const onAccept = useCallback( () => props.onAccept && props.onAccept([\n        ...TRACKS[\"Candidate cis-Regulatory Elements\"].filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0),\n        ...TRACKS[\"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\"]\n            .filter(track => (selectedTracks.find(x => x === track[0] + \" NeuN+\")?.length || 0) > 0)\n            .map(track => [ track[0] + \" NeuN+\", `gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/${track[1]}-NeuN+${track[2]}.bigWig` ]),\n        ...TRACKS[\"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\"]\n            .filter(track => (selectedTracks.find(x => x === track[0] + \" NeuN-\")?.length || 0) > 0)\n            .map(track => [ track[0] + \" NeuN-\", `gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/${track[1]}-NeuN-${track[2]}.bigWig` ]),\n        ...TRACKS[\"PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq\"]\n            .filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0)\n            .map(track => [ track[0], `gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/${track[1]}` ]),\n        ...TRACKS[\"Single cell ATAC-seq pseudobulk\"]\n            .filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0)\n            .map(track => [ track[0], `gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/${track[1]}` ])\n    ] as [ string, string ][]), [ selectedTracks ]);\n\n    return (\n        <Modal\n            open={!!props.open}\n            onClose={props.onCancel}\n            aria-labelledby=\"modal-modal-title\"\n            aria-describedby=\"modal-modal-description\"\n        >\n            <Box sx={style} style={style}>\n                <Typography type='headline' size='medium' style={{ marginBottom: \"0.6em\" }}>\n                    Select Epigenetic Tracks for Display\n                </Typography>\n                <Accordion expanded={expanded.get(\"Candidate cis-Regulatory Elements\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"Candidate cis-Regulatory Elements\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">Candidate cis-Regulatory Elements</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"Candidate cis-Regulatory Elements\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <Accordion expanded={expanded.get(\"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails style={{ overflowY: 'scroll', maxHeight: \"300px\" }}>\n                        { TRACKS[\"PsychENCODE neuron/non-neuron FANS-sorted ATAC-seq (healthy donors)\"].map(track => (\n                            <Grid container key={track[0]}>\n                                <Grid item xs={4}>\n                                    <Typography display=\"inline\" style={{ marginRight: \"4em\" }} size=\"large\" type=\"body\">{track[0]}</Typography>\n                                </Grid>\n                                <Grid item xs={3}>\n                                    <FormControlLabel\n                                        key={track[0]}\n                                        control={<Checkbox checked={(selectedTracks.find(x => x === track[0] + \" NeuN+\")?.length || 0) > 0} />}\n                                        label=\"NeuN+\"\n                                        onChange={() => toggleTrack([ track[0] + \" NeuN+\", ...track.slice(1) ])}\n                                    />\n                                </Grid>\n                                <Grid item xs={3}>\n                                    <FormControlLabel\n                                        key={track[0]}\n                                        control={<Checkbox checked={(selectedTracks.find(x => x === track[0] + \" NeuN-\")?.length || 0) > 0} />}\n                                        label=\"NeuN-\"\n                                        onChange={() => toggleTrack([ track[0] + \" NeuN-\", ...track.slice(1) ])}\n                                    />\n                                </Grid>\n                                <Grid item xs={2} />\n                            </Grid>\n                        ))}\n                    </AccordionDetails>\n                </Accordion>\n                <Accordion expanded={expanded.get(\"PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"PsychENCODE SCZ/BP/healthy DLPFC ATAC-seq\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <Accordion expanded={expanded.get(\"Single cell ATAC-seq pseudobulk\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"Single cell ATAC-seq pseudobulk\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">Single cell ATAC-seq pseudobulk</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails style={{ overflowY: \"scroll\", maxHeight: \"200px\" }}>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"Single cell ATAC-seq pseudobulk\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <div style={{ marginTop: \"1em\", width: \"100%\", textAlign: \"right\" }}>\n                    <Button bvariant='outlined' btheme='light' onClick={onAccept}>OK</Button>&nbsp;\n                    <Button\n                        bvariant='outlined'\n                        btheme='light'\n                        onClick={() => { props.onCancel && props.onCancel(); setSelectedTracks(props.initialSelection.map(x => x[0])); }}\n                    >\n                        cancel\n                    </Button>\n                </div>\n            </Box>\n        </Modal>\n    );\n};\nexport default EpigeneticTrackModal;\n","import { gql, useQuery } from '@apollo/client';\nimport { BigWigData, BigBedData, BigZoomData } from \"bigwig-reader\";\nimport React, { RefObject, useEffect, useMemo, useState } from 'react';\nimport { DenseBigBed, EmptyTrack, FullBigWig } from 'umms-gb';\nimport { BigRequest, RequestError } from 'umms-gb/dist/components/tracks/trackset/types';\nimport { ValuedPoint } from 'umms-gb/dist/utils/types';\nimport CCRETooltip from '../web/cCREDetails/CCRETooltip';\nimport { EpigeneticTracksModal } from './SettingsModals';\n\nexport const DEFAULT_TRACKS = (assembly: string): Map<string, { url: string }> => new Map([\n    [ \"adult bCREs\", { url: \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/adult_bCREs.bigBed\" } ],\n    [ \"PsychSCREEN aggregated NeuN+ ATAC-seq\", { url: \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/all-NeuN+-ATAC.bigWig\" } ],\n    [ \"PsychSCREEN aggregated NeuN- ATAC-seq\", { url: \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/all-NeuN--ATAC.bigWig\" } ],\n    [ \"PsychSCREEN aggregated non-sorted ATAC-seq\", { url: \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/all-mixed-ATAC.bigWig\" } ],\n    [ \"motifs\", { url: \"gs://gcp.wenglab.org/all-conserved-motifs.merged.bigBed\" } ]\n]);\n\nexport const TRACK_ORDER = [ \"adult bCREs\", \"PsychSCREEN aggregated NeuN+ ATAC-seq\", \"PsychSCREEN aggregated NeuN- ATAC-seq\", \"PsychSCREEN aggregated non-sorted ATAC-seq\", \"motifs\" ];\n\nexport const COLOR_MAP: Map<string, string> = new Map([\n    [ \"PsychSCREEN aggregated NeuN+ ATAC-seq\", \"#0d825d\" ],\n    [ \"PsychSCREEN aggregated NeuN- ATAC-seq\", \"#164182\" ],\n    [ \"PsychSCREEN aggregated non-sorted ATAC-seq\", \"#1c8099\" ],\n]);\n\nexport const tracks = (assembly: string, pos: GenomicRange) => TRACK_ORDER.map(x => ({ chr1: pos.chromosome!, start: pos.start, end: pos.end, ...DEFAULT_TRACKS(assembly).get(x)!, preRenderedWidth: 1400 }));\n\nexport const BIG_QUERY = gql`\nquery BigRequests($bigRequests: [BigRequest!]!) {\n    bigRequests(requests: $bigRequests) {\n        data\n        error {\n            errortype,\n            message\n        }\n    }\n}\n`;\n\ntype GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n};\n\nexport type BigResponseData = BigWigData[] | BigBedData[] | BigZoomData[] | ValuedPoint[];\n\nexport type BigResponse = {\n    data: BigResponseData;\n    error: RequestError;\n}\n\nexport type BigQueryResponse = {\n    bigRequests: BigResponse[];\n};\n\ntype EpigeneticTrackProps = {\n    tracks: BigRequest[];\n    domain: GenomicRange;\n    onHeightChanged?: (i: number) => void;\n    cCREHighlight?: GenomicRange;\n    cCREHighlights?: Set<string>;\n    svgRef?: RefObject<SVGSVGElement>;\n    assembly: string;\n    oncCREClicked?: (accession: string) => void;\n    oncCREMousedOver?: (coordinates?: GenomicRange) => void;\n    oncCREMousedOut?: () => void;\n    onSettingsClick?: () => void;\n};\n\nconst TitledTrack: React.FC<{ data: BigResponseData, url: string, title: string, color?: string, height: number, transform?: string, onHeightChanged?: (height: number) => void, domain: GenomicRange, svgRef?: React.RefObject<SVGSVGElement> }>\n    = ({ data, url, title, height, domain, transform, onHeightChanged, svgRef, color }) => {\n        useEffect( () => onHeightChanged && onHeightChanged(height + 40), [ height, onHeightChanged ]);\n        return (\n            <g transform={transform}>\n                <EmptyTrack\n                    height={40}\n                    width={1400}\n                    transform=\"translate(0,8)\"\n                    id=\"\"\n                    text={title}\n                />\n                { url.endsWith(\".bigBed\") ? (\n                    <DenseBigBed\n                        width={1400}\n                        height={height}\n                        domain={domain}\n                        id=\"adult-bCREs\"\n                        transform=\"translate(0,40)\"\n                        data={data as BigBedData[]}\n                        svgRef={svgRef}\n                        tooltipContent={rect => <CCRETooltip { ...rect} assembly=\"grch38\" />}\n                    />\n                ) : (\n                    <FullBigWig\n                        transform=\"translate(0,40)\"\n                        width={1400}\n                        height={height}\n                        domain={domain}\n                        id=\"NeuN+\"\n                        color={color}   \n                        data={data as BigWigData[]}\n                        noTransparency\n                    />\n                )}\n            </g>\n        );\n};\n\nconst EpigeneticTracks: React.FC<EpigeneticTrackProps> = props => {\n    \n    const [ cTracks, setTracks ] = useState<[ string, string ][]>([\n        [ \"Adult brain bCREs\", \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/adult_bCREs.bigBed\" ],\n        [ \"all brain regions, aggregated NeuN+\", \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/ACC-NeuN+-healthy-ATAC.bigWig\" ],\n        [ \"all brain regions, aggregated NeuN-\", \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/ACC-NeuN--healthy-ATAC.bigWig\" ]\n    ]);\n    const height = useMemo( () => cTracks.length * 80, [ cTracks, props.domain ]);\n    const bigRequests = useMemo( () => cTracks.map(x => ({\n        chr1: props.domain.chromosome!,\n        start: props.domain.start,\n        end: props.domain.end,\n        preRenderedWidth: 1400,\n        url: x[1]\n    })), [ cTracks, props ]);\n    const { data, loading } = useQuery<BigQueryResponse>(BIG_QUERY, { variables: { bigRequests }});\n    useEffect( () => { props.onHeightChanged && props.onHeightChanged(height); }, [ props.onHeightChanged, height, props ]);\n\n    const [ settingsMousedOver, setSettingsMousedOver ] = useState(false);\n    const [ settingsModalShown, setSettingsModalShown ] = useState(false);\n\n    return loading || (data?.bigRequests.length || 0) < 2 ? <EmptyTrack width={1400} height={40} transform=\"\" id=\"\" text=\"Loading...\" /> : (\n        <>\n            <EpigeneticTracksModal\n                open={settingsModalShown}\n                onCancel={() => setSettingsModalShown(false)}\n                onAccept={x => { setTracks(x); setSettingsModalShown(false); }}\n                initialSelection={cTracks}\n            />\n            <g className=\"encode-fetal-brain\">\n                <rect y={10} height={55} fill=\"none\" width={1400} /> \n            </g>\n            { (data?.bigRequests || []).map( (data, i) => (\n                <TitledTrack\n                    height={40}\n                    url={cTracks[i][1]}\n                    domain={props.domain}\n                    title={cTracks[i][0]}\n                    svgRef={props.svgRef}\n                    data={data.data}\n                    transform={`translate(0,${i * 70})`}\n                />\n            ))}\n            <g className=\"tf-motifs\">\n                <rect y={110} height={55} fill=\"none\" width={1400} /> \n            </g>\n            { settingsMousedOver && (\n                <rect width={1400} height={height} transform=\"translate(0,-0)\" fill=\"#4c1f8f\" fillOpacity={0.1} />\n            )}\n            <rect\n                transform=\"translate(0,0)\"\n                height={height}\n                width={40}\n                fill=\"#ffffff\"\n            />\n            <rect\n                height={height}\n                width={15}\n                fill=\"#4c1f8f\"\n                stroke=\"#000000\"\n                fillOpacity={settingsMousedOver ? 1 : 0.6}\n                onMouseOver={() => setSettingsMousedOver(true)}\n                onMouseOut={() => setSettingsMousedOver(false)}\n                strokeWidth={1}\n                transform=\"translate(20,0)\"\n                onClick={() => {props.onSettingsClick && props.onSettingsClick(); setSettingsModalShown(true); }}\n            />\n            <text transform={`rotate(270) translate(-${height / 2},12)`} textAnchor=\"middle\" fill=\"#4c1f8f\">\n                Regulatory Features\n            </text>\n        </>\n    );\n}\nexport default EpigeneticTracks;\n","import React, {useMemo}  from 'react';\nimport { gql, useQuery } from '@apollo/client';\nimport { associateBy } from 'queryz';\nimport { CustomizedTable, Typography } from '@zscreen/psychscreen-ui-components';\nimport { CircularProgress } from '@material-ui/core';\n\nexport type GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}\n\nexport type CCREEntry = {\n    accession: string;\n    coordinates: GenomicRange;\n    rDHS: string;\n    group?: string;\n    dnaseZ?: number;\n    h3k4me3Z?: number;\n    h3k27acZ?: number;\n    ctcfZ?: number;\n    zScores?: {\n        score: number;\n    }[];\n};\n\n\nexport type LDEntry = {\n    id: string;\n    rSquared: number;\n    coordinates: GenomicRange;\n};\n\nexport function expandCoordinates(coordinates: GenomicRange, l = 20000): GenomicRange {\n    return {\n        chromosome: coordinates.chromosome,\n        start: coordinates.start - l < 0 ? 0 : coordinates.start - l,\n        end: coordinates.end + l\n    };\n}\n\n\nexport const CCRE_FIELDS = gql`\nfragment CCREFields on CCRE {\n    accession\n    coordinates {\n        chromosome\n        start\n        end\n    }\n    rDHS\n    group\n    dnaseZ: maxZ(assay: \"dnase\")\n    h3k4me3Z: maxZ(assay: \"h3k4me3\")\n    h3k27acZ: maxZ(assay: \"h3k27ac\")\n    ctcfZ: maxZ(assay: \"ctcf\")\n}\n`;\n\nconst SNP_COORDINATE_QUERY = gql`\n${CCRE_FIELDS}\nquery s($id: [String]) {\n  snpQuery(assembly: \"hg38\", snpids: $id) {\n    coordinates {\n        chromosome\n        start\n        end\n    }\n    id\n    intersecting_ccres {\n      intersecting_ccres {\n        ...CCREFields\n      }\n    }\n  }\n}`;\n\nexport type QTLEntry = {\n    coordinates: {\n        chromosome: string;\n        start: number;\n        end: number;\n    };\n    id: string;\n    intersecting_ccres: {\n        intersecting_ccres: CCREEntry[];\n    };\n    eQTL: EQTL;\n};\n\nexport type SNPCoordinateResponse = {\n    snpQuery: QTLEntry[];\n};\n\nconst SNP_QUERY = gql`\nquery s($chromosome: String, $start: Int, $end: Int, $coordinates: [GenomicRangeInput], $assembly: String!) {\n  snpQuery(assembly: \"hg38\", coordinates: $coordinates, common: true) {\n    id\n    coordinates {\n      chromosome\n      start\n      end\n    }\n  }\n  gene(chromosome: $chromosome, start: $start, end: $end, assembly: $assembly) {\n    name\n    strand\n    transcripts {\n      name\n      strand\n      exons {\n          coordinates {\n              chromosome\n              start\n              end\n          }\n      }\n      coordinates {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n}\n`;\n\nexport type Transcript = {\n    id: string;\n    name: string;\n    strand: string;\n    coordinates: GenomicRange;\n};\nexport type SNPQueryResponse = {\n    snpQuery: {\n        id: string;\n        coordinates: GenomicRange;\n    }[];\n    gene: {\n        name: string;\n        strand: string;\n        transcripts: Transcript[];\n    }[];\n};\n\nconst QUERY = gql`\n${CCRE_FIELDS}\nquery q($assembly: String!, $name: [String]) {\n  queriedGene: gene(name: $name, assembly: $assembly) {\n    transcripts {\n      associated_ccres_pls {\n        intersecting_ccres {\n          ...CCREFields\n        }\n      }\n    }\n    fetal_eqtls(population: \"shared\") {\n      eqtls {\n        snp\n        fdr\n        nominal_pval\n        slope\n      }\n    }\n  }\n  queriedTranscript: transcript(name: $name, assembly: $assembly) {\n    associated_ccres_pls {\n      intersecting_ccres {\n        ...CCREFields\n      }\n    }\n    fetal_isoqtls(population: \"shared\") {\n      isoqtls {\n        snp\n        fdr\n        nominal_pval\n        slope\n      }\n    }\n  }\n}\n`;\n\nexport type EQTL = {\n    snp: string;\n    fdr: number;\n    nominal_pval: number;\n    slope: number;\n};\n\nexport type GeneQueryResponse = {\n    queriedGene: {\n        transcripts: {\n            associated_ccres_pls: {\n                intersecting_ccres: CCREEntry[];\n            };\n        }[];\n        fetal_eqtls: {\n            eqtls: EQTL[];\n        };\n    }[];\n    queriedTranscript: {\n        associated_ccres_pls: {\n            intersecting_ccres: CCREEntry[];\n        };\n        fetal_isoqtls: {\n            isoqtls: {\n                snp: string;\n                fdr: number;\n                nominal_pval: number;\n                slope: number;\n            }[];\n        };\n    }[];\n};\n\nexport function useGenePageData(expandedCoordinates: GenomicRange, assembly: string, name: string, resolvedTranscript?: boolean) {\n\n    const { data, loading } = useQuery<GeneQueryResponse>(QUERY, {\n        variables: {\n            coordinates: expandedCoordinates,\n            ...expandedCoordinates,\n            assembly,\n            name\n        }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t}\n    });\n\n    const snpCoordinateResponse = useQuery<SNPCoordinateResponse>(SNP_COORDINATE_QUERY, {\n        variables: {\n            id: [\n                ...(data?.queriedGene[0]?.fetal_eqtls.eqtls.map(x => x.snp) || []),\n                ...(data?.queriedTranscript[0]?.fetal_isoqtls.isoqtls.map(x => x.snp) || [])\n            ]\n        }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t},\n        skip: loading\n    });\n    \n    const coordinates = useMemo( () => expandCoordinates(/* {\n        chromosome: snpCoordinateResponse.data?.snpQuery[0]?.coordinates.chromosome || \"\",\n        start: Math.min(...(snpCoordinateResponse.data?.snpQuery.map(x => x.coordinates.start) || [0])),\n        end: Math.max(...(snpCoordinateResponse.data?.snpQuery.map(x => x.coordinates.end) || [0]))\n    }*/ expandedCoordinates, 100000), [ expandedCoordinates ]);\n\n    const snpResponse = useQuery<SNPQueryResponse>(SNP_QUERY, {\n        variables: { ...coordinates, coordinates, assembly },\n        skip: loading || snpCoordinateResponse.loading\n    });\n\n    const groupedTranscripts = useMemo( () => snpResponse.data?.gene.map(\n        x => ({\n            ...x,\n            transcripts: x.transcripts.map(xx => ({ ...xx, color: (resolvedTranscript ? xx : x).name === name ? \"#880000\" : \"#aaaaaa\" }))\n        })\n    ), [ resolvedTranscript, name, snpResponse ]);\n\n    return {\n        data: { ...snpResponse.data, ...data },\n        loading: loading || snpCoordinateResponse.loading || snpResponse.loading,\n        snpData: snpResponse.data,\n        snpCoordinateData: snpCoordinateResponse.data,\n        groupedTranscripts,\n        expandedCoordinates: coordinates\n    };\n\n}\n\n\n\nconst AssociatedxQTL: React.FC<any> = (props) => { \n\n    const eexpandedCoordinates = useMemo( () => expandCoordinates(props.coordinates), [ props.coordinates ]);\n    \n    const { data, loading, snpCoordinateData } = useGenePageData(\n        eexpandedCoordinates,\n        \"GRCh38\" || \"\",\n        props.name,\n        props.resolvedTranscript\n    );\n    const groupedQTLs = useMemo( () => associateBy((data?.queriedGene && data.queriedGene[0]?.fetal_eqtls.eqtls) || [], x => x.snp, x => x), [ data ]);\n\n    const allQTLs = useMemo( () => (\n        snpCoordinateData?.snpQuery\n            .map(x => ({ ...x, eQTL: groupedQTLs.get(x.id)! }))\n            .sort((a, b) => a.eQTL.fdr - b.eQTL.fdr)\n    ) || [], [ snpCoordinateData, groupedQTLs ]);\n    \n    const allQTLsData =allQTLs && allQTLs.map(x=> [{\n        header: \"SNP ID\",\n        value: x.id\n    }, {\n        header: \"eQTL FDR\",\n        value: x.eQTL.fdr.toExponential(2)\n    }, {\n        header: \"eQTL nominal p-value\",\n        value: x.eQTL.nominal_pval.toExponential(2)\n    }, {\n        header: \"coordinates\",\n        value: `${x.coordinates.chromosome}:${x.coordinates.start}`\n    }, {\n        header: \"intersecting cCRE\",\n        value:  x.intersecting_ccres.intersecting_ccres[0]?.accession || \"--\",\n        render:  (\n            <span\n                style={{ color: x.intersecting_ccres.intersecting_ccres[0] ? \"#006edb\" : \"#000000\" }}\n            >\n                {x.intersecting_ccres.intersecting_ccres[0]?.accession || \"--\"}\n            </span>\n        )\n    }]);\n    \n    if (!loading && allQTLsData && allQTLsData.length === 0) return (\n        <Typography type=\"body\" size=\"large\">\n            No eQTLs or linked bCREs were identified for this gene.\n        </Typography>\n    );\n\n    return (\n        <>\n            { loading ? (\n                <CircularProgress />\n            ) : allQTLsData && allQTLsData.length > 0 && (\n                <>\n                    <Typography type=\"headline\" size=\"small\">\n                        {`The following eQTLs have been identified for ${props.name} by PsychENCODE:`}\n                    </Typography>\n                    <CustomizedTable style={{ width: \"max-content\" }} tabledata={allQTLsData} />\n                </>\n            )}\n        </>\n    );\n\n}\n\n\nexport default AssociatedxQTL","import { useQuery } from '@apollo/client';\nimport React, { RefObject, useEffect, useMemo, useState } from 'react';\nimport { BIG_QUERY, BigQueryResponse } from './EpigeneticTracks';\nimport { Header, Loader } from 'semantic-ui-react';\nimport { BigBedData } from 'bigwig-reader';\nimport { ManhattanTrack, ManhattanTrackProps, LDTrack, EmptyTrack } from 'umms-gb';\nimport { ManhattanSNP } from 'umms-gb/dist/components/tracks/manhattan/types';\n\nexport type LDEntry = {\n    id: string;\n    rSquared: number;\n    coordinates: GenomicRange;\n};\n\nexport type EQTL = {\n    snp: string;\n    fdr: number;\n    nominal_pval: number;\n    slope: number;\n};\n\ntype GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}\n\ntype ManhattanPlotTrackProps = {\n    urls: string[];\n    titles: string[];\n    domain: GenomicRange;\n    onHeightChanged?: (height: number) => void;\n    onSNPMousedOver?: (snp: ManhattanSNP) => void;\n    snpProps: (snp: ManhattanSNP, props: ManhattanTrackProps) => React.SVGProps<SVGCircleElement>;\n    className?: string;\n    anchor: string;\n    ld: LDEntry[];\n    groupedQTLs: Map<string, EQTL>;\n    allQTLs: any[];\n    sortOrder?: (a: ManhattanSNP, b: ManhattanSNP) => number;\n    svgRef?: RefObject<SVGSVGElement>;\n    onSettingsClick?: () => void;\n    gene: string;\n};\n\nconst tracks = (urls: string[], pos: GenomicRange) => urls.map(url => ({\n    chr1: pos.chromosome!,\n    start: pos.start,\n    end: pos.end,\n    url\n}));\n\nconst Tooltip: React.FC<ManhattanSNP> = snp => (\n    <div style={{ marginTop: \"-5em\", marginLeft: \"-4em\", background: \"#ffffff\" }}>\n        <Header as=\"h4\">{snp.data.rsId}</Header>\n        {snp.data.score.toExponential(3)}\n    </div>\n);\n\nconst ManhattanPlotTrack: React.FC<ManhattanPlotTrackProps> = props => {\n    const { data, loading } = useQuery<BigQueryResponse>(BIG_QUERY, {\n        variables: { bigRequests: tracks(props.urls, props.domain)}\n    });\n    const inView = useMemo( () => [\n        ...((data?.bigRequests || []).flatMap((x, i) => (\n            ((x?.data || []) as BigBedData[]).map((xx: BigBedData) => ({\n                rsId: xx.name?.split(\"_\")[0] || \"\",\n                [i]: +(xx.name?.split(\"_\")[1] || \"0\"),\n                coordinates: {\n                    start: xx.start,\n                    end: xx.end,\n                    chromosome: xx.chr\n                }\n            }))\n        ))),\n        ...props.allQTLs.map(xx => ({\n            rsId: xx.id,\n            score: 1,\n            coordinates: xx.coordinates\n        }))\n    ], [ data, props.allQTLs ]);\n    const allQTLs = useMemo( () => (\n        inView?.filter(x => props.groupedQTLs.get(x.rsId))\n            .map(x => ({ ...x, eQTL: props.groupedQTLs.get(x.rsId)! }))\n    ) || [], [ inView, props ]);\n    const [ settingsMousedOver, setSettingsMousedOver ] = useState(false);\n    const height = useMemo( () => 220 * props.titles.length + 100, [ props.titles ]);\n    useEffect( () => props.onHeightChanged && props.onHeightChanged(height), [ height, props.onHeightChanged ]);\n    return loading ? <Loader active>Loading...</Loader> : (\n        <g transform=\"translate(0,25)\">\n            { props.titles.map((title, i) => (\n                <g transform={`translate(0,${200 * i})`}>\n                    <EmptyTrack\n                        height={40}\n                        width={1400}\n                        text={`GWAS summary statistics for ${title}`}\n                        transform=\"\"\n                        id=\"\"\n                    />\n                    <ManhattanTrack\n                        height={150}\n                        data={inView.map(v => ({ coordinates: v.coordinates, rsId: v.rsId, score: v[i] || 1 }))}\n                        width={1400}\n                        domain={props.domain}\n                        tooltipContent={Tooltip}\n                        onSNPMousedOver={props.onSNPMousedOver}\n                        snpProps={props.snpProps}\n                        className={props.className}\n                        sortOrder={props.sortOrder}\n                        svgRef={props.svgRef}\n                        transform=\"translate(0,40)\"\n                        threshold={4}\n                        max={12}\n                    />\n                </g>\n            ))}\n            <EmptyTrack\n                height={25}\n                text={props.gene ? `Brain eQTLs for ${props.gene} (red) and other SNPs (black)` : \"SNPs\"}\n                width={1400}\n                transform={`translate(0,${200 * props.urls.length + 30})`}\n                id=\"\"\n            />\n            <LDTrack\n                width={1400}\n                height={50}\n                domain={props.domain}\n                anchor={props.anchor}\n                data={{\n                    snps: [\n                        ...(inView || []).map(x => ({ id: x.rsId, domain: x.coordinates }))\n                    ].sort((a, b) => a.domain.start - b.domain.start), ld: props.ld\n                }}\n                onVariantMouseOver={data => props.onSNPMousedOver && props.onSNPMousedOver({ data: { score: 0, rsId: data.id, coordinates: { chromosome: props.domain.chromosome!, start: data.domain.start, end: data.domain.end } }, x: 0, y: 0 })}\n                ldThreshold={0.1}\n                highlighted={new Set(allQTLs.map(x => x.rsId))}\n                highlightColor=\"#ff0000\"\n                transform={`translate(0,${200 * props.urls.length + 40})`}\n            />\n            { settingsMousedOver && (\n                <rect width={1400} height={height} transform=\"translate(0,-30)\" fill=\"#24529c\" fillOpacity={0.1} />\n            )}\n            <rect\n                transform=\"translate(0,-30)\"\n                height={height}\n                width={40}\n                fill=\"#ffffff\"\n            />\n            <rect\n                height={height}\n                width={15}\n                fill=\"#24529c\"\n                stroke=\"#000000\"\n                fillOpacity={settingsMousedOver ? 1 : 0.6}\n                onMouseOver={() => setSettingsMousedOver(true)}\n                onMouseOut={() => setSettingsMousedOver(false)}\n                strokeWidth={1}\n                transform=\"translate(20,-30)\"\n                onClick={props.onSettingsClick}\n            />\n            <text transform={`rotate(270) translate(-${height / 2},12)`} textAnchor=\"middle\" fill=\"#24529c\">\n                Variants and GWAS\n            </text>\n        </g>\n    );\n};\nexport default ManhattanPlotTrack;\n","import React, { useCallback, useState } from 'react';\nimport { Modal, Accordion, Box } from '@material-ui/core';\nimport { Typography, Button } from '@zscreen/psychscreen-ui-components';\nimport { AccordionDetails, AccordionSummary, Checkbox, FormControlLabel, FormGroup, Grid } from '@mui/material';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport { URL_MAP } from '../../web/Portals/DiseaseTraitPortal/DiseaseTraitPortal';\n\ntype EpigeneticTrackModalProps = {\n    open?: boolean;\n    onAccept?: (tracks: [ string, string ][]) => void;\n    onCancel?: () => void;\n    initialSelection: [ string, string ][];\n};\n\nconst style = {\n    position: 'absolute' as 'absolute',\n    top: '25%',\n    left: '50%',\n    transform: 'translate(-50%, -15%)',\n    width: \"50%\",\n    bgcolor: 'background.paper',\n    backgroundColor: \"#ffffff\",\n    border: '2px solid #000',\n    p: 4,\n    padding: \"2em\",\n    borderRadius: \"20px\"\n};\n\nconst TRACKS = {\n    \"EBI Catalog\": Object.keys(URL_MAP).map(k => [\n        k, `https://downloads.wenglab.org/psychscreen-summary-statistics/${URL_MAP[k]}.bigBed`\n    ])\n};\n\nconst VariantTrackModal: React.FC<EpigeneticTrackModalProps> = props => {\n    const [ expanded, setExpanded ] = useState(new Map(Object.keys(TRACKS).map(k => [ k, false ])));\n    const [ selectedTracks, setSelectedTracks ] = useState(props.initialSelection.map(x => x[0]));\n    const toggleTrack = useCallback( (track: string[]) => {\n        const selected = !!selectedTracks.find(x => x === track[0])?.length;\n        if (!selected) setSelectedTracks([ ...selectedTracks, track[0] ]);\n        else setSelectedTracks(selectedTracks.filter(x => x !== track[0]));\n    }, [ selectedTracks ]);\n    const expand = useCallback((key: string) => setExpanded(new Map(Object.keys(TRACKS).map(k => [ k, k === key ? !expanded.get(k) : !!expanded.get(k) ]))), [ expanded ]);\n\n    const onAccept = useCallback( () => props.onAccept && props.onAccept([\n        ...TRACKS[\"EBI Catalog\"].filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0),\n    ] as [ string, string ][]), [ selectedTracks ]);\n\n    return (\n        <Modal\n            open={!!props.open}\n            onClose={props.onCancel}\n            aria-labelledby=\"modal-modal-title\"\n            aria-describedby=\"modal-modal-description\"\n        >\n            <Box sx={style} style={style}>\n                <Typography type='headline' size='medium' style={{ marginBottom: \"0.6em\" }}>\n                    Select Epigenetic Tracks for Display\n                </Typography>\n                <Accordion expanded={expanded.get(\"EBI Catalog\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"EBI Catalog\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">EBI Catalog</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails style={{ overflowY: \"scroll\", maxHeight: \"200px\" }}>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"EBI Catalog\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <div style={{ marginTop: \"1em\", width: \"100%\", textAlign: \"right\" }}>\n                    <Button bvariant='outlined' btheme='light' onClick={onAccept}>OK</Button>&nbsp;\n                    <Button\n                        bvariant='outlined'\n                        btheme='light'\n                        onClick={() => { props.onCancel && props.onCancel(); setSelectedTracks(props.initialSelection.map(x => x[0])); }}\n                    >\n                        cancel\n                    </Button>\n                </div>\n            </Box>\n        </Modal>\n    );\n};\nexport default VariantTrackModal;\n","import { gql, useApolloClient } from '@apollo/client';\nimport { linearTransform } from 'jubilant-carnival';\nimport { associateBy } from 'queryz';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { SNP } from 'umms-gb/dist/components/tracks/ld/types';\nimport { expandCoordinates, GenomicRange, useGenePageData } from '../web/Portals/GenePortal/AssociatedxQTL';\nimport ManhattanPlotTrack, { LDEntry } from './ManhattanPlotTrack';\nimport VariantTrackModal from './SettingsModals/VariantTracks';\n\nexport const LD_QUERY = gql`\nquery s($id: [String]) {\n  snp: snpQuery(assembly: \"hg38\", snpids: $id) {\n    linkageDisequilibrium(rSquaredThreshold: 0.7, population: EUROPEAN) {\n      id\n      rSquared\n      coordinates(assembly: \"hg38\") {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n}\n`;\n\nexport type LDQueryResponse = {\n    snp: {\n        linkageDisequilibrium: LDEntry[];\n    }[];\n};\n\nconst VariantTracks: React.FC<{ coordinates: GenomicRange, resolvedTranscript?: boolean, name: string, onHeightChanged?: (x: number) => void, url: string, trait: string }> = (props) => {\n    \n    const client = useApolloClient();\n    \n    const eexpandedCoordinates = useMemo( () => expandCoordinates(props.coordinates), [ props.coordinates ]);\n    const { data, snpCoordinateData, expandedCoordinates } = useGenePageData(\n        eexpandedCoordinates,\n        \"GRCh38\" || \"\",\n        props.name,\n        props.resolvedTranscript\n    );\n    const groupedQTLs = useMemo( () => associateBy((data?.queriedGene && data.queriedGene[0]?.fetal_eqtls.eqtls) || [], x => x.snp, x => x), [ data ]);\n    const allQTLs = useMemo( () => (\n        snpCoordinateData?.snpQuery\n            .map(x => ({ ...x, eQTL: groupedQTLs.get(x.id)! }))\n    ) || [], [ snpCoordinateData, groupedQTLs ]);\n\n    const [ ld, setLD ] = useState<{ anchor: string; ld: LDEntry[] }>({ anchor: \"\", ld: [] });\n    const ldSet = useMemo( () => new Map([ ...ld.ld.map(x => [ x.id, x.rSquared ]), [ ld.anchor, 1 ] ] as [ string, number ][]), [ ld ]);\n    const snpMouseOver = useCallback((xx: SNP) => {\n        client.query<LDQueryResponse>({\n            query: LD_QUERY,\n            variables: { id: [ xx.id ] }\n        }).then(x => setLD({ anchor: xx.id, ld: x.data.snp[0]?.linkageDisequilibrium || [] }));\n    }, [ setLD, client ]);\n    const gradient = useCallback(linearTransform({ start: 0.1, end: 1 }, { start: 215, end: 0 }), []);\n\n    const svgRef = useRef<SVGSVGElement>(null);\n\n    const [ urls, setURLs ] = useState([ props.url ]);\n    const [ titles, setTitles ] = useState([ props.trait ]);\n    const [ settingsModalShown, setSettingsModalShown ] = useState(false);\n\n    return (\n        <>\n            <VariantTrackModal\n                onCancel={() => setSettingsModalShown(false)}\n                onAccept={x => { setURLs(x.map(xx => xx[1])); setTitles(x.map(xx => xx[0])); setSettingsModalShown(false); }}\n                initialSelection={titles.map((x, i) => [ x, urls[i] ])}\n                open={settingsModalShown}\n            />\n            <ManhattanPlotTrack\n                urls={urls}\n                titles={titles}\n                domain={props.coordinates || expandedCoordinates}\n                onSNPMousedOver={x => snpMouseOver(({ domain: x.data.coordinates, id: x.data.rsId }))}\n                snpProps={snp => ldSet.has(snp.data.rsId) ? { fill: `rgb(255,${gradient(ldSet.get(snp.data.rsId)!)},0)` } : { fill: \"#dddddd\", fillOpacity: 0.4 }}\n                allQTLs={allQTLs}\n                groupedQTLs={groupedQTLs}\n                anchor={ld.anchor}\n                ld={ld.ld}\n                sortOrder={(a, b) => (ldSet.has(a.data.rsId) ? a.data.score : -a.data.score) - (ldSet.has(b.data.rsId) ? b.data.score : -b.data.score)}\n                svgRef={svgRef}\n                gene={props.name}\n                onSettingsClick={() => setSettingsModalShown(true)}\n                onHeightChanged={(height: number) => props.onHeightChanged && props.onHeightChanged(height)}\n            />\n            <g className=\"xqtl\">\n                <rect y={22} height={65} fill=\"none\" width={1400} /> \n            </g>\n        </>\n    )\n\n};\nexport default VariantTracks;\n","import React, {useMemo, useRef, useState, useCallback}  from 'react';\nimport CytobandView from '../GenePortal/Browser/Explorer/Cytobands';\nimport { GenomeBrowser, RulerTrack, UCSCControls } from 'umms-gb';\nimport EGeneTracks from '../GenePortal/Browser/EGeneTracks';\nimport { EpigeneticTracks, tracks, VariantTracks } from '../../../genome-explorer';\nimport { useGenePageData } from '../GenePortal/AssociatedxQTL';\n\ntype GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n};\n\nconst Browser: React.FC<{ coordinates: GenomicRange, url: string, trait: string }> = (props) => { \n    const svgRef = useRef<SVGSVGElement>(null);\n    const [ coordinates, setCoordinates ] = useState<GenomicRange>(props.coordinates);\n    const [ highlight ] = useState<GenomicRange | null>(null);\n    \n    const epigeneticTracks = useMemo( () => tracks(\"GRCh38\", coordinates as { chromosome: string, start: number, end: number }), [ coordinates ]);\n\n    const onDomainChanged = useCallback(\n        (d: GenomicRange) => {\n            const chr = d.chromosome === undefined ? props.coordinates.chromosome : d.chromosome;\n            setCoordinates({ chromosome: chr, start: Math.round(d.start), end: Math.round(d.end) });\n        },\n        [ props.coordinates ]\n    );\n\n    const { groupedTranscripts } = useGenePageData(\n        coordinates,\n        \"GRCh38\",\n        \"APOE\",\n        false\n    );\n\n    const l = useCallback((c: number) => (c - coordinates.start) * 1400 / (coordinates.end - coordinates.start), [ coordinates ]);\n    return (<>\n        <CytobandView\n            innerWidth={1000}\n            height={15}\n            chromosome={coordinates.chromosome!}\n            assembly=\"hg38\"\n            position={coordinates}\n        /><br />\n        <div style={{ textAlign: \"center\" }}>\n            <UCSCControls onDomainChanged={onDomainChanged} domain={coordinates} withInput={false} />\n        </div>\n        <br />\n        <GenomeBrowser\n            svgRef={svgRef}\n            domain={coordinates}\n            innerWidth={1400}\n            width=\"100%\"\n            noMargin\n            onDomainChanged={x => setCoordinates({ chromosome: coordinates.chromosome, start: Math.floor(x.start), end: Math.ceil(x.end) })}\n        >\n            { highlight && (\n                <rect fill=\"#8ec7d1\" fillOpacity={0.5} height={1000} x={l(highlight.start)} width={l(highlight.end) - l(highlight.start)} />\n            )}\n            <RulerTrack\n                domain={coordinates}\n                height={30}\n                width={1400}\n            />\n            <EGeneTracks\n                genes={groupedTranscripts || []}\n                expandedCoordinates={coordinates}\n                squish\n            />\n            <EpigeneticTracks\n                assembly=\"GRCh38\"\n                tracks={epigeneticTracks}\n                domain={coordinates}\n            />\n            <VariantTracks\n                coordinates={coordinates}\n                resolvedTranscript={false}\n                url={props.url}\n                name=\"\"\n                trait={props.trait}\n            />\n        </GenomeBrowser>\n    </>)\n}\nexport default Browser;\n","\nimport { useParams } from \"react-router-dom\";\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { AppBar } from '@zscreen/psychscreen-ui-components';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Grid, Container, GridProps } from '@mui/material';\nimport { Typography, Button } from '@zscreen/psychscreen-ui-components';\nimport GeneAssociations from \"./GeneAssociations\";\nimport AssociatedSnpQtl, { GWAS_SNP } from \"./AssociatedSnpQtl\";\nimport DiseaseIntersectingSnpsWithccres from \"./DiseaseIntersectingSnpsWithccres\";\nimport { DISEASE_CARDS, URL_MAP } from \"./DiseaseTraitPortal\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport { PORTALS } from \"../../../App\";\nimport { riskLoci } from \"./utils\";\nimport RiskLocusView from \"./RiskLoci\";\nimport { GenomicRange } from \"../GenePortal/AssociatedxQTL\";\nimport Browser from \"./Browser\";\n\nconst AssociatedSnpQuery = gql`\nquery gwassnpAssoQuery(\n    $disease: String!,\n    $snpid: String,\n    $limit: Int,\n    $offset: Int\n) {\n    gwassnpAssociationsQuery(disease: $disease,snpid: $snpid, limit:$limit, offset:$offset) { \n        chrom\n        stop\n        snpid\n        start\n        associated_gene\n        association_p_val\n        analyses_identifying_snp\n        riskallele\n    }\n}\n`;\n\nconst AssociatedGenesQuery = gql`\nquery genesAssoQuery(\n    $disease: String!,\n    $gene_id: String,\n    $limit: Int,\n    $offset: Int\n) {\n    genesAssociationsQuery(disease: $disease,gene_id: $gene_id, limit:$limit, offset:$offset) { \n        hsq\n        twas_p\n        twas_bonferroni\n        dge_log2fc\n        gene_id\n        gene_name\n        disease\n        dge_fdr\n    }\n}\n`;\n\nconst GwasIntersectingSnpswithCcresQuery=gql`\nquery gwasintersectingSnpsWithCcre($disease: String!, $snpid: String, $limit: Int) {\n    gwasintersectingSnpsWithCcreQuery(disease: $disease, snpid: $snpid, limit: $limit){\n        disease\n        snpid\n        snp_chrom \n        snp_start\n        snp_stop\n        riskallele\n        associated_gene\n        association_p_val\n        ccre_chrom\n        ccre_start\n        ccre_stop\n        rdhsid\n        ccreid\n        ccre_class\n\n    }\n}`;\n\nconst GwasIntersectingSnpswithBcresQuery = gql`\nquery gwasintersectingSnpsWithBcre($disease: String!, $snpid: String, $bcre_group: String, $limit: Int) {\n    gwasintersectingSnpsWithBcreQuery(disease: $disease, snpid: $snpid, bcre_group: $bcre_group,limit: $limit){\n        disease\n        snpid\n        snp_chrom \n        snp_start\n        snp_stop\n        riskallele\n        associated_gene\n        association_p_val\n        ccre_chrom\n        ccre_start\n        ccre_stop\n        rdhsid\n        ccreid\n        ccre_class\n        bcre_group\n    }\n}`;\n\nconst DiseaseTraitDetails: React.FC<GridProps> = (props) => {\n    const { disease } = useParams();\n    const navigate = useNavigate();  \n    const [ page, setPage ] = useState<number>(-1);\n    const { state }: any = useLocation();\n    const { searchvalue, diseaseDesc } = state ? state : { searchvalue: '', diseaseDesc: ''};\n    const [ browserCoordinates, setBrowserCoordinates ] = useState<GenomicRange>({ chromosome: \"chr1\", start: 1000000, end: 2000000 });\n    const navigateBrowser = useCallback((coordinates: GenomicRange) => {\n        setBrowserCoordinates(coordinates);\n        setPage(3);\n    }, []);\n    \n    const diseaseLabel = disease && DISEASE_CARDS.find(d => d.val === disease)?.cardLabel;\n    const summaryStatisticsURL = disease ? `https://downloads.wenglab.org/psychscreen-summary-statistics/${URL_MAP[disease]}.bigBed` : \"https://downloads.wenglab.org/psychscreen-summary-statistics/autism.bigBed\";\n    const { data } = useQuery<{ gwassnpAssociationsQuery: GWAS_SNP[] }>(AssociatedSnpQuery, {\t\t\n        variables: {\n            disease: (disease || '')\n        }\n    });\n    const loci = useMemo( () => riskLoci(data?.gwassnpAssociationsQuery.map(x => ({ chromosome: x.chrom, start: x.start, end: x.stop, p: Math.min(...x.association_p_val) })) || []), [ data ]);\n    const { data: genesdata } = useQuery(AssociatedGenesQuery, {\n        variables: {\n            disease: (disease || ''),\n            limit: 1000,\n            skip: disease === ''\n        }\n    });\n    const { data: gwasIntersectingSnpWithCcresData } = useQuery(GwasIntersectingSnpswithCcresQuery, {\n        variables: {\n            disease: disease\n        },\n        skip: disease === ''\n    });\n    const { data: adultgwasIntersectingSnpWithBcresData } = useQuery(GwasIntersectingSnpswithBcresQuery, {\n        variables: {\n            disease: disease,\n            bcre_group: 'adult'\n        },\n        skip: disease === ''\n    });\n    const { data: fetalgwasIntersectingSnpWithBcresData } = useQuery(GwasIntersectingSnpswithBcresQuery, {\n        variables: {\n            disease: disease,\n            bcre_group: 'fetal'\n        },\n        skip: disease === ''\n    });\n\n    return (\n        <>\n            <AppBar\n                centered\n                onDownloadsClicked={() => navigate(\"/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n            />\n            <Grid container {...props}>  \n                <Grid item sm={1}  md={1} lg={1.5} xl={1.5} />\n                <Grid item  sm={10}  md={10} lg={9} xl={9}>\n                    <Container style={{ marginTop: \"-10px\", marginLeft: \"100px\" }}>\n                        <Typography\n                            type=\"display\"\n                            size=\"medium\"\n                            style={{ fontWeight: 700, fontSize: \"48px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\"  }}\n                        >\n                            {diseaseLabel}\n                        </Typography>\n                        <br/>\n                        <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ fontSize: \"16px\", lineHeight: \"24px\", fontWeight: 400, letterSpacing: \"0.3%\", marginBottom: \"16px\" }}\n                        >\n                            {diseaseDesc}\n                        </Typography>\n                        <br/>\n                        <Button bvariant={page === -1 ? \"filled\" : \"outlined\"} btheme=\"light\" onClick={() => setPage(-1)}>GWAS Locus Overview</Button>&nbsp;&nbsp;&nbsp;\n                        {genesdata && genesdata.genesAssociationsQuery.length > 0 && <><Button bvariant={page === 0 ? \"filled\" : \"outlined\"}  btheme=\"light\" onClick={()=>{ setPage(0); }}>Gene Associations (TWAS)</Button>&nbsp;&nbsp;&nbsp;</>}\n                        {data && data.gwassnpAssociationsQuery.length > 0 && <><Button bvariant={page === 1 ? \"filled\" : \"outlined\"}  btheme=\"light\" onClick={()=>{ setPage(1)}}>Associated SNPs &amp; QTLs</Button>&nbsp;&nbsp;&nbsp;</>}\n                        {gwasIntersectingSnpWithCcresData && adultgwasIntersectingSnpWithBcresData && fetalgwasIntersectingSnpWithBcresData && gwasIntersectingSnpWithCcresData.gwasintersectingSnpsWithCcreQuery.length > 0 && (\n                            <><Button bvariant={page === 2 ? \"filled\" : \"outlined\"} btheme=\"light\" onClick={() => setPage(2)}>Regulatory SNP Associations</Button>&nbsp;&nbsp;&nbsp;</>\n                        )}\n                        { browserCoordinates && (\n                            <Button bvariant={page === 3 ? \"filled\" : \"outlined\"} btheme=\"light\" onClick={() => setPage(3)}>Brain (epi)genome browser</Button>\n                        )}\n                    </Container>\n                </Grid>\n                <Grid item sm={1}  md={1} lg={1.5} xl={1.5} />\n                <Grid item sm={1} md={1} lg={1.5} xl={1.5} />\n                <Grid sm={10} md={10} lg={9} xl={9}>\n                    { page === -1 ? (\n                        <RiskLocusView loci={loci} onLocusClick={navigateBrowser} />\n                    ) : page === 0 && genesdata && genesdata.genesAssociationsQuery.length > 0 ? (\n                        <GeneAssociations disease={disease || ''} data={genesdata.genesAssociationsQuery} />\n                    ) : page === 1 && data && data.gwassnpAssociationsQuery.length > 0 ? (\n                        <AssociatedSnpQtl disease={disease || ''} data={data.gwassnpAssociationsQuery}/>\n                    ) : page === 2 && gwasIntersectingSnpWithCcresData && adultgwasIntersectingSnpWithBcresData && fetalgwasIntersectingSnpWithBcresData && gwasIntersectingSnpWithCcresData.gwasintersectingSnpsWithCcreQuery.length > 0 ? (\n                        <DiseaseIntersectingSnpsWithccres\n                            disease={disease || ''} \n                            ccredata={gwasIntersectingSnpWithCcresData.gwasintersectingSnpsWithCcreQuery} \n                            adult_bcredata={adultgwasIntersectingSnpWithBcresData.gwasintersectingSnpsWithBcreQuery}\n                            fetal_bcredata={fetalgwasIntersectingSnpWithBcresData.gwasintersectingSnpsWithBcreQuery}\n                        />\n                    ) : page === 3 ? (\n                        <div style={{ marginTop: \"2em\" }}>\n                            <Browser coordinates={browserCoordinates} url={summaryStatisticsURL} trait={diseaseLabel || \"Autism Spectrum Disorder\"} />\n                        </div>\n                    ) : null }\n                </Grid>\n                <Grid item sm={1}  md={1} lg={1.5} xl={1.5} />\n            </Grid>\n\n        </>\n    );\n}\nexport default DiseaseTraitDetails;\n","import React, {useState, useCallback} from 'react';\nimport { GridProps } from '@mui/material';\nimport { AppBar, Typography, SearchBox, HorizontalCard } from '@zscreen/psychscreen-ui-components';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { PORTALS } from \"../../../App\";\nimport { Grid, Container, Slide } from '@mui/material';\nimport CircularProgress from '@mui/material/CircularProgress';\n\n\nconst GENE_AUTOCOMPLETE_QUERY = `\n query suggest($id: String!, $assembly: String!) {\n     suggest(id: $id, assembly: $assembly, limit: 5) {\n         id\n         coordinates {\n             chromosome\n             start\n             end\n         }\n         ...on Gene {\n             name\n         }\n         ...on Transcript {\n             name\n         }\n         __typename\n     }\n }\n `;\n\nconst SingleCellDetails: React.FC<GridProps> = (props) => {\n    const { disease } = useParams();\n    const navigate = useNavigate(); \n    const [ val, setVal ] = useState<string>('')         \n    const [ fetching, setFetching ] = useState<boolean>(false)         \n    const [ geneCards, setgeneCards] = useState<{cardLabel: string, val: string, cardDesc: string}[] | undefined>(undefined)\n    const onSearchChange = useCallback(\n        async (value: any) => {\n            setFetching(true);\n            const response = await fetch('https://ga.staging.wenglab.org/graphql', {\n                method: 'POST',\n                body: JSON.stringify({\n                    query: GENE_AUTOCOMPLETE_QUERY,\n                    variables: {\n                        assembly: \"GRCh38\",\n                        id: value,\n                    },\n                }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n            const genesSuggestion = (await response.json()).data?.suggest;            \n            if(genesSuggestion && genesSuggestion.length > 0) {\n                const r = genesSuggestion.map((g: any)=>{\n                    return {\n                        val: `${g.id}/${g.coordinates.chromosome}/${g.coordinates.start}/${g.coordinates.end}`,\n                        cardDesc: g.id, //.split(\".\")[0],\n                        cardLabel: g.name\n                    }\n                });\n                setgeneCards(r);\n            } else if (genesSuggestion && genesSuggestion.length === 0)\n                setgeneCards([]);\n            setFetching(false);\n        },\n        []\n    );\n   \n    return(\n        <>\n            <AppBar\n                centered\n                onDownloadsClicked={() => navigate(\"/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n            />\n            <Grid container {...props}> \n                <Grid item sm={2} ></Grid>\n                <Grid item sm={4}>\n                    \n                    <Container  style={{ width:\"741px\", marginTop: \"147px\" }} fixed>\n                    <Typography\n                            type=\"body\"\n                            size=\"small\"\n                            style={{ fontWeight: 500, fontSize: \"23px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\", marginBottom: \"16px\" }}\n                        >\n                            Search Gene to show Dot Plot \n                        </Typography>\n                        <SearchBox\n                            value={val}\n                            onChange={\n                            e => { \n                                setVal(e.target.value)       \n                            }}\n                            onSearchButtonClick={() => { \n                                if(val !== ''){\n                                    onSearchChange(val)               \n                                }   \n                            }}                \n                            helperText={\"e.g. sox4, gapdh\"}                            \n                        />\n\n                    </Container>\n\n                    \n                   \n                </Grid>\n                \n                    \n                \n              \n                <Grid item sm={6} >\n                { fetching ? ( <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}> <> \n                        <Typography\n                                               type=\"body\"\n                                               size=\"large\"\n                                               style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                                           >\n                                                   Loading Data...\n                                           </Typography>\n                                           <br/>\n                       <CircularProgress color=\"inherit\"/>\n                       \n                        </>  </Container>) :  ( \n                            <>\n                            {geneCards && geneCards!.length > 0 && <Slide direction=\"up\" in timeout={1000}>\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {<HorizontalCard width={500}\n                                        onCardClick={(v?: string) => {\n                                            let f = geneCards!!.find((g: any)=> g.val===v)\n                                            \n                                   navigate(`/psychscreen/single-cell/${disease}/${f?.cardLabel}`)\n                                        }}\n                                        cardContentText={geneCards!!} \n                                    />  }          \n                                </Container>\n                            </Slide> } \n                            {geneCards && geneCards!.length === 0 &&\n                                <Container style={{ marginLeft: \"12px\", marginTop: \"150px\" }}>            \n                                    {'No Results Found'  }          \n                                </Container>\n                            }\n                            </>\n                        )}\n                \n                </Grid>\n\n            </Grid>\n           \n        </>\n    )\n}\n\nexport default SingleCellDetails;","export function ticks(range: [number, number], cscale: number = 1.0): number[] {\n    const sfig = Math.pow(10.0, Math.floor(Math.log10(range[1])));\n    const r: number[] = [],\n        lrange = [Math.floor(range[0] / sfig) * sfig, Math.ceil(range[1] / sfig) * sfig];\n    for (let i = lrange[0]; i <= lrange[1]; i += sfig * cscale) {\n        r.push(i);\n    }\n    if (r.length <= 2) return range;\n    return r.length > 10 ? ticks(range, cscale * 2) : r;\n}\n","import React from 'react';\nimport { linearTransform } from '../violin/utils';\nimport { ticks } from './utils';\nimport { AxisProps } from './types';\n\nconst YAxis: React.FC<AxisProps> = props => {\n    const verticalTransform = linearTransform(props.range, [props.height * 0.9, props.height * 0.1]);\n    return (\n        <>\n            <text\n                transform=\"rotate(-90)\"\n                textAnchor=\"middle\"\n                x={-props.height / 2}\n                y={props.width * 0.2}\n                dominantBaseline=\"center\"\n                fontSize=\"150px\"\n            >\n                {props.title}\n            </text>\n            <rect height={props.height * 0.8} y={props.height * 0.1} x={props.width * 0.8} width={2} fill=\"#000000\" />\n            {ticks(props.range)\n                .filter(x => verticalTransform(x) > props.height * 0.1 && verticalTransform(x) < props.height * 0.9)\n                .map(rangeValue => (\n                    <g transform={`translate(0,${verticalTransform(rangeValue)})`} key={rangeValue}>\n                        <text textAnchor=\"end\" x={props.width * 0.6} fontSize=\"140px\" alignmentBaseline=\"middle\">\n                            {rangeValue.toFixed(Math.log10(props.range[1] + 0.01) > 1.0 ? 0 : 0)}\n                        </text>\n                        <rect width={props.width * 0.1} height={2} x={props.width * 0.7} y={-2} fill=\"#000000\" />\n                    </g>\n                ))}\n        </>\n    );\n};\nexport default YAxis;\n","import React from 'react';\nimport { TooltipProps } from './types';\n\nconst Tooltip: React.FC<TooltipProps> = props => (\n    <g transform={`translate(${props.x},${props.y})`}>\n        <rect\n            width={props.width}\n            height={props.fontSize * (Object.keys(props.content).length + 3)}\n            fill={props.fill}\n            stroke={props.stroke}\n            strokeWidth={2}\n        />\n        <text\n            fontWeight=\"bold\"\n            fontSize={props.fontSize * 1.25}\n            textAnchor=\"middle\"\n            x={props.width / 2}\n            y={props.fontSize * 1.4}\n        >\n            {props.title}\n        </text>\n        {Object.keys(props.content).map((key, i) => (\n            <React.Fragment key={i}>\n                <text\n                    fontSize={props.fontSize * 0.9}\n                    x={props.width * 0.35}\n                    y={props.fontSize * (i + 3)}\n                    fontWeight=\"bold\"\n                >\n                    {key}:\n                </text>\n                <text fontSize={props.fontSize * 0.9} x={props.width * 0.55} y={props.fontSize * (i + 3)}>\n                    {props.content[key]}\n                </text>\n            </React.Fragment>\n        ))}\n    </g>\n);\nexport default Tooltip;\n","import React from 'react';\nimport { LegendProps } from './types';\n\nconst Legend: React.FC<LegendProps> = props => (\n    <g transform={`translate(${props.x},${props.y})`}>\n        <rect\n            width={props.width}\n            height={props.fontSize * (Object.keys(props.content).length + 3)}\n            fill={props.fill}\n            stroke={props.stroke}\n            strokeWidth={2}\n        />\n        <text\n            fontWeight=\"bold\"\n            fontSize={props.fontSize * 1.25}\n            textAnchor=\"middle\"\n            x={props.width / 2}\n            y={props.fontSize * 1.4}\n        >\n            {props.title}\n        </text>\n        {Object.keys(props.content).map((key, i) => (\n            <React.Fragment key={i}>\n                <rect\n                    x={props.width * 0.1}\n                    y={props.fontSize * (i + 2.5)}\n                    width={props.fontSize * 0.8}\n                    height={props.fontSize * 0.8}\n                    fill={key}\n                />\n                <text fontSize={props.fontSize * 0.9} x={props.width * 0.18} y={props.fontSize * (i + 3.2)}>\n                    {props.content[key]}\n                </text>\n            </React.Fragment>\n        ))}\n    </g>\n);\nexport default Legend;\n","import React, { useMemo, useCallback } from 'react';\n\nimport { standardNormalKernel, median } from './utils';\nimport { linearTransform, FRIENDLY } from './utils';\nimport { YAxis } from '../axis';\nimport Tooltip from './tooltip';\nimport Legend from './legend';\nimport { ViolinPlotProps, ViolinProps, SingleViolinProps } from './types';\n// import { associateBy } from 'queryz';\n\nconst SingleViolin: React.FC<SingleViolinProps> = props => {\n    const max = useMemo(() => Math.max(...props.rendered), [props.rendered]);\n    const reversed = useMemo(() => [...props.rendered].reverse(), [props.rendered]);\n    const leftTransform = useCallback(linearTransform([0, max], [props.width * 0.5, props.width * 0.2]), [\n        max,\n        props.width,\n    ]);\n    const rightTransform = useCallback(linearTransform([0, max], [props.width * 0.5, props.width * 0.8]), [\n        max,\n        props.width,\n    ]);\n    const verticalTransform = useCallback(\n        linearTransform([0, props.rendered.length], [props.height * 0.9, props.height * 0.1]),\n        [props.rendered, props.height]\n    );\n    const left = useMemo(\n        () =>\n            props.rendered.reduce(\n                (acc, v, i) => acc + ` L ${leftTransform(v)} ${verticalTransform(i)}`,\n                `M ${props.width / 2} ${props.height * 0.9}`\n            ),\n        [props.rendered, props.width, props.height, leftTransform, verticalTransform]\n    );\n    const complete = useMemo(\n        () =>\n            reversed.reduce(\n                (acc, v, i) => acc + ` L ${rightTransform(v)} ${verticalTransform(props.rendered.length - i - 1)}`,\n                left + ` L ${props.width / 2} ${props.height * 0.1}`\n            ),\n        [reversed, rightTransform, verticalTransform, props.rendered, props.width, props.height, left]\n    );\n\n    return (\n        <g transform={`translate(${props.x},0)`}>\n            <path\n                d={complete + `L ${props.width / 2} ${props.height * 0.9}`}\n                fill={props.fill}\n                stroke={props.stroke}\n                strokeWidth={props.strokeWidth}\n                onMouseOver={props.onMouseOver}\n                onMouseOut={props.onMouseOut}\n                fillOpacity={props.fillOpacity}\n            />\n            {props.median !== undefined && (\n                <rect\n                    x={props.width * 0.4}\n                    y={verticalTransform(props.median) - props.height * 0.005}\n                    width={props.width * 0.2}\n                    height={props.height * 0.01}\n                    fill={props.stroke}\n                    fillOpacity={props.fillOpacity}\n                />\n            )}\n        </g>\n    );\n};\n\nconst Violin: React.FC<ViolinProps> = props => {\n    const keys = useMemo(\n        () =>\n            Object.keys(props.rendered)\n                .filter(x => x !== undefined)\n                .sort(),\n        [props.rendered]\n    );\n    return (\n        <g transform={`translate(${props.x},0)`}>\n            {keys.map((x: any, i) => (\n                <SingleViolin\n                    rendered={standardNormalKernel(props.rendered[x], props.domain)}\n                    width={props.width / keys.length}\n                    height={props.height}\n                    x={(i * props.width) / keys.length}\n                    fill={props.colors ? props.colors[x] : props.fill}\n                    fillOpacity={props.mousedOver === x ? 1.0 : props.fillOpacity}\n                    stroke={props.stroke}\n                    key={i}\n                    strokeWidth={+(props.strokeWidth || 1) * (props.mousedOver === x ? 2.0 : 1.0)}\n                    onMouseOver={() => props.onMousedOver && props.onMousedOver(x)}\n                    onMouseOut={() => props.onMousedOut && props.onMousedOut()}\n                    domain={props.domain}\n                />\n            ))}\n        </g>\n    );\n};\n\nconst ViolinPlot: React.FC<ViolinPlotProps> = props => {\n    const keys = useMemo(() => [...props.data.keys()].sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase())), [\n        props.data,\n    ]);\n    /* const legendContent = useMemo<Map<string, string>>( () => associateBy(\n        [ ...(props.colors?.values() || []) ], x => x, x => FRIENDLY.get(x) || x\n    ), [ props.colors, props.legendKeys ]); */\n    const mouseOverTitle = useMemo(\n        () =>\n            props.mousedOver &&\n            (props.mousedOver.inner === 'none' || props.mousedOver.outer === props.mousedOver.inner\n                ? FRIENDLY.get(props.mousedOver.outer || '') || props.mousedOver.outer\n                : `${FRIENDLY.get(props.mousedOver.outer || '') || props.mousedOver.outer}`),\n        [props.mousedOver]\n    );\n    const length = (props.tKeys || keys.length) + 4;\n\n    return (\n        <g>\n            <YAxis\n                title={props.title}\n                width={(props.width / length) * 2}\n                height={props.height / 2}\n                range={props.domain}\n            />\n            {keys.map((x, i) => (\n                <React.Fragment key={`${x}_${i}`}>\n                    <Violin\n                        {...(props as React.SVGProps<SVGPathElement>)}\n                        rendered={[...props.data.get(x)!.values()]}\n                        width={props.width / length}\n                        height={props.height / 2}\n                        x={((i + 2) * props.width) / length}\n                        fill={props.colors.get(x) || props.fill}\n                        key={i}\n                        mousedOver={props.mousedOver && props.mousedOver.outer === x ? props.mousedOver.inner : null}\n                        onMousedOver={xx =>\n                            props.onViolinMousedOver && props.onViolinMousedOver({ inner: xx, outer: x })\n                        }\n                        onMousedOut={() => props.onViolinMousedOut && props.onViolinMousedOut()}\n                        domain={props.domain}\n                        colors={[...props.data.get(x)!.values()].map(() => props.colors.get(x) || '#aaaaaa')}\n                    />\n                    <rect\n                        width={(props.width / length) * 0.8}\n                        x={((i + 2.1) * props.width) / length}\n                        y={props.height * 0.48}\n                        height={1}\n                        fill=\"#888888\"\n                    />\n                    <text\n                        key={x}\n                        fontSize=\"140px\"\n                        transform=\"rotate(-90)\"\n                        textAnchor=\"end\"\n                        y={((i + 2.5) * props.width) / length}\n                        x={-props.height / 2}\n                        height={props.width / (length - 1)}\n                        fill=\"#000000\"\n                        alignmentBaseline=\"middle\"\n                    >\n                        {FRIENDLY.get(x) || x}\n                    </text>\n                </React.Fragment>\n            ))}\n            <Legend\n                x={props.width}\n                y={props.height * 0.1}\n                width={props.width / length}\n                title={props.legendTitle || ''}\n                content={{}}\n                fontSize={12}\n                fill=\"#eeeeee\"\n            />\n            {props.mousedOver && props.mousedOver.outer !== null && (\n                <Tooltip\n                    width={(props.width / length) * 6}\n                    x={\n                        ((keys.indexOf(props.mousedOver.outer) + (length - 1) > 2 &&\n                        keys.indexOf(props.mousedOver.outer) === length - 2\n                            ? -0.75\n                            : 1.75) *\n                            props.width) /\n                        length\n                    }\n                    y={props.height * 0.1}\n                    fill=\"#eeeeee\"\n                    stroke=\"#000000\"\n                    title={mouseOverTitle || ''}\n                    content={{\n                        n:\n                            props.data\n                                .get(props.mousedOver.outer)\n                                ?.get('all')\n                                ?.length.toString() || '',\n                        median: median(props.data.get(props.mousedOver.outer)?.get('all') || [0]).toFixed(2),\n                        maximum: Math.max(...(props.data.get(props.mousedOver.outer)?.get('all') || [0])).toFixed(2),\n                        minimum: Math.min(...(props.data.get(props.mousedOver.outer)?.get('all') || [0])).toFixed(2),\n                    }}\n                    fontSize={90}\n                />\n            )}\n        </g>\n    );\n};\nexport default ViolinPlot;\n","\nexport const tissueColors = new Map();\n\ntissueColors.set(\"Adipose Tissue\",\"rgb(242, 104, 34)\")\ntissueColors.set(\"Adipose - Subcutaneous\",\"rgb(242, 104, 34)\")\ntissueColors.set(\"Adipose - Visceral (Omentum)\",\"rgb(251, 169, 26)\")\ntissueColors.set(\"Adrenal Gland\",\"rgb(94, 186, 71)\")\ntissueColors.set(\"Artery - Aorta\",\"rgb(241, 88, 89)\")\ntissueColors.set(\"Artery - Coronary\",\"rgb(248, 167, 153)\")\ntissueColors.set(\"Artery - Tibial\",\"rgb(238, 33, 36)\")\ntissueColors.set(\"Bladder\",\"rgb(169, 29, 34)\")\ntissueColors.set(\"Blood\",\"rgb(221, 66, 151)\")\ntissueColors.set(\"Blood Vessel\",\"rgb(238, 33, 36)\")\ntissueColors.set(\"Brain\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Breast\",\"rgb(74, 194, 197)\")\ntissueColors.set(\"Cervix Uteri\",\"rgb(203, 170, 209)\")\ntissueColors.set(\"Colon\",\"rgb(202, 152, 85)\")\ntissueColors.set(\"Esophagus\",\"rgb(139, 114, 87)\")\ntissueColors.set(\"Heart\",\"rgb(101, 44, 144)\")\ntissueColors.set(\"Kidney\",\"rgb(116, 202, 193)\")\ntissueColors.set(\"Muscle\",\"rgb(171, 168, 212)\")\ntissueColors.set(\"Nerve\",\"rgb(253, 216, 0)\")\ntissueColors.set(\"Salivary Gland\",\"rgb(153, 187, 137)\")\ntissueColors.set(\"Skin\",\"rgb(111, 116, 182)\")\ntissueColors.set(\"Small Intestine\",\"rgb(86, 86, 36)\")\ntissueColors.set(\"Brain - Amygdala\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Anterior cingulate cortex (BA24)\",\"rgb(235, 231, 2)\")\ntissueColors.set(\"Brain - Caudate (basal ganglia)\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Cerebellar Hemisphere\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Cerebellum\",\" rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Cortex\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Frontal Cortex (BA9)\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Hippocampus\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Hypothalamus\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Nucleus accumbens (basal ganglia)\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Putamen (basal ganglia)\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Spinal cord (cervical c-1)\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Brain - Substantia nigra\",\"rgb(235, 231, 27)\")\ntissueColors.set(\"Breast - Mammary Tissue\",\"rgb(74, 194, 197)\")\ntissueColors.set(\"Cells - Cultured fibroblasts\",\"rgb(177, 226, 244)\")\ntissueColors.set(\"Cells - EBV-transformed lymphocytes\",\"rgb(163, 114, 177)\")\ntissueColors.set(\"Cervix - Ectocervix\",\"rgb(252, 204, 203)\")\ntissueColors.set(\"Cervix - Endocervix\",\"rgb(203, 170, 209)\")\ntissueColors.set(\"Colon - Sigmoid\",\"rgb(238, 187, 119)\")\ntissueColors.set(\"Colon - Transverse\",\"rgb(202, 152, 85)\")\ntissueColors.set(\"Esophagus - Gastroesophageal Junction\",\"rgb(139, 114, 87)\")\ntissueColors.set(\"Esophagus - Mucosa\",\"rgb(82, 38, 14)\")\ntissueColors.set(\"Esophagus - Muscularis\",\"rgb(187, 153, 136)\")\ntissueColors.set(\"Fallopian Tube\",\"rgb(252, 204, 203)\")\ntissueColors.set(\"Heart - Atrial Appendage\",\"rgb(122, 82, 161)\")\ntissueColors.set(\"Heart - Left Ventricle\",\"rgb(101, 44, 144)\")\ntissueColors.set(\"Kidney - Cortex\",\"rgb(116, 202, 193)\")\ntissueColors.set(\"Kidney - Medulla\",\"rgb(121, 200, 171)\")\ntissueColors.set(\"Liver\",\"rgb(170, 187, 102)\")\ntissueColors.set(\"Lung\",\"rgb(164, 205, 57)\")\ntissueColors.set(\"Minor Salivary Gland\",\"rgb(153, 187, 137)\")\ntissueColors.set(\"Muscle - Skeletal\",\"rgb(171, 168, 212)\")\ntissueColors.set(\"Nerve - Tibial\",\"rgb(253, 216, 0)\")\ntissueColors.set(\"Ovary\",\"rgb(225, 174, 208)\")\ntissueColors.set(\"Pancreas\",\"rgb(153, 87, 36)\")\ntissueColors.set(\"Pituitary\",\"rgb(179, 216, 143)\")\ntissueColors.set(\"Prostate\",\"rgb(221, 221, 22)\")\ntissueColors.set(\"Skin - Not Sun Exposed (Suprapubic)\",\"rgb(58, 83, 164)\")\ntissueColors.set(\"Skin - Sun Exposed (Lower leg)\",\"rgb(111, 116, 182)\")\ntissueColors.set(\"Small Intestine - Terminal Ileum\",\"rgb(86, 86, 36)\")\ntissueColors.set(\"Spleen\",\"rgb(119, 137, 85)\")\ntissueColors.set(\"Stomach\",\"rgb(255, 221, 153)\")\ntissueColors.set(\"Testis\",\"rgb(170, 171, 171)\")\ntissueColors.set(\"Thyroid\",\"rgb(24, 104, 51)\")\ntissueColors.set(\"Uterus\",\"rgb(200, 120, 178)\")\ntissueColors.set(\"Vagina\",\"rgb(239, 88, 152)\")\ntissueColors.set(\"Whole Blood\",\"rgb(221, 66, 151)\")\n\n\nexport const tissueTypeColors = {}\n\ntissueTypeColors[\"Adipose-Subcutaneous\"]=\"rgb(242, 104, 34)\"\ntissueTypeColors[\"Adipose-Visceral-(Omentum)\"]=\"rgb(251, 169, 26)\"\ntissueTypeColors[\"Adrenal-Gland\"]=\"rgb(94, 186, 71)\"\ntissueTypeColors[\"Artery-Aorta\"]=\"rgb(241, 88, 89)\"\ntissueTypeColors[\"Artery-Coronary\"]=\"rgb(248, 167, 153)\"\ntissueTypeColors[\"Artery-Tibial\"]=\"rgb(238, 33, 36)\"\ntissueTypeColors[\"Bladder\"]=\"rgb(169, 29, 34)\"\ntissueTypeColors[\"Brain-Amygdala\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Anterior-cingulate-cortex-(BA24)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Caudate-(basal-ganglia)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Cerebellar-Hemisphere\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Cerebellum\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Cortex\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Frontal-Cortex-(BA9)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Hippocampus\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Hypothalamus\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Nucleus-accumbens-(basal-ganglia)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Putamen-(basal-ganglia)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Spinal-cord-(cervical-c-1)\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Brain-Substantia-nigra\"]=\"rgb(235, 231, 27)\"\ntissueTypeColors[\"Breast-Mammary-Tissue\"]=\"rgb(74, 194, 197)\"\ntissueTypeColors[\"Cells-Cultured-fibroblasts\"]=\"rgb(177, 226, 244)\"\ntissueTypeColors[\"Cells-EBV-transformed-lymphocytes\"]=\"rgb(163, 114, 177)\"\ntissueTypeColors[\"Cervix-Ectocervix\"]=\"rgb(252, 204, 203)\"\ntissueTypeColors[\"Cervix-Endocervix\"]=\"rgb(203, 170, 209)\"\ntissueTypeColors[\"Colon-Sigmoid\"]=\"rgb(238, 187, 119)\"\ntissueTypeColors[\"Colon-Transverse\"]=\"rgb(202, 152, 85)\"\ntissueTypeColors[\"Esophagus-Gastroesophageal-Junction\"]=\"rgb(139, 114, 87)\"\ntissueTypeColors[\"Esophagus-Mucosa\"]=\"rgb(82, 38, 14)\"\ntissueTypeColors[\"Esophagus-Muscularis\"]=\"rgb(187, 153, 136)\"\ntissueTypeColors[\"Fallopian-Tube\"]=\"rgb(252, 204, 203)\"\ntissueTypeColors[\"Heart-Atrial-Appendage\"]=\"rgb(122, 82, 161)\"\ntissueTypeColors[\"Heart-Left-Ventricle\"]=\"rgb(101, 44, 144)\"\ntissueTypeColors[\"Kidney-Cortex\"]=\"rgb(116, 202, 193)\"\ntissueTypeColors[\"Kidney-Medulla\"]=\"rgb(121, 200, 171)\"\ntissueTypeColors[\"Liver\"]=\"rgb(170, 187, 102)\"\ntissueTypeColors[\"Lung\"]=\"rgb(164, 205, 57)\"\ntissueTypeColors[\"Minor-Salivary-Gland\"]=\"rgb(153, 187, 137)\"\ntissueTypeColors[\"Muscle-Skeletal\"]=\"rgb(171, 168, 212)\"\ntissueTypeColors[\"Nerve-Tibial\"]=\"rgb(253, 216, 0)\"\ntissueTypeColors[\"Ovary\"]=\"rgb(225, 174, 208)\"\ntissueTypeColors[\"Pancreas\"]=\"rgb(153, 87, 36)\"\ntissueTypeColors[\"Pituitary\"]=\"rgb(179, 216, 143)\"\ntissueTypeColors[\"Prostate\"]=\"rgb(221, 221, 221)\"\ntissueTypeColors[\"Skin-Not-Sun-Exposed-(Suprapubic)\"]=\"rgb(58, 83, 164)\"\ntissueTypeColors[\"Skin-Sun-Exposed-(Lower-leg)\"]=\"rgb(111, 116, 182)\"\ntissueTypeColors[\"Small-Intestine-Terminal-Ileum\"]=\"rgb(86, 86, 36)\"\ntissueTypeColors[\"Spleen\"]=\"rgb(119, 137, 85)\"\ntissueTypeColors[\"Stomach\"]=\"rgb(255, 221, 153)\"\ntissueTypeColors[\"Testis\"]=\"rgb(170, 171, 171)\"\ntissueTypeColors[\"Thyroid\"]=\"rgb(24, 104, 51)\"\ntissueTypeColors[\"Uterus\"]=\"rgb(200, 120, 178)\"\ntissueTypeColors[\"Vagina\"]=\"rgb(239, 88, 152)\"\ntissueTypeColors[\"Whole-Blood\"]=\"rgb(221, 66, 151)\" ","\nimport { gql, useQuery } from '@apollo/client';\nimport React, {useMemo} from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { CustomizedTable, Typography } from '@zscreen/psychscreen-ui-components';\n\nconst OpenTargetQuery = gql`\nquery GenePageQuery($geneId: String!) {\n  geneInfo(geneId: $geneId) {\n    id\n    symbol\n    chromosome\n    start\n    end\n    bioType\n    __typename\n  }\n  studiesAndLeadVariantsForGeneByL2G(geneId: $geneId) {\n    pval\n    yProbaModel\n    study {\n      studyId\n      traitReported\n      pubAuthor\n      pubDate\n      pmid\n      nInitial\n      nReplication\n      hasSumstats\n      __typename\n    }\n    variant {\n      rsId\n      id\n      __typename\n    }\n    odds {\n      oddsCI\n      oddsCILower\n      oddsCIUpper\n      __typename\n    }\n    beta {\n      betaCI\n      betaCILower\n      betaCIUpper\n      direction\n      __typename\n    }\n    __typename\n  }\n  colocalisationsForGene(geneId: $geneId) {\n    leftVariant {\n      id\n      rsId\n      __typename\n    }\n    study {\n      studyId\n      traitReported\n      pubAuthor\n      pubDate\n      pmid\n      hasSumstats\n      __typename\n    }\n    qtlStudyId\n    phenotypeId\n    tissue {\n      id\n      name\n      __typename\n    }\n    h3\n    h4\n    log2h4h3\n    __typename\n  }\n}\n`;\n\ntype OpenTargetsQueryResponse = {\n\tgeneInfo: {\n\t\tid: string,\n\t\tsymbol: string,\n\t\tchromosome: string,\n\t\tstart: number,\n\t\tend: number,\n\t\tbioType: string,\n\t\t__typename: string\n\t};\n\tstudiesAndLeadVariantsForGeneByL2G: {\n\t\tpval: number,\n\t\tyProbaModel: number,\n\t\tstudy: {\n\t\t\tstudyId: string,\n\t\t\ttraitReported: string,\n\t\t\tpubAuthor: string,\n\t\t\tpubDate: string,\n\t\t\tpmid: string,\n\t\t\tnInitial: number,\n\t\t\tnReplication: number,\n\t\t\thasSumstats: boolean,\n\t\t\t__typename: string\n\t\t};\n\t\tvariant: {\n\t\t\trsId: string,\n\t\t\tid: string,\n\t\t\t__typename: string\n\t\t};\n\t\todds: {\n\t\t\toddsCI: number,\n\t\t\toddsCILower: number,\n\t\t\toddsCIUpper: number,\n\t\t\t__typename: string,\n\t\t};\n\t\tbeta: {\n\t\t\tbetaCI: number,\n\t\t\tbetaCILower: number,\n\t\t\tbetaCIUpper: number,\n\t\t\tdirection: string,\n\t\t\t__typename: string\n\t\t};\n\t\t__typename: string\n\t}[];\n\tcolocalisationsForGene: {\n\t\tleftVariant: {\n\t\t\tid: string,\n\t\t\trsId: string,\n\t\t\t__typename: string\n\t\t};\n\t\tstudy: {\n\t\t\tstudyId: string,\n\t\t\ttraitReported: string,\n\t\t\tpubAuthor: string,\n\t\t\tpubDate: string,\n\t\t\tpmid: string,\n\t\t\thasSumstats: boolean,\n\t\t\t__typename: string\n\t\t};\n\t\tqtlStudyId: string;\n\t\tphenotypeId: string;\n\t\ttissue: {\n\t\t\tid: string,\n\t\t\tname: string,\n\t\t\t__typename: string\n\t\t};\n\t\th3: string;\n\t\th4: string;\n\t\tlog2h4h3: string;\n\t\t__typename: string;\n\t}[];\n};\n\n\n\nexport function useOpenTargetsData(geneID: string) {\n\tconst { data, loading } = useQuery<OpenTargetsQueryResponse>(OpenTargetQuery, {\n\t\tvariables: {\n\t\t\tgeneId: geneID //.split('.')[0]\n\t\t}, context: {\n\t\t\tclientName: 'opentarget'\n\t\t}\n\t});\n\n\treturn {\n\t\tdata: { ...data },\n\t\tloading: loading\n\t};\n}\n\n/*\n\n\n*/\n\nconst roundTo = function (num: number, places: number) {\n\t// https://www.reddit.com/r/typescript/comments/efid2b/comment/fc1jusw/?utm_source=share&utm_medium=web2x&context=3\n\tconst factor = 10 ** places;\n\treturn Math.round(num * factor) / factor;\n};\n\n\nconst OpenTarget: React.FC<any> = (props) => { \n    const { data, loading } = useOpenTargetsData(props.id);\n\t//console.log(\"openTargetdata:\", data);\n    const formattedData = useMemo(() => data?.studiesAndLeadVariantsForGeneByL2G?.map(\n\t\tq =>  {\n            \n            return [{\n                header: \"Study ID\",\n                value: q.study.studyId,\n                render:  <a  target={'_blank'} rel={'noreferrer noopener'} href={`https://genetics.opentargets.org/study/${q.study.studyId}`}>{q.study.studyId}</a>\n            }, {\n                header: \"Trait\",\n                value: q.study.traitReported\n            }, {\n                header: \"Publication\",\n                value: q.study.pubAuthor,\n                render: (q.study.pmid ? <a  target={'_blank'} rel={'noreferrer noopener'} href={`http://europepmc.org/article/MED/${q.study.pmid}`}>{ q.study.pubAuthor}</a> :  q.study.pubAuthor)\n            }, {\n                header: \"N initial\",\n                value: q.study.nInitial,\n                render: <span>{q.study.nInitial.toLocaleString(\"en-US\")}</span>\n            }, {\n                header: \"Lead Variant\",\n                value:  q.variant.id,\n                        render: <a  target={'_blank'} rel={'noreferrer noopener'} href={`https://genetics.opentargets.org/variant/${q.variant.id}`}>{q.variant.id}</a>\n            }, {\n                header: \"P-value\",\n                value: q.pval,\n                render: <span>{q.pval.toExponential(2)}</span>\n            }, {\n                header: \"Beta\",\n                value: q.beta.betaCI,\n                render: <span>{roundTo(q.beta.betaCI, 3)}</span>\n            }, {\n                header: \"Odds ratio\",\n                value: q.odds.oddsCI,\n                render: <span>{roundTo(q.odds.oddsCI, 2)}</span>\n            }, {\n                header: \"95% confidence interval\",\n                value: q.beta.betaCILower,\n                render: <span>{`(${roundTo(q.beta.betaCILower, 2)}, ${roundTo(q.beta.betaCIUpper, 2)})`}</span>\n            }, {\n                header: \"L2G pipeline score\",\n                value: q.yProbaModel,\n                render:  <span>{roundTo(q.yProbaModel, 2)}</span>\n            }, {\n                header: \"OpenTarget Gene Prioritisation\",\n                value: q.study.studyId,\n                        render:  <a  target={'_blank'} rel={'noreferrer noopener'} href={`https://genetics.opentargets.org/study-locus/${q.study.studyId}/${q.variant.id}`}>Gene Prioritisation</a>\n            }]}\n\t) || [], [data]);\n\tif (loading) return <> \n     <Typography\n                            type=\"body\"\n                            size=\"large\"\n                            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                        >\n                                Loading Open Target Data...\n                        </Typography>\n                        <br/>\n    <CircularProgress color=\"inherit\"/>\n    \n     </>;\n\n    return(<>\n    {<CustomizedTable style={{ width: \"max-content\" }}  tabledata={formattedData}/>}\n    </>)\n}\n\nexport default OpenTarget;","\nexport const linearTransform = (d, r) => v =>\n// https://gist.github.com/vectorsize/7031902\nr[0] + (r[1] - r[0]) * ((v - d[0]) / (d[1] - d[0]));\n\nexport const ticks = (range, cscale = 1.0) => {\n    const sfig = Math.pow(10.0, Math.floor(Math.log10(range[1])));\n    const r: number[] = [], lrange = [ Math.floor(range[0] / sfig) * sfig, Math.ceil(range[1] / sfig) * sfig ];\n    for (let i = lrange[0]; i <= lrange[1]; i += sfig * cscale) {\n        r.push(i);\n    }\n    if (r.length <= 2) return range;\n    return r.length > 10 ? ticks(range, cscale * 2) : r;\n};\n\n\nexport const groupBy = (data, key) => {\n    const results = {};\n    data.forEach( d => {\n        if (results[d.metadata[key]] === undefined) results[d.metadata[key]] = [];\n        results[d.metadata[key]].push({\n            y: d.value,\n            x: d.metadata.agedeath_adult !== null ? d.metadata.agedeath_adult : d.metadata.agedeath_fetus\n        });\n    });\n    return results;\n};\n\nexport const groupedValues = (groupedData, k) => {\n    const r = {};\n    Object.keys(groupedData).forEach(key => {\n        r[key] = groupedData[key].map(x => x[k])\n    });\n    return r;\n};\n\nexport const standardDeviation = values => {\n\n    if (values.length === 1) return 0.0;\n    const avg = average(values);\n\n    const squareDiffs = values.map(value => {\n        const diff = value - avg;\n        const sqrDiff = diff * diff;\n        return sqrDiff;\n    });\n\n    const avgSquareDiff = average(squareDiffs);\n    return Math.sqrt(avgSquareDiff);\n\n}\n\nexport const average = data => (\n    data.reduce( (sum, value) => sum + value, 0 ) / data.length\n);\n","import React from 'react';\nimport { linearTransform } from './utils';\nimport { ticks } from './utils';\n\nconst XAxis: React.FC<any> = ({ width, height, range, title }) => {\n    const horizontalTransform = linearTransform(range, [ 0, width ]);\n    return (\n        <>\n            <text textAnchor=\"middle\" x={width / 2} y={height * 0.5} fontSize=\"20px\">\n                {title}\n            </text>\n            <rect width={width} y={0} x={0} height={2} fill=\"#000000\" />\n            {ticks(range).filter(x => horizontalTransform(x) > 0 && horizontalTransform(x) < width).map( rangeValue => (\n                <g transform={`translate(${horizontalTransform(rangeValue)},0)`}>\n                    <text transform=\"rotate(-90)\" textAnchor=\"end\" x={-height * 0.15} y={5} fontSize=\"15px\">\n                        {rangeValue.toFixed(Math.log10(range[1] + 0.01) > 1.0 ? 0 : 2)}\n                    </text>\n                    <rect height={height * 0.1} width={2} y={0} x={-2} fill=\"#000000\" />\n                </g>\n            ))}\n        </>\n    );\n};\nexport default XAxis;\n","import React from 'react';\nimport { linearTransform } from './utils';\nimport { ticks } from './utils';\n\nconst YAxis:React.FC<any> = ({ width, height, range, title }) => {\n    const verticalTransform = linearTransform(range, [ height * 0.9, height * 0.1 ]);\n    return (\n        <>\n            <text transform=\"rotate(-90)\" textAnchor=\"middle\" x={-height / 2} y={width * 0.2} dominantBaseline=\"center\" fontSize=\"20px\">\n                {title}\n            </text>\n            <rect height={height * 0.8} y={height * 0.1} x={width * 0.8} width={2} fill=\"#000000\" />\n            {ticks(range).filter(x => verticalTransform(x) > height * 0.1 && verticalTransform(x) < height * 0.9).map( rangeValue => (\n                <g transform={`translate(0,${verticalTransform(rangeValue)})`} key={rangeValue}>\n                    <text textAnchor=\"end\" x={width * 0.6} fontSize=\"15px\" alignmentBaseline=\"middle\">\n                        {rangeValue.toFixed(Math.log10(range[1] + 0.01) > 1.0 ? 0 : 2)}\n                    </text>\n                    <rect width={width * 0.1} height={2} x={width * 0.7} y={-2} fill=\"#000000\" />\n                </g>\n            ))}\n        </>\n    );\n};\nexport default YAxis;\n","\nimport React from 'react';\n\nconst Legend = ({ x, y, width, fill, stroke, title, content, fontSize }) => (\n    <g transform={`translate(${x},${y})`}>\n        <rect width={width} height={fontSize * (Object.keys(content).length + 3)} fill={fill} stroke={stroke} strokeWidth={2} />\n        <text fontWeight=\"bold\" fontSize={fontSize * 1.25} textAnchor=\"middle\" x={width / 2} y={fontSize * 1.4}>\n            {title}\n        </text>\n        { Object.keys(content).map( (key, i) => (\n            <React.Fragment key={i}>\n                <rect x={width * 0.1} y={fontSize * (i + 2.5)} width={fontSize * 0.8} height={fontSize * 0.8} fill={key} />\n                <text fontSize={fontSize * 0.9} x={width * 0.18} y={fontSize * (i + 3.2)}>\n                    {content[key]}\n                </text>\n            </React.Fragment>\n        ))}\n    </g>\n);\nexport default Legend;\n","import React from 'react';\n\nimport { standardDeviation, average } from './utils';\n\nconst trendline = (data, resolution = 20) => {\n    const range = [\n        Math.min(...data.map(x => x.x)),\n        Math.max(...data.map(x => x.x))\n    ];\n    const step = (range[1] - range[0]) / resolution;\n    const averages = {}, stdevs = {};\n    for (let i = range[0]; i < range[1] + step; i += step) {\n        const filtered = data.filter(x => x.x > i - step * 2 && x.x < i + step * 2);\n        if (filtered.length < 3) continue;\n        averages[i] = average(filtered.map(x => x.y));\n        stdevs[i] = standardDeviation(filtered.map(x => x.y));\n    }\n    return {\n        averages,\n        stdevs\n    };\n};\n\nconst nsort = (a, b) => (+a - +b);\n\nconst Trendline = ({ data, xt, yt, color, resolution = 20 }) => {\n    const { averages, stdevs } = trendline(data, resolution);\n    const akeys = Object.keys(averages).sort(nsort).map(x => +x), skeys = Object.keys(stdevs).sort(nsort).map(x => +x);\n    const skeysr = [...skeys].reverse();\n    const center = akeys.reduce(\n        (acc, x) => (acc + ` L ${xt(x)} ${yt(averages[x])}`), `M ${xt(akeys[0])} ${yt(averages[akeys[0]])}`\n    );\n    const top = skeys.reduce(\n        (acc, x) => (acc + ` L ${xt(x)} ${yt(averages[x] + stdevs[x])}`), `M ${xt(akeys[0])} ${yt(averages[akeys[0]] + stdevs[akeys[0]])}`\n    );\n    const complete = skeysr.reduce(\n        (acc, x) => (acc + ` L ${xt(x)} ${yt(averages[x] - stdevs[x])}`), top\n    ) + `L ${xt(akeys[0])} ${yt(averages[akeys[0]] - stdevs[akeys[0]])}`;\n    return (\n        <>\n            <path\n                d={center}\n                stroke={color}\n                strokeWidth={3}\n                fill=\"none\"\n            />\n            <path\n              d={complete}\n              fill={color}\n              fillOpacity={0.3}\n              strokeWidth={2}\n            />\n        </>\n    );\n};\nexport default Trendline;\n","import React from 'react';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\n\nimport { linearTransform } from './utils';\nimport  XAxis from './xaxis';\nimport  YAxis  from './yaxis';\nimport Legend from './legend';\nimport Trendline from './trendline';\n\nconst identityTransform = linearTransform([ 1, 2 ], [ 1, 2 ]);\n\nconst AdultFetalScatterPlot: React.FC<any> = ({ xtitle, ytitle, fx, fy, ax, ay, logScale, width, height, colors, legendTitle, legendContent, normalized }) => {\n    if (!fy || !ay || !fx || !ax || !fy[0] || !ay[0] || !fx[0] || !ax[0]) return <Typography\n    type=\"body\"\n    size=\"large\"\n    style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n>No data match the given criteria.</Typography>;\n    if (logScale) {\n        fy = fy.map((yy: any) => yy.map( yyy => Math.log(yyy + 0.01) ));\n        ay = ay.map((yy: any) => yy.map( yyy => Math.log(yyy + 0.01) ));\n    }\n    const fetalDomain = [ 0, 38 ];\n    const adultDomain = [\n        -0.01,\n        Math.max(...ax.map(d => Math.max(...(d || []))))\n    ];\n    const range = [\n        normalized ? -5.0 : (logScale ? Math.log(0.01) : 0.0), // Math.min(...y.map(d => Math.min(...d))),\n        Math.max(...fy.map(d => Math.max(...(d || []))), ...ay.map(d => Math.max(...(d || []))))\n    ];\n    const fhorizontalTransform = linearTransform(fetalDomain, [ width * 0.08, width * 0.36 ]);\n    const ahorizontalTransform = linearTransform(adultDomain, [ width * 0.36, width * 0.72 ]);\n    const verticalTransform = linearTransform(range, [ height * 0.7, 0 ]);\n    const fpaired = Object.keys(fy).map( i => (\n        fy[i] ? fy[i].map( (yyy, j) => ({\n            y: yyy,\n            x: fhorizontalTransform(fx[i][j])\n        })) : []\n    ));\n    const apaired = Object.keys(ay).map( i => (\n        ay[i] ? ay[i].map( (yyy, j) => ({\n            y: yyy,\n            x: ahorizontalTransform(ax[i][j])\n        })) : []\n    ));\n    return (\n        <g>\n            <g transform={`translate(0,${-height * 0.1})`}>\n                <YAxis title={ytitle} width={width * 0.1} height={height * 0.9} range={range} />\n            </g>\n            <g transform={`translate(${width * 0.08},${height * 0.7})`}>\n                <XAxis title=\"fetal age (PCW)\" width={width * 0.28} height={height * 0.2} range={fetalDomain} />\n            </g>\n\t    <g transform={`translate(${width * 0.36},0)`}>\n\t        <line x1={0} y1={0} x2={0} y2={height * 0.7} stroke=\"#000000\" />\n\t    </g>\n\t    <g transform={`translate(${width * 0.36},${height * 0.7})`}>\n\t\t<XAxis title=\"postnatal age (years)\" width={width * 0.36} height={height * 0.2} range={adultDomain} />\n            </g>\n            { Object.keys(fx).filter(key => fx[key]).map( key => (\n                fx[key].map( (xx, i) => (\n                    <rect\n                        x={fhorizontalTransform(xx) - 2}\n                        y={verticalTransform(fy[key][i]) - 2}\n                        width={4}\n                        height={4}\n                        fill={colors[key] || \"#000000\"}\n                    />\n                ))\n            ))}\n            { Object.keys(ax).filter(key => ax[key]).map( key => (\n                ax[key].map( (xx, i) => (\n                    <rect\n                        x={ahorizontalTransform(xx) - 2}\n                        y={verticalTransform(ay[key][i]) - 2}\n                        width={4}\n                        height={4}\n                        fill={colors[key] || \"#000000\"}\n                    />\n                ))\n            ))}\n            {colors.map( (color, i) => (\n                <Trendline data={[ ...fpaired[i], ...apaired[i] ]} xt={identityTransform} yt={verticalTransform} color={color} />\n            ))}\n            <Legend\n                x={width * 0.75}\n                y={height * 0.1}\n                width={width * 0.15}\n                title={legendTitle}\n                content={legendContent}\n                fontSize={15}\n                fill=\"#eeeeee\"\n                stroke=\"#eeeeee\"\n            />\n        </g>\n    );\n};\nexport default AdultFetalScatterPlot;\n","import { gql, useQuery } from '@apollo/client';\nimport { groupBy } from 'queryz';\nimport React, { useMemo } from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport AdultFetalScatterPlot from './scatterplot/adult-fetal';\n\nconst QUERY = gql`\nquery q($name: [String]) {\n    biosampleQuery(dataset: \"werling2020\") {\n        id\n        age\n        fetal\n        sex\n    }\n    expressionQuery(dataset: \"werling2020\", gene_id: $name) {\n        biosample\n        expression\n    }\n}\n`;\n\ntype WerlingQueryResponse = {\n    biosampleQuery: {\n        id: string;\n        age: number;\n        fetal: boolean;\n        sex: string;\n    }[];\n    expressionQuery: {\n        biosample: string;\n        expression: number;\n    }[];\n};\n\nexport type GeneExpressionPageProps = {\n    id: string;\n};\n\nconst GeneExpressionPage: React.FC<GeneExpressionPageProps> = props => {\n\n    const { data, loading } = useQuery<WerlingQueryResponse>(QUERY, {\n        variables: { name: props.id.split(\".\")[0] }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t}\n    });\n    const wBiosamples = useMemo( () => groupBy(data?.biosampleQuery || [], d => d.id, x => x), [ data ]);\n    const formattedExpression = useMemo( () => data?.expressionQuery.map(\n        q => ({\n            assay_term_name: \"total RNA-seq\",\n            diagnosis: \"Control\",\n            study: \"Werling et. al. 2020\",\n            sex: wBiosamples.get(q.biosample)![0].sex === \"male\" ? 'M' : 'F',\n            agedeath_adult: wBiosamples.get(q.biosample)![0].fetal ? null : wBiosamples.get(q.biosample)![0].age,\n            agedeath_fetus: wBiosamples.get(q.biosample)![0].fetal ? wBiosamples.get(q.biosample)![0].age : null,\n            gene_quantification_files: [{\n                quantifications: [{\n                    tpm: q.expression\n                }]\n            }]\n        })\n    ) || [], [ data, wBiosamples ]);\n\n    const legendContent = ( _: string[], keys: string[] ) => {\n        let r: { [key: string]: string } = {};\n        keys.forEach( key => {\n            r[\"#008800\"] = key\n        });\n        return r;\n    };\n    return loading ? <>\n        <Typography\n            type=\"body\"\n            size=\"large\"\n            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n        >\n                Loading Data...\n        </Typography>\n                        <br/>\n    <CircularProgress color=\"inherit\"/>\n    </> : (\n        <svg width=\"100%\" viewBox={`0 0 1900 800`}>\n            <AdultFetalScatterPlot\n                fx={[ formattedExpression.filter(x => !!x.agedeath_fetus).map(x => x.agedeath_fetus) ]}\n                fy={[ formattedExpression.filter(x => !!x.agedeath_fetus).map(x => x.gene_quantification_files[0].quantifications[0].tpm) ]}\n                ax={[ formattedExpression.filter(x => !!x.agedeath_adult).map(x => x.agedeath_adult) ]}\n                ay={[ formattedExpression.filter(x => !!x.agedeath_adult).map(x => x.gene_quantification_files[0].quantifications[0].tpm) ]}\n                colors={[ \"#008800\" ]}\n                xtitle=\"\"\n                ytitle={`expression (normalized)`}\n                width={1600}\n                height={800}\n                logScale={false}\n                legendTitle={\"\"}\n                legendContent={legendContent([ \"#008800\" ], [ \"Werling et. al. 2020\" ])}\n                normalized={true}\n            />\n        </svg>\n    );\n\n}\nexport default GeneExpressionPage;\n","import React, { useCallback, useState } from 'react';\nimport { Modal, Accordion, Box } from '@material-ui/core';\nimport { Typography, Button } from '@zscreen/psychscreen-ui-components';\nimport { AccordionDetails, AccordionSummary, Checkbox, FormControlLabel, FormGroup, Grid } from '@mui/material';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\n\ntype DeepLearnedTrackModalProps = {\n    open?: boolean;\n    onAccept?: (tracks: [ string, string ][]) => void;\n    onCancel?: () => void;\n    initialSelection: [ string, string ][];\n};\n\nconst style = {\n    position: 'absolute' as 'absolute',\n    top: '25%',\n    left: '50%',\n    transform: 'translate(-50%, -15%)',\n    width: \"50%\",\n    bgcolor: 'background.paper',\n    backgroundColor: \"#ffffff\",\n    border: '2px solid #000',\n    p: 4,\n    padding: \"2em\",\n    borderRadius: \"20px\"\n};\n\nconst TRACKS = {\n    \"Adult brain bulk ATAC-seq\": [\n        [ \"putamen glia\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_glia\" ],\n        [ \"putamen neurons\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_neurons\" ]\n    ],\n    \"Adult cerebrum single cell ATAC-seq\": [\n        [ \"astrocytes\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"GABA-ergic type I\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"GABA-ergic type II\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"glutaminergic type I\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"glutaminergic type II\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"microglia\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"oligodendrocytes\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n        [ \"oligodendrocyte precursors\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell\" ],\n    ],\n    \"Evolutionary conservation\": [\n        [ \"241-way mammalian phylo-P\", \"gs://gcp.wenglab.org/241-mammalian-2020v2.bigWig\" ]\n    ]\n};\n\nconst DeepLearnedTrackModal: React.FC<DeepLearnedTrackModalProps> = props => {\n\n    // start with all tracks collapsed and a default set selected\n    const [ expanded, setExpanded ] = useState(new Map(Object.keys(TRACKS).map(k => [ k, false ])));\n    const [ selectedTracks, setSelectedTracks ] = useState(props.initialSelection.map(x => x[0]));\n\n    // handle track and accordion toggling\n    const toggleTrack = useCallback( (track: string[]) => {\n        const selected = !!selectedTracks.find(x => x === track[0])?.length;\n        if (!selected) setSelectedTracks([ ...selectedTracks, track[0] ]);\n        else setSelectedTracks(selectedTracks.filter(x => x !== track[0]));\n    }, [ selectedTracks ]);\n    const expand = useCallback((key: string) => {\n        setExpanded(\n            new Map(\n                // expand only the clicked item\n                Object.keys(TRACKS).map(k => [ k, k === key ? !expanded.get(k) : !!expanded.get(k) ])\n            )\n        );\n    }, [ expanded ]);\n\n    const onAccept = useCallback( () => props.onAccept && props.onAccept([\n        ...TRACKS[\"Adult brain bulk ATAC-seq\"].filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0),\n        ...TRACKS[\"Adult cerebrum single cell ATAC-seq\"].filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0),\n        ...TRACKS[\"Evolutionary conservation\"].filter(track => (selectedTracks.find(x => x === track[0])?.length || 0) > 0)\n    ] as [ string, string ][]), [ selectedTracks ]);\n\n    return (\n        <Modal\n            open={!!props.open}\n            onClose={props.onCancel}\n            aria-labelledby=\"modal-modal-title\"\n            aria-describedby=\"modal-modal-description\"\n        >\n            <Box sx={style} style={style}>\n                <Typography type='headline' size='medium' style={{ marginBottom: \"0.6em\" }}>\n                    Select Deep Learned Model Tracks for Display\n                </Typography>\n                <Accordion expanded={expanded.get(\"Adult brain bulk ATAC-seq\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"Adult brain bulk ATAC-seq\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">Adult brain bulk ATAC-seq</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"Adult brain bulk ATAC-seq\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <Accordion expanded={expanded.get(\"Adult cerebrum single cell ATAC-seq\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"Adult cerebrum single cell ATAC-seq\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">Adult cerebrum single cell ATAC-seq</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"Adult cerebrum single cell ATAC-seq\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <Accordion expanded={expanded.get(\"Evolutionary conservation\")}>\n                    <AccordionSummary\n                        onClick={() => expand(\"Evolutionary conservation\")}\n                        expandIcon={!expanded ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                    >\n                        <Typography type=\"title\" size=\"medium\">Evolutionary conservation</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                        <FormGroup style={{ marginLeft: \"3em\" }}>\n                            { TRACKS[\"Evolutionary conservation\"].map(track => (\n                                <FormControlLabel\n                                    key={track[0]}\n                                    control={<Checkbox checked={(selectedTracks.find(x => x === track[0])?.length || 0) > 0} />}\n                                    label={track[0]}\n                                    onChange={() => toggleTrack(track)}\n                                />\n                            ))}\n                        </FormGroup>\n                    </AccordionDetails>\n                </Accordion>\n                <div style={{ marginTop: \"1em\", width: \"100%\", textAlign: \"right\" }}>\n                    <Button bvariant='outlined' btheme='light' onClick={onAccept}>OK</Button>&nbsp;\n                    <Button\n                        bvariant='outlined'\n                        btheme='light'\n                        onClick={() => { props.onCancel && props.onCancel(); setSelectedTracks(props.initialSelection.map(x => x[0])); }}\n                    >\n                        cancel\n                    </Button>\n                </div>\n            </Box>\n        </Modal>\n    );\n};\nexport default DeepLearnedTrackModal;\n","import { gql, useQuery } from '@apollo/client';\nimport { BigWigData, BigBedData, BigZoomData } from \"bigwig-reader\";\nimport { associateBy } from 'queryz';\nimport React, { RefObject, useEffect, useMemo, useState } from 'react';\nimport { DenseBigBed, EmptyTrack, FullBigWig } from 'umms-gb';\nimport { BigRequest, RequestError } from 'umms-gb/dist/components/tracks/trackset/types';\nimport { ValuedPoint } from 'umms-gb/dist/utils/types';\n//import { GenomicRange } from '../../../HomePage/Browser/Explorer/GenomeExplorer';\nimport CCRETooltip from '../../../../genome-explorer/CCRETooltip';\nexport type GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}\n\nexport const DEFAULT_TRACKS = (assembly: string): Map<string, { url: string }> => new Map([\n    [ \"cCREs\", { url: `gs://gcp.wenglab.org/psychscreen/${assembly}-cCREs-DCC.bigBed` } ],\n    [ \"DNase\", { url: `gs://gcp.wenglab.org/dnase.${assembly}.sum.bigWig` } ],\n    [ \"fetal brain cCREs\", { url: \"gs://gcp.wenglab.org/psychscreen-tracks/ENCFF586GWE.7group.bigBed\" } ],\n    [ \"fetal brain DNase\", { url: \"https://encode-public.s3.amazonaws.com/2020/11/06/ffd0cc4b-0abd-498a-be12-e1b570c0fa50/ENCFF586GWE.bigWig\" } ],\n    [ \"motifs\", { url: \"gs://gcp.wenglab.org/all-conserved-motifs.merged.bigBed\" } ]\n]);\n\nexport const TRACK_ORDER = [ \"DNase\", \"fetal brain cCREs\", \"fetal brain DNase\", \"motifs\" ];\n\nexport const COLOR_MAP: Map<string, string> = new Map([\n    [ \"DNase\", \"#06DA93\" ],\n    [ \"H3K4me3\", \"#00b0d0\" ]\n]);\n\nexport const tracks = (assembly: string, pos: GenomicRange) => [ \"cCREs\", ...TRACK_ORDER ].map(x => ({ chr1: pos.chromosome!, start: pos.start, end: pos.end, ...DEFAULT_TRACKS(assembly).get(x)!, preRenderedWidth: 1400 }));\n\nexport const BIG_QUERY = gql`\nquery BigRequests($bigRequests: [BigRequest!]!) {\n    bigRequests(requests: $bigRequests) {\n        data\n        error {\n            errortype,\n            message\n        }\n    }\n}\n`;\n\nexport type BigResponseData = BigWigData[] | BigBedData[] | BigZoomData[] | ValuedPoint[];\n\nexport type BigResponse = {\n    data: BigResponseData;\n    error: RequestError;\n}\n\nexport type BigQueryResponse = {\n    bigRequests: BigResponse[];\n};\n\ntype DefaultTrackProps = {\n    tracks: BigRequest[];\n    domain: GenomicRange;\n    onHeightChanged?: (i: number) => void;\n    cCREHighlight?: GenomicRange;\n    cCREHighlights?: Set<string>;\n    svgRef?: RefObject<SVGSVGElement>;\n    assembly: string;\n    oncCREClicked?: (accession: string) => void;\n    oncCREMousedOver?: (coordinates?: GenomicRange) => void;\n    oncCREMousedOut?: () => void;\n    onSettingsClick?: () => void;\n};\n\nconst BIOSAMPLE = {\n    name: \"Fetal Brain\",\n    dnase: \"ENCSR475VQD\",\n    h3k4me3: null,\n    h3k27ac: null,\n    ctcf: null,\n    dnase_signal: \"ENCFF586GWE\",\n    h3k4me3_signal: null,\n    h3k27ac_signal: null,\n    ctcf_signal: null\n};\n\nconst DefaultTracks: React.FC<DefaultTrackProps> = props => {\n    const { data, loading } = useQuery<BigQueryResponse>(BIG_QUERY, { variables: { bigRequests: props.tracks }});\n    useEffect( () => { props.onHeightChanged && props.onHeightChanged(105); }, [ props.onHeightChanged ]);\n    const cCRECoordinateMap = useMemo( () => associateBy((data?.bigRequests[0].data || []) as BigBedData[], x => x.name, x => ({ chromosome: x.chr, start: x.start, end: x.end })), [ data ]);\n    const [ settingsMousedOver, setSettingsMousedOver ] = useState(false);\n    return loading || (data?.bigRequests.length || 0) < 2 ? <EmptyTrack width={1400} height={40} transform=\"\" id=\"\" text=\"Loading...\" /> : (\n        <>\n            <g className=\"encode-fetal-brain\">\n                <rect y={10} height={55} fill=\"none\" width={1400} /> \n            </g>\n            <EmptyTrack\n                height={40}\n                width={1400}\n                transform=\"\"\n                id=\"\"\n                text=\"Fetal brain cCREs and aggregated DNase-seq signal from ENCODE\"\n            />\n            <DenseBigBed\n                width={1400}\n                height={30}\n                domain={props.domain}\n                id=\"fbcCREs\"\n                transform=\"translate(0,40)\"\n                data={(data!.bigRequests[2].data as BigBedData[]).map(x => ({ ...x, color: props.cCREHighlights?.has(x.name || \"\") ? \"#0000ff\" : x.color }))}\n                tooltipContent={rect => <CCRETooltip { ...rect} biosample={BIOSAMPLE} assembly={props.assembly.toLocaleLowerCase()} />}\n                svgRef={props.svgRef}\n                onClick={x => props.oncCREClicked && x.name && props.oncCREClicked(x.name)}\n                onMouseOver={x => props.oncCREMousedOver && x.name && props.oncCREMousedOver(cCRECoordinateMap.get(x.name))}\n                onMouseOut={props.oncCREMousedOut}\n            />\n            <FullBigWig\n                transform=\"translate(0,75)\"\n                width={1400}\n                height={30}\n                domain={props.domain}\n                id=\"fbDNase\"\n                color=\"#06da93\"\n                data={data!.bigRequests[3].data as BigWigData[]}\n            />\n            <EmptyTrack\n                height={40}\n                width={1400}\n                transform=\"translate(0,110)\"\n                text=\"Evolutionarily Conserved TF Motif Instances\"\n                id=\"\"\n            />\n            <DenseBigBed\n                transform=\"translate(0,135)\"\n                width={1400}\n                height={30}\n                domain={props.domain}\n                id=\"motifs\"\n                color=\"#880088\"\n                data={data!.bigRequests[4].data as BigBedData[]}\n            />\n            <g className=\"tf-motifs\">\n                <rect y={110} height={55} fill=\"none\" width={1400} /> \n            </g>\n           \n            { settingsMousedOver && (\n                <rect width={1400} height={210} transform=\"translate(0,-20)\" fill=\"#4c1f8f\" fillOpacity={0.1} />\n            )}\n            <rect\n                transform=\"translate(0,-20)\"\n                height={210}\n                width={40}\n                fill=\"#ffffff\"\n            />\n            <rect\n                height={210}\n                width={15}\n                fill=\"#4c1f8f\"\n                stroke=\"#000000\"\n                fillOpacity={settingsMousedOver ? 1 : 0.6}\n                onMouseOver={() => setSettingsMousedOver(true)}\n                onMouseOut={() => setSettingsMousedOver(false)}\n                strokeWidth={1}\n                transform=\"translate(20,-20)\"\n                onClick={props.onSettingsClick}\n            />\n            <text transform=\"rotate(270) translate(-150,10)\" fill=\"#bf2604\">\n                Regulatory Features\n            </text>\n        </>\n    );\n}\nexport default DefaultTracks;\n\n/*\n            <DenseBigBed\n                width={1400}\n                height={30}\n                domain={props.domain}\n                id=\"cCREs\"\n                transform=\"translate(0,40)\"\n                data={cCREData || []}\n                tooltipContent={rect => <CCRETooltip { ...rect} assembly={props.assembly.toLocaleLowerCase()} />}\n                svgRef={props.svgRef}\n                onClick={x => props.oncCREClicked && x.name && props.oncCREClicked(x.name)}\n                onMouseOver={x => props.oncCREMousedOver && x.name && props.oncCREMousedOver(cCRECoordinateMap.get(x.name))}\n                onMouseOut={props.oncCREMousedOut}\n            />\n            <FullBigWig\n                transform=\"translate(0,75)\"\n                width={1400}\n                height={30}\n                domain={props.domain}\n                id=\"DNase\"\n                color=\"#06da93\"\n                data={data!.bigRequests[1].data as BigWigData[]}\n            />\n            <EmptyTrack\n                height={40}\n                width={1400}\n                transform=\"translate(0,110)\"\n                id=\"\"\n                text=\"Fetal brain cCREs and aggregated DNase-seq signal from ENCODE\"\n            />\n*/\n","import { gql, useQuery } from '@apollo/client';\nimport React, { useMemo } from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nexport const COLORS: Map<string, string> = new Map([\n    [ \"PLS\", \"#ff0000\" ],\n    [ \"pELS\", \"#ffa700\" ],\n    [ \"dELS\", \"#ffcd00\" ],\n    [ \"DNase-H3K4me3\", \"#ffaaaa\" ],\n    [ \"CTCF-only\", \"#00b0f0\" ]\n]);\n\nexport const GROUPS: Map<string, string> = new Map([\n    [ \"PLS\", \"promoter-like\" ],\n    [ \"pELS\", \"proximal enhancer-like\" ],\n    [ \"dELS\", \"distal enhancer-like\" ],\n    [ \"DNase-H3K4me3\", \"DNase-H3K4me3\" ],\n    [ \"CTCF-only\", \"CTCF-only\" ]\n]);\n\nexport type BiosampleEntry = {\n    name: string;\n    tissue?: string;\n    dnase: string | null;\n    h3k4me3: string | null;\n    h3k27ac: string | null;\n    ctcf: string | null;\n    dnase_signal: string | null;\n    h3k4me3_signal: string | null;\n    h3k27ac_signal: string | null;\n    ctcf_signal: string | null;\n};\n\ntype CCRETooltipProps = {\n    start: number;\n    end: number;\n    name?: string;\n    assembly?: string;\n    biosample?: BiosampleEntry;\n};\n\nconst QUERY = gql`\nquery cCRE($assembly: String!, $accession: [String!], $experiments: [String!]) {\n  cCREQuery(assembly: $assembly, accession: $accession) {\n    group\n    zScores(experiments: $experiments) {\n      experiment\n      score\n    }\n  }\n}\n`;\n\ntype QueryResponse = {\n    cCREQuery: {\n        group: string;\n        zScores: {\n            experiment: string;\n            score: number;\n        }[];\n    }[];\n};\n\nconst biosampleExperiments = (x: BiosampleEntry) => [ x.dnase, x.h3k4me3, x.h3k27ac, x.ctcf ].filter(xx => !!xx);\n\nconst MARKS = [ \"DNase\", \"H3K4me3\", \"H3K27ac\", \"CTCF\" ];\nconst marks = (x: BiosampleEntry) => [ x.dnase, x.h3k4me3, x.h3k27ac, x.ctcf ].map((x, i) => x && MARKS[i]).filter(xx => !!xx);\n\nconst CCRETooltip: React.FC<CCRETooltipProps> = props => {\n    \n    const experiments = useMemo( () => props.biosample ? biosampleExperiments(props.biosample) : [ \"dnase\", \"h3k4me3\", \"h3k27ac\", \"ctcf\" ], [ props ]);\n    const { data, loading } = useQuery<QueryResponse>(QUERY, {\n        variables: {\n            assembly: props.assembly!,\n            accession: props.name!,\n            experiments \n        }\n    });\n    \n    return (\n        <div style={{ border: \"1px solid\", padding: \"0.75em\", background: \"#ffffff\" }}>\n            { loading || !data?.cCREQuery[0] ? <CircularProgress color=\"inherit\"/> : (\n                <>\n                    <svg height={18}>\n                        <rect width={10} height={10} y={3} fill={COLORS.get(data.cCREQuery[0].group || \"\") || \"#06da93\" } />\n                        <text x={16} y={12}>{props.name} ⸱ {GROUPS.get(data.cCREQuery[0].group || \"\")}</text>\n                    </svg>\n                    Click for details about this cCRE<br /><br />\n                    <strong>{props.biosample ? \"Z-scores in \" + props.biosample.name : \"Max Z-scores across all biosamples:\"}</strong><br />\n                    { (props.biosample ? marks(props.biosample) : MARKS).map( (x, i) => (\n                        <React.Fragment key={i}>\n                            <strong>{x}</strong>: {data.cCREQuery[0].zScores.find(xx => xx.experiment === experiments[i])?.score.toFixed(2)}<br />\n                        </React.Fragment>\n                    ))}\n                </>\n            )}\n        </div>\n    );\n\n};\nexport default CCRETooltip;\n","import { GraphQLImportanceTrack } from 'bpnet-ui';\nimport { ImportanceTrackDataPoint } from 'bpnet-ui/dist/components/ImportanceTrack/ImportanceTrack';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { EmptyTrack, FullBigWig } from 'umms-gb';\nimport { RawLogo, DNAAlphabet } from 'logojs-react';\nimport { GenomicRange } from '../web/Portals/GenePortal/AssociatedxQTL';\nimport { useQuery } from '@apollo/client';\nimport { BigQueryResponse, BIG_QUERY } from '../web/Portals/GenePortal/Browser/DefaultTracks';\nimport { BigBedData, BigWigData } from \"bigwig-reader\";\nimport { linearTransform } from '../web/Portals/GenePortal/violin/utils';\n\ntype TitledImportanceTrackProps = {\n    onHeightChanged?: (height: number) => void;\n    height: number;\n    title: string;\n    transform?: string;\n    domain: GenomicRange;\n    signalURL: string;\n    imputedSignalURL?: string;\n    positiveRegionURL?: string;\n    negativeRegionURL?: string;\n    neutralRegions?: BigBedData[];\n    width: number;\n    color?: string;\n};\n\ntype TitledImportanceTrackHighlight = {\n    coordinates: [ number, number ];\n    sequence: string;\n    motif: MotifMatch;\n    reverseComplement?: boolean;\n};\n\ntype MotifMatch = {\n    pwm: number[][];\n    tomtom_matches: {\n        target_id: string;\n        jaspar_name: string;\n        e_value: number;\n    }[];\n};\n\ntype MotifResponse = {\n    data: {\n        meme_motif_search: {\n            results: [{\n                motif: MotifMatch;\n                reverseComplement: boolean;\n            }];\n        }[];\n    };\n};\n\ntype SequenceResponse = {\n    data: {\n        bigRequests: {\n            data: string;\n        }[];\n    };\n};\n\nconst MOTIF_QUERY = `\nquery MemeMotifSearch($pwms: [[[Float!]]]!) {\n    meme_motif_search(pwms: $pwms, assembly: \"GRCh38\", limit: 1, offset: 1) {\n      results {\n        motif {\n          pwm\n          tomtom_matches {\n            target_id\n            jaspar_name\n            e_value\n          }\n        }\n        reverseComplement\n      }\n    }\n  }  \n`;\n\nconst SEQUENCE_QUERY = `\nquery($requests: [BigRequest!]!) {\n    bigRequests(requests: $requests) {\n        data\n    }\n}\n`;\n\nfunction seqToPWM(sequence: string[]): number[][] {\n    const M = { 'A': [ 1, 0, 0, 0 ], 'C': [ 0, 1, 0, 0 ], 'G': [ 0, 0, 1, 0], 'T': [ 0, 0, 0, 1 ] };\n    return sequence.map(x => M[x]);\n}\n\nexport const reverseComplement = (ppm: number[][]): number[][] =>\n    ppm && ppm[0] && ppm[0].length === 4\n        ? ppm.map(inner => inner.slice().reverse()).reverse()\n        : ppm.map(entry => [entry[3], entry[2], entry[1], entry[0], entry[5], entry[4]]).reverse();\n\nexport const logLikelihood = (backgroundFrequencies: any) => (r: any) => {\n    let sum = 0.0;\n    r.map((x: any, i: any) => (sum += x === 0 ? 0 : x * Math.log2(x / (backgroundFrequencies[i] || 0.01))));\n    return r.map((x: any) => {\n        const v = x * sum;\n        return v <= 0.0 ? 0.0 : v / 2;\n    });\n};\n\ntype TOMTOMMatch = {\n    e_value: number;\n    jaspar_name?: string | null;\n    target_id: string;\n};\n\nfunction best(x: TOMTOMMatch[]): TOMTOMMatch {\n    return x.sort((a, b) => a.e_value - b.e_value)[0];\n}\n\ntype ImportantRegionTrackProps = {\n    positiveRegions: BigBedData[];\n    negativeRegions: BigBedData[];\n    neutralRegions: BigBedData[];\n    domain: GenomicRange;\n    width: number;\n    onRegionClick?: (coordinates: [number, number]) => void;\n};\n\nconst ImportantRegions: React.FC<ImportantRegionTrackProps> = props => {\n    const transform = linearTransform([ props.domain.start, props.domain.end ], [ 0, props.width ]);\n    return (\n        <g transform=\"translate(0,63)\">\n            { props.neutralRegions.map((r, i) => (\n                <rect\n                    key={`neutral_${i}`}\n                    y={4}\n                    height={3}\n                    x={transform(r.start)}\n                    width={transform(r.end) - transform(r.start)}\n                    fill=\"#000000\"\n                />\n            ))}\n            { props.positiveRegions.filter(r => r.end - r.start > 3).map((r, i) => (\n                <rect\n                    key={`important_${i}`}\n                    y={0}\n                    height={12}\n                    x={transform(r.start - 0.5)}\n                    width={transform(r.end - 0.5) - transform(r.start - 0.5)}\n                    fill=\"#2d4f25\"\n                    onClick={() => props.onRegionClick && props.onRegionClick([ r.start, r.end ])}\n                />\n            ))}\n            { props.negativeRegions.filter(r => r.end - r.start > 3).map((r, i) => (\n                <rect\n                    key={`important_${i}`}\n                    y={0}\n                    height={12}\n                    x={transform(r.start)}\n                    width={transform(r.end - 0.5) - transform(r.start + 0.5)}\n                    fill=\"#361c1c\"\n                    fillOpacity={0.2}\n                    onClick={() => props.onRegionClick && props.onRegionClick([ r.start, r.end ])}\n                />\n            ))}\n        </g>\n    );\n};\n\nconst TitledImportanceTrack: React.FC<TitledImportanceTrackProps> = props => {\n    const { height, transform, signalURL, width, title, domain, imputedSignalURL, color, negativeRegionURL, positiveRegionURL } = props;\n    useEffect( () => props.onHeightChanged && props.onHeightChanged(height), [ height, props.onHeightChanged ]);\n\n    const coordinateMap = useCallback((coordinate: number) => (\n        coordinate * width / (domain.end - domain.start)\n    ), [ domain ]);\n\n    const [ selectedHighlight, setSelectedHighlight ] = useState<number | null>(null);\n    const [ highlights, setHighlights ] = useState<TitledImportanceTrackHighlight[]>([]);\n    const onSelectionEnd = useCallback((coordinates: [ number, number ], values: ImportanceTrackDataPoint[]) => {\n        const sequence = values.map(x => x.base);\n        fetch(\"https://ga.staging.wenglab.org/graphql\", {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ query: MOTIF_QUERY, variables: { pwms: [ seqToPWM(sequence) ] } })\n        })\n            .then(response => response.json())\n            .then(data => setHighlights([ ...highlights, {\n                sequence: sequence.join(\"\"),\n                coordinates,\n                motif: (data as MotifResponse).data.meme_motif_search[0].results[0].motif,\n                reverseComplement: (data as MotifResponse).data.meme_motif_search[0].results[0].reverseComplement\n            }]))\n            .catch(error => console.error(error));\n    }, [ highlights ]);\n    const onImportantRegionClick = useCallback((coordinates: [ number, number ]) => {\n        fetch(\"https://ga.staging.wenglab.org/graphql\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                query: SEQUENCE_QUERY,\n                variables: {\n                    requests: {\n                        url: \"gs://gcp.wenglab.org/hg38.2bit\",\n                        chr1: domain.chromosome,\n                        chr2: domain.chromosome,\n                        start: coordinates[0],\n                        end: coordinates[1] + 1\n                    }\n                }\n            })\n        })\n            .then(response => response.json())\n            .then(data => onSelectionEnd(\n                coordinates.map(x => x - domain.start) as [ number, number ],\n                (data as SequenceResponse).data.bigRequests[0].data[0].split(\"\").map(x => ({ base: x, importance: 0 }))\n            ));\n    }, [ onSelectionEnd, domain ]);\n\n    const bigRequests = useMemo( () => {\n        const bw = [{\n            chr1: domain.chromosome!,\n            start: domain.start,\n            end: domain.end,\n            preRenderedWidth: width,\n            url: imputedSignalURL\n        }];\n        if (negativeRegionURL === undefined || positiveRegionURL === undefined) return bw;\n        return [\n            ...bw,\n            {\n                chr1: domain.chromosome!,\n                start: domain.start,\n                end: domain.end,\n                preRenderedWidth: width,\n                url: negativeRegionURL\n            }, {\n                chr1: domain.chromosome!,\n                start: domain.start,\n                end: domain.end,\n                preRenderedWidth: width,\n                url: positiveRegionURL\n            }\n        ];\n    }, [ domain, negativeRegionURL, positiveRegionURL, imputedSignalURL ]);\n    const { data, loading } = useQuery<BigQueryResponse>(BIG_QUERY, { variables: { bigRequests }, skip: imputedSignalURL === undefined });\n    return (\n        <g transform={transform}>\n            <EmptyTrack\n                transform=''\n                text={title}\n                height={30}\n                width={1400}\n                id=\"\"\n            />\n            { !loading && positiveRegionURL !== undefined && (\n                <ImportantRegions\n                    neutralRegions={props.neutralRegions || []}\n                    negativeRegions={(data?.bigRequests[1].data as BigWigData[]) || []}\n                    positiveRegions={(data?.bigRequests[2].data as BigWigData[]) || []}\n                    width={width}\n                    domain={domain}\n                    onRegionClick={onImportantRegionClick}\n                />\n            )}\n            { !loading && imputedSignalURL !== undefined && (\n                <FullBigWig\n                    transform=\"translate(0,15)\"\n                    width={1400}\n                    height={height - (props.domain.end - props.domain.start <= 10000 ? 85 : 30)}\n                    domain={domain}\n                    id=\"NeuN+\"\n                    color={color}\n                    data={data?.bigRequests[0].data as BigWigData[]}\n                    noTransparency\n                />\n            ) }\n            {(props.domain.end - props.domain.start <= 10000) && (\n                <g transform={`translate(0,${loading || imputedSignalURL === undefined ? 30 : 80})`}>\n                    <GraphQLImportanceTrack\n                        width={width}\n                        height={height - (loading || imputedSignalURL === undefined ? 30 : 80)}\n                        endpoint=\"https://ga.staging.wenglab.org\"\n                        signalURL={signalURL}\n                        sequenceURL=\"gs://gcp.wenglab.org/hg38.2bit\"\n                        coordinates={domain as any}\n                        allowSelection\n                        onSelectionEnd={onSelectionEnd}\n                    />\n                </g>\n            )}\n            { highlights.map((highlight, i) => (\n                <rect\n                    key={`highlight_${i}`}\n                    transform={`translate(${coordinateMap(highlight.coordinates[0])},30)`}\n                    width={coordinateMap(highlight.coordinates[1]) - coordinateMap(highlight.coordinates[0])}\n                    fill=\"#ff0000\"\n                    fillOpacity={0.1}\n                    height={100}\n                    onMouseOver={() => setSelectedHighlight(i)}\n                    onMouseOut={() => setSelectedHighlight(null)}\n                />\n            ))}\n            { selectedHighlight !== null && highlights[selectedHighlight] && highlights[selectedHighlight].motif && (\n                <g\n                    transform={`translate(${coordinateMap(highlights[selectedHighlight].coordinates[0]) - 120},-150)`}\n                >\n                    <rect fill=\"#ffffff\" stroke=\"#000000\" strokeWidth={2} width={300} height={200}>\n                    </rect>\n                    <g transform=\"translate(10,60)\">\n                        <RawLogo\n                            alphabet={DNAAlphabet}\n                            values={(highlights[selectedHighlight].reverseComplement ? reverseComplement(highlights[selectedHighlight].motif.pwm) : highlights[selectedHighlight].motif.pwm).map(logLikelihood([ 0.25, 0.25, 0.25, 0.25 ]))}\n                            glyphWidth={10}\n                            stackHeight={50}\n                            x={0}\n                            y={0}\n                        />\n                        { highlights[selectedHighlight].motif.tomtom_matches && highlights[selectedHighlight].motif.tomtom_matches.length > 0 && (\n                            <text x={0} y={80} fontWeight=\"bold\">\n                                {best(highlights[selectedHighlight].motif.tomtom_matches).target_id.startsWith(\"MA\")\n                                    ? best(highlights[selectedHighlight].motif.tomtom_matches).jaspar_name\n                                    : best(highlights[selectedHighlight].motif.tomtom_matches).target_id}\n                            </text>\n                        )}\n                    </g>\n                </g>\n            )}\n        </g>\n    );\n};\nexport default TitledImportanceTrack;\n","import { useQuery } from '@apollo/client';\nimport React, { RefObject, useEffect, useMemo, useState } from 'react';\nimport { GenomicRange } from '../web/Portals/GenePortal/AssociatedxQTL';\nimport { BigQueryResponse, BIG_QUERY } from './EpigeneticTracks';\nimport DeepLearnedTrackModal from './SettingsModals/DeepLearnedTracks';\nimport TitledImportanceTrack from './TitledImportanceTrack';\nimport { BigBedData } from 'bigwig-reader';\n\nconst CELL_TYPES = new Map([\n    [ \"astrocytes\", \"Astrocyte_1\" ],\n    [ \"GABA-ergic type I\", \"GABAergic_Neuron_1\" ],\n    [ \"GABA-ergic type II\", \"GABAergic_Neuron_2\" ],\n    [ \"glutaminergic type I\", \"Glutaminergic_Neuron_1\" ],\n    [ \"glutaminergic type II\", \"Glutaminergic_Neuron_2\" ],\n    [ \"microglia\", \"Microglia\" ],\n    [ \"oligodendrocytes\", \"Oligodendrocyte\" ],\n    [ \"oligodendrocyte precursors\", \"Oligodendrocyte_Precursor\" ],\n    [ \"putamen glia\", \"NeuN-\" ],\n    [ \"putamen neurons\", \"NeuN+\" ]\n]);\n\ntype DeepLearnedModelTrackProps = {\n    domain: GenomicRange;\n    onHeightChanged?: (i: number) => void;\n    svgRef?: RefObject<SVGSVGElement>;\n    onSettingsClicked?: () => void;\n};\n\n\n\nexport const DeepLearnedModelTracks: React.FC<DeepLearnedModelTrackProps>\n    = ({ domain, onHeightChanged, onSettingsClicked }) => {\n\n        // manage displayed tracks, compute height, and pass height back to parent\n        const [ displayedTracks, setDisplayedTracks ] = useState<[ string, string ][]>([\n            [ \"putamen glia\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_glia\" ],\n            [ \"putamen neurons\", \"gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_neurons\" ]\n        ]);\n        const height = useMemo(\n            () => domain.end - domain.start <= 10000 && displayedTracks.find(x => x[0] === \"241-way mammalian phylo-P\")?.length\n                ? 130 + displayedTracks.length * 130\n                : displayedTracks.length * 130,\n            [ displayedTracks, domain ]\n        );\n        useEffect( () => {\n            onHeightChanged && onHeightChanged(height);\n        }, [ onHeightChanged, height ]);\n\n        // manage settings modal\n        const [ settingsMousedOver, setSettingsMousedOver ] = useState(false);\n        const [ settingsModalShown, setSettingsModalShown ] = useState(false);\n\n        // request bCREs\n        const bigRequests = useMemo( () => [{\n            chr1: domain.chromosome!,\n            start: domain.start,\n            end: domain.end,\n            preRenderedWidth: 1400,\n            url: \"gs://gcp.wenglab.org/GTEx-psychscreen/tracks/data/adult_bCREs.bigBed\"\n        }], [ domain ]);\n        const { data, loading } = useQuery<BigQueryResponse>(BIG_QUERY, { variables: { bigRequests }});\n\n        return (\n            <>\n                <DeepLearnedTrackModal\n                    open={settingsModalShown}\n                    onCancel={() => setSettingsModalShown(false)}\n                    onAccept={x => { setDisplayedTracks(x); setSettingsModalShown(false); }}\n                    initialSelection={displayedTracks}\n                />\n                { (domain.end - domain.start) <= 10000 && displayedTracks.find(x => x[0] === \"241-way mammalian phylo-P\")?.length && (\n                    <TitledImportanceTrack\n                        transform={`translate(0,${(displayedTracks.length - 1) * 130})`}\n                        title=\"Mammalian 241-way PhyloP from Zoonomia\"\n                        height={130}\n                        width={1400}\n                        signalURL=\"gs://gcp.wenglab.org/hg38.phyloP100way.bigWig\"\n                        domain={domain}\n                        key={domain.start}\n                        neutralRegions={[]}\n                    />\n                )}\n                { displayedTracks.filter(x => x[0] !== \"241-way mammalian phylo-P\").map((x, i) => (\n                    <TitledImportanceTrack\n                        key={`${i}_${domain.start}`}\n                        transform={`translate(0,${130 * i})`}\n                        title={x[0]}\n                        height={130}\n                        width={1400}\n                        signalURL={`${x[1]}/${CELL_TYPES.get(x[0])!}.profile_scores.bw`}\n                        imputedSignalURL={`${x[1]}/predictions_${CELL_TYPES.get(x[0])!}_chrombpnet_nobias.bw`}\n                        positiveRegionURL={`${x[1]}/${CELL_TYPES.get(x[0])!}.profile_scores.bw.pos.bb`}\n                        negativeRegionURL={`${x[1]}/${CELL_TYPES.get(x[0])!}.profile_scores.bw.neg.bb`}\n                        neutralRegions={loading || !data?.bigRequests[0].data ? [] : (data.bigRequests[0].data as BigBedData[])}\n                        domain={domain}\n                    />\n                ))}\n                { settingsMousedOver && (\n                    <rect width={1400} height={height} transform=\"translate(0,-0)\" fill=\"#194023\" fillOpacity={0.1} />\n                )}\n                <rect\n                    transform=\"translate(0,0)\"\n                    height={height}\n                    width={40}\n                    fill=\"#ffffff\"\n                />\n                <rect\n                    height={height}\n                    width={15}\n                    fill=\"#194023\"\n                    stroke=\"#000000\"\n                    fillOpacity={settingsMousedOver ? 1 : 0.6}\n                    onMouseOver={() => setSettingsMousedOver(true)}\n                    onMouseOut={() => setSettingsMousedOver(false)}\n                    strokeWidth={1}\n                    transform=\"translate(20,0)\"\n                    onClick={() => {onSettingsClicked && onSettingsClicked(); setSettingsModalShown(true); }}\n                />\n                <text transform={`rotate(270) translate(-${height / 2},12)`} textAnchor=\"middle\" fill=\"#194023\">\n                    Deep Learned Models\n                </text>\n            </>\n        );\n\n    };\n","\nimport { gql, useQuery } from '@apollo/client';\nimport React, {useMemo, useRef, useState, useCallback}  from 'react';\nimport CytobandView from './Explorer/Cytobands';\nimport { GenomeBrowser, RulerTrack, UCSCControls } from 'umms-gb';\nimport EGeneTracks from './EGeneTracks';\nimport { EpigeneticTracks, tracks, VariantTracks } from '../../../../genome-explorer';\nimport { URL_MAP } from '../../DiseaseTraitPortal/DiseaseTraitPortal';\nimport { DeepLearnedModelTracks } from '../../../../genome-explorer/DeepLearnedModels';\n\nexport const LD_QUERY = gql`\nquery s($id: [String]) {\n  snp: snpQuery(assembly: \"hg38\", snpids: $id) {\n    linkageDisequilibrium(rSquaredThreshold: 0.7, population: EUROPEAN) {\n      id\n      rSquared\n      coordinates(assembly: \"hg38\") {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n}\n`;\n\nexport type LDQueryResponse = {\n    snp: {\n        linkageDisequilibrium: LDEntry[];\n    }[];\n};\n\nexport type GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}\n\nexport type CCREEntry = {\n    accession: string;\n    coordinates: GenomicRange;\n    rDHS: string;\n    group?: string;\n    dnaseZ?: number;\n    h3k4me3Z?: number;\n    h3k27acZ?: number;\n    ctcfZ?: number;\n    zScores?: {\n        score: number;\n    }[];\n};\n\n\nexport type LDEntry = {\n    id: string;\n    rSquared: number;\n    coordinates: GenomicRange;\n};\n\nexport function expandCoordinates(coordinates: GenomicRange, l = 20000): GenomicRange {\n    return {\n        chromosome: coordinates.chromosome,\n        start: coordinates.start - l < 0 ? 0 : coordinates.start - l,\n        end: coordinates.end + l\n    };\n}\n\n\nexport const CCRE_FIELDS = gql`\nfragment CCREFields on CCRE {\n    accession\n    coordinates {\n        chromosome\n        start\n        end\n    }\n    rDHS\n    group\n    dnaseZ: maxZ(assay: \"dnase\")\n    h3k4me3Z: maxZ(assay: \"h3k4me3\")\n    h3k27acZ: maxZ(assay: \"h3k27ac\")\n    ctcfZ: maxZ(assay: \"ctcf\")\n}\n`;\n\nconst SNP_COORDINATE_QUERY = gql`\n${CCRE_FIELDS}\nquery s($id: [String]) {\n  snpQuery(assembly: \"hg38\", snpids: $id) {\n    coordinates {\n        chromosome\n        start\n        end\n    }\n    id\n    intersecting_ccres {\n      intersecting_ccres {\n        ...CCREFields\n      }\n    }\n  }\n}`;\n\nexport type QTLEntry = {\n    coordinates: {\n        chromosome: string;\n        start: number;\n        end: number;\n    };\n    id: string;\n    intersecting_ccres: {\n        intersecting_ccres: CCREEntry[];\n    };\n    eQTL: EQTL;\n};\n\nexport type SNPCoordinateResponse = {\n    snpQuery: QTLEntry[];\n};\n\nconst SNP_QUERY = gql`\nquery s($chromosome: String, $start: Int, $end: Int, $coordinates: [GenomicRangeInput], $assembly: String!) {\n  snpQuery(assembly: \"hg38\", coordinates: $coordinates, common: true) {\n    id\n    coordinates {\n      chromosome\n      start\n      end\n    }\n  }\n  gene(chromosome: $chromosome, start: $start, end: $end, assembly: $assembly) {\n    name\n    strand\n    transcripts {\n      name\n      strand\n      exons {\n          coordinates {\n              chromosome\n              start\n              end\n          }\n      }\n      coordinates {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n}\n`;\n\nexport type Transcript = {\n    id: string;\n    name: string;\n    strand: string;\n    coordinates: GenomicRange;\n};\nexport type SNPQueryResponse = {\n    snpQuery: {\n        id: string;\n        coordinates: GenomicRange;\n    }[];\n    gene: {\n        name: string;\n        strand: string;\n        transcripts: Transcript[];\n    }[];\n};\n\nconst QUERY = gql`\n${CCRE_FIELDS}\nquery q($assembly: String!, $name: [String]) {\n  queriedGene: gene(name: $name, assembly: $assembly) {\n    transcripts {\n      associated_ccres_pls {\n        intersecting_ccres {\n          ...CCREFields\n        }\n      }\n    }\n    fetal_eqtls(population: \"shared\") {\n      eqtls {\n        snp\n        fdr\n        nominal_pval\n        slope\n      }\n    }\n  }\n  queriedTranscript: transcript(name: $name, assembly: $assembly) {\n    associated_ccres_pls {\n      intersecting_ccres {\n        ...CCREFields\n      }\n    }\n    fetal_isoqtls(population: \"shared\") {\n      isoqtls {\n        snp\n        fdr\n        nominal_pval\n        slope\n      }\n    }\n  }\n}\n`;\n\nexport type EQTL = {\n    snp: string;\n    fdr: number;\n    nominal_pval: number;\n    slope: number;\n};\n\nexport type GeneQueryResponse = {\n    queriedGene: {\n        transcripts: {\n            associated_ccres_pls: {\n                intersecting_ccres: CCREEntry[];\n            };\n        }[];\n        fetal_eqtls: {\n            eqtls: EQTL[];\n        };\n    }[];\n    queriedTranscript: {\n        associated_ccres_pls: {\n            intersecting_ccres: CCREEntry[];\n        };\n        fetal_isoqtls: {\n            isoqtls: {\n                snp: string;\n                fdr: number;\n                nominal_pval: number;\n                slope: number;\n            }[];\n        };\n    }[];\n};\n\nexport function useGenePageData(expandedCoordinates: GenomicRange, assembly: string, name: string, resolvedTranscript?: boolean) {\n\n    const { data, loading } = useQuery<GeneQueryResponse>(QUERY, {\n        variables: {\n            coordinates: expandedCoordinates,\n            ...expandedCoordinates,\n            assembly,\n            name\n        }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t}\n    });\n\n    const snpCoordinateResponse = useQuery<SNPCoordinateResponse>(SNP_COORDINATE_QUERY, {\n        variables: {\n            id: [\n                ...(data?.queriedGene[0]?.fetal_eqtls.eqtls.map(x => x.snp) || []),\n                ...(data?.queriedTranscript[0]?.fetal_isoqtls.isoqtls.map(x => x.snp) || [])\n            ]\n        }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t},\n        skip: loading\n    });\n    \n    const coordinates = useMemo( () => expandCoordinates(/* {\n        chromosome: snpCoordinateResponse.data?.snpQuery[0]?.coordinates.chromosome || \"\",\n        start: Math.min(...(snpCoordinateResponse.data?.snpQuery.map(x => x.coordinates.start) || [0])),\n        end: Math.max(...(snpCoordinateResponse.data?.snpQuery.map(x => x.coordinates.end) || [0]))\n    }*/ expandedCoordinates, 100000), [ expandedCoordinates ]);\n\n    const snpResponse = useQuery<SNPQueryResponse>(SNP_QUERY, {\n        variables: { ...coordinates, coordinates, assembly },\n        skip: loading || snpCoordinateResponse.loading\n    });\n\n    const groupedTranscripts = useMemo( () => snpResponse.data?.gene.map(\n        x => ({\n            ...x,\n            transcripts: x.transcripts.map(xx => ({ ...xx, color: (resolvedTranscript ? xx : x).name === name ? \"#880000\" : \"#aaaaaa\" }))\n        })\n    ), [ resolvedTranscript, name, snpResponse ]);\n\n    return {\n        data: { ...snpResponse.data, ...data },\n        loading: loading || snpCoordinateResponse.loading || snpResponse.loading,\n        snpData: snpResponse.data,\n        snpCoordinateData: snpCoordinateResponse.data,\n        groupedTranscripts,\n        expandedCoordinates: coordinates\n    };\n\n}\n\n\nconst Browser: React.FC<any> = (props) => { \n    const svgRef = useRef<SVGSVGElement>(null);\n    const [ coordinates, setCoordinates ] = useState<GenomicRange | null>(null);\n    const [ highlight ] = useState<GenomicRange | null>(null);\n    const eexpandedCoordinates = useMemo( () => expandCoordinates(props.coordinates), [ props.coordinates ]);\n    \n    const { groupedTranscripts, expandedCoordinates } = useGenePageData(\n        coordinates || eexpandedCoordinates,\n        \"GRCh38\",\n        props.name,\n        props.resolvedTranscript\n    );\n    const epigeneticTracks = useMemo( () => tracks(\"GRCh38\", coordinates || expandedCoordinates as { chromosome: string, start: number, end: number }), [ coordinates, expandedCoordinates ]);\n\n    const onDomainChanged = useCallback(\n        (d: GenomicRange) => {\n            const chr = d.chromosome === undefined ? eexpandedCoordinates.chromosome : d.chromosome;\n            setCoordinates({ chromosome: chr, start: Math.round(d.start), end: Math.round(d.end) });\n        },\n        [ eexpandedCoordinates ]\n    );\n\n    const l = useCallback((c: number) => (c - expandedCoordinates.start) * 1400 / (expandedCoordinates.end - expandedCoordinates.start), [ expandedCoordinates ]);\n    return (<>\n        <CytobandView\n            innerWidth={1000}\n            height={15}\n            chromosome={props.coordinates.chromosome!}\n            assembly={\"hg38\"}\n            position={props.coordinates}\n        /><br />\n        <div style={{ textAlign: \"center\" }}>\n            <UCSCControls onDomainChanged={onDomainChanged} domain={coordinates || eexpandedCoordinates} withInput={false} />\n        </div>\n        <br />\n        <GenomeBrowser\n            svgRef={svgRef}\n            domain={coordinates || expandedCoordinates}\n            innerWidth={1400}\n            width=\"100%\"\n            noMargin\n            onDomainChanged={x => setCoordinates({ chromosome: expandedCoordinates.chromosome, start: Math.floor(x.start), end: Math.ceil(x.end) })}\n        >\n            { highlight && (\n                <rect fill=\"#8ec7d1\" fillOpacity={0.5} height={1000} x={l(highlight.start)} width={l(highlight.end) - l(highlight.start)} />\n            )}\n            <RulerTrack\n                domain={coordinates || expandedCoordinates}\n                height={30}\n                width={1400}\n            />\n            <EGeneTracks\n                genes={groupedTranscripts || []}\n                expandedCoordinates={coordinates || expandedCoordinates}\n                squish\n            />\n            <EpigeneticTracks\n                assembly=\"GRCh38\"\n                tracks={epigeneticTracks}\n                domain={coordinates || expandedCoordinates}\n            />\n            <DeepLearnedModelTracks\n                domain={coordinates || expandedCoordinates}\n            />\n            <VariantTracks\n                coordinates={coordinates || expandedCoordinates}\n                resolvedTranscript={props.resolvedTranscript}\n                name={props.name}\n                url={`https://downloads.wenglab.org/psychscreen-summary-statistics/${URL_MAP[\"ASD\"]}.bigBed`}\n                trait=\"Autism Spectrum Disorder\"\n            />\n        </GenomeBrowser>\n    </>)\n}\nexport default Browser;\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { Chart, Scatter } from 'jubilant-carnival';\nimport { Grid } from '@mui/material';\nimport Legend from './scatterplot/legend';\nimport { tissueTypeColors } from './consts';\nimport { TabletAppBar, Typography } from '@zscreen/psychscreen-ui-components';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { PORTALS } from '../../../App';\nimport { AppBar } from '@zscreen/psychscreen-ui-components'; \nimport { Logo } from '../../../mobile-portrait/HomePage/HomePage';\nimport { useNavigate } from 'react-router-dom';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst dictionaryInvert = obj => Object.fromEntries(Object.entries(obj).map(a => a.reverse()))\n\nconst legendContent = dictionaryInvert(tissueTypeColors) \n\nexport type GTexumap = {\n    tissueid: string;\n    color: string;\n    tissuetype: string;\n    tissuedetail: string;    \n    coordinates: [ number, number ];\n};\n\nexport function lower5(x: number): number {\n    return Math.floor(x / 5) * 5;\n}\n\nexport function upper5(x: number): number {\n    return Math.ceil(x / 5) * 5;\n}\n\nexport const range = (min: number, max: number, by: number = 1) => {\n    let newVals: number[] = [];\n    for (let i = min; i < max; i = i + by) {\n        newVals.push(i);\n    }\n    return newVals;\n};\n\nconst GTexUMAP: React.FC = () => {\n    \n    const [ data, setData ] = useState<GTexumap[]>([]);\n    const [ pcdata, setPcData ] = useState<GTexumap[]>([]);\n    const theme = useTheme();\n    const navigate = useNavigate();\n\n    useEffect( () => {\n        fetch(\"https://downloads.wenglab.org/GTEx_v8_RNAseq_gene_tpm_matrix.txt\")\n            .then(x => x.text())\n            .then(x => (\n                x.split(\"\\n\").map(l => {\n                    const vals = l.split(\"\\t\");\n                    if (vals.length <= 1) return undefined;\n                    return {\n                        tissueid: vals[0],\n                        tissuetype: vals[1],\n                        color: tissueTypeColors[vals[2]] as string,\n                        tissuedetail: vals[2],\n                        coordinates: [+vals[3], +vals[4]] as [ number, number ]\n                    };\n                }).filter(x => x !== undefined).map(x => x!)\n            ))\n            .then(x => setData(x));\n    }, []);\n    const points = useMemo( () => data.map(x => ({ x: x.coordinates[0], y: x.coordinates[1], svgProps: { fill: x.color } })), [ data ]);\n    const domain = useMemo( () => points.length === 0 ? { x: { start: 0, end: 1 }, y: { start: 0, end: 1 } } : ({\n        x: { start: lower5(Math.min(...points.map(x => x.x)) * 1.1), end: upper5(Math.max(...points.map(x => x.x)) * 1.1) },\n        y: { start: lower5(Math.min(...points.map(x => x.y)) * 1.1), end: upper5(Math.max(...points.map(x => x.y)) * 1.1) }\n    }), [ points ]);\n\n    useEffect( () => {\n        fetch(\"https://downloads.wenglab.org/GTEx_v8_RNAseq_gene_tpm_matrix_pc.txt\")\n            .then(x => x.text())\n            .then(x => (\n                x.split(\"\\n\").map(l => {\n                    const vals = l.split(\"\\t\");\n                    if (vals.length <= 1) return undefined;\n                    return {\n                        tissueid: vals[0],\n                        tissuetype: vals[1],\n                        color: tissueTypeColors[vals[2]] as string,\n                        tissuedetail: vals[2],\n                        coordinates: [+vals[3], +vals[4]] as [ number, number ]\n                    };\n                }).filter(x => x !== undefined).map(x => x!)\n            ))\n            .then(x => setPcData(x));\n    }, []);\n\n    const pcpoints = useMemo( () => pcdata.map(x => ({ x: x.coordinates[0], y: x.coordinates[1], svgProps: { fill: x.color } })), [ pcdata ]);\n    const pcdomain = useMemo( () => pcpoints.length === 0 ? { x: { start: 0, end: 1 }, y: { start: 0, end: 1 } } : ({\n        x: { start: lower5(Math.min(...pcpoints.map(x => x.x)) * 1.1), end: upper5(Math.max(...pcpoints.map(x => x.x)) * 1.1) },\n        y: { start: lower5(Math.min(...pcpoints.map(x => x.y)) * 1.1), end: upper5(Math.max(...pcpoints.map(x => x.y)) * 1.1) }\n    }), [ pcpoints ]);\n\n    const uref = useRef<SVGSVGElement>(null);\n    const pcuref = useRef<SVGSVGElement>(null);\n    const llegendref = useRef<SVGSVGElement>(null);\n\n    return (\n        <>\n            {  //show vertical app bar only for mobile view \n                useMediaQuery(theme.breakpoints.down('xs'))\n                    ? (\n                        <TabletAppBar\n                            onDownloadsClicked={() => navigate(\"/psychscreen/downloads\")}\n                            onHomepageClicked={() => navigate(\"/\")}\n                            onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                            style={{ marginBottom: \"63px\" }}\n                            title={<Logo /> as any}\n                        />\n                    )\n                    : (\n                        <AppBar\n                            centered={true}\n                            onDownloadsClicked={() => navigate(\"/downloads\")}\n                            onHomepageClicked={() => navigate(\"/\")}\n                            onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                        /> \n                    )\n            }\n            <Grid container>\n                <Grid item sm={6} md={6} lg={6} xl={6}>\n                    { data && data.length > 0 ? (\n                        <>\n                            <Typography\n                                type=\"display\"\n                                size=\"small\"\n                                style={{ marginTop: \"90px\", marginLeft: \"250px\", fontWeight: 700, fontSize: \"24px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\" }}\n                            >\n                                UMAP of GTEx v8 RNA-seq (All genes)\n                            </Typography>\n                            <Chart\n                                marginFraction={0.28}\n                                innerSize={{ width: 2100, height: 2000 }}\n                                domain={domain}\n                                xAxisProps={{ ticks: range(domain.x.start, domain.x.end, 5), title: 'UMAP-1' }}\n                                yAxisProps={{ ticks: range(domain.y.start, domain.y.end, 5), title: 'UMAP-2' }}\n                                scatterData={[ points ]}\n                                ref={uref}\n                            >\n                                <Scatter\n                                    data={points}\n                                />\n                            </Chart>\n                        </>\n                    ) : null}\n                </Grid>\n                <Grid item sm={6} md={6} lg={6} xl={6}>\n                    { pcdata && pcdata.length > 0 ? (\n                        <>\n                            <Typography\n                                type=\"display\"\n                                size=\"small\"\n                                style={{ marginTop: \"90px\",marginLeft: \"250px\", fontWeight: 700, fontSize: \"24px\", lineHeight: \"57.6px\", letterSpacing: \"0.5px\" }}\n                            >\n                                UMAP of GTEx v8 RNA-seq (PC genes)\n                            </Typography>\n                            <Chart\n                                marginFraction={0.28}\n                                innerSize={{ width: 2100, height: 2000 }}\n                                domain={pcdomain}\n                                xAxisProps={{ ticks: range(pcdomain.x.start, pcdomain.x.end, 5), title: 'UMAP-1' }}\n                                yAxisProps={{ ticks: range(pcdomain.y.start, pcdomain.y.end, 5), title: 'UMAP-2' }}\n                                scatterData={[ pcpoints ]}\n                                ref={pcuref}\n                            >\n                                <Scatter\n                                    data={pcpoints}\n                                />\n                            </Chart>\n                        </>\n                    ) : null }   \n                </Grid>\n            </Grid>\n            <Grid container>\n                <Grid item sm={12} md={12} lg={12} xl={12}>\n                    { (data.length === 0 || pcdata.length === 0) ? (\n                        <>\n                            <Typography\n                               type=\"body\"\n                               size=\"large\"\n                               style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n                            >\n                                Loading Data...\n                            </Typography>\n                            <br/>\n                            <CircularProgress color=\"inherit\"/>\n                        </>\n                    ) : null}\n                    { data.length > 0 && pcdata.length > 0 ? (\n                        <svg viewBox=\"0 0 800 800\" ref={llegendref}>\n                            <Legend\n                                x={350}\n                                y={0}\n                                width={200}\n                                title={''}\n                                content={legendContent}\n                                fontSize={8}\n                                fill=\"#ffffff\"\n                                stroke=\"#ffffff\"\n                            />\n                        </svg>\n                    ) : null} \n                </Grid>\n            </Grid>\n        </>\n    );\n}\nexport default GTexUMAP;\n","import { Grid, ToggleButton, ToggleButtonGroup } from '@mui/material';\nimport { Chart, Scatter } from 'jubilant-carnival';\nimport { Typography, CustomizedTable } from '@zscreen/psychscreen-ui-components';\nimport React, { useEffect, useMemo, useState, useRef } from 'react';\nimport { tissueTypeColors } from './consts';\nimport { lower5, range, upper5 } from './GTexUMAP';\n\ntype QueryResponse = [\n    number,\n    string[],\n    any,\n    [ string, string, string, string, string, string ][],\n    string[]\n];\n\nconst TISSUE_TYPE_COLORS = (() => {\n    const m: { [ key: string ]: string } = {};\n    Object.keys(tissueTypeColors).forEach(k => {\n        m[k.replace(/-/g, \"_\").replace(/\\(/g, \"\").replace(/\\)/g, \"\")] = tissueTypeColors[k];\n    });\n    return m;\n})();\n\nconst BRAIN_COLORS = {\n    \"Brain_Amygdala\": \"#fcba03\",\n    \"Brain_Anterior_cingulate_cortex_BA24\": \"#fc4e03\",\n    \"Brain_Caudate_basal_ganglia\": \"#1c1a73\",\n    \"Brain_Cerebellar_Hemisphere\": \"#9911cf\",\n    \"Brain_Cerebellum\": \"#9911cf\",\n    \"Brain_Cortex\": \"#e61809\",\n    \"Brain_Frontal_Cortex_BA9\": \"#d93b0f\",\n    \"Brain_Hippocampus\": \"#d93b0f\",\n    \"Brain_Hypothalamus\": \"#0e5e48\",\n    \"Brain_Nucleus_accumbens_basal_ganga\": \"#184f80\",\n    \"Brain_Nucleus_accumbens_basal_ganglia\": \"#184f80\",\n    \"Brain_Putamen_basal_ganglia\": \"#1d4ca3\",\n    \"Brain_Spinal_cord_cervical_c-1\": \"#0c522b\",\n    \"Brain_Substantia_nigra\": \"#198031\"\n};\n\nfunction useSpecificities(gene: string) {\n    const [ specificities, setSpecificities ] = useState<{ [ key: string]: { [key: string]: number } }>({});\n    useEffect( () => {\n        fetch(\"https://downloads.wenglab.org/GTEx-psychscreen/specificities.json\")\n            .then(x => x.json())\n            .then(setSpecificities)\n    }, []);\n    const matches = useMemo( () => new Map(Object.keys(specificities).map(k => [\n        k, specificities[k][gene] || 0\n    ])), [ gene, specificities ]);\n    return matches;\n}\n\nfunction useGeneDescription(gene: string) {\n    const [ description, setDescription ] = useState(\"\");\n    useEffect( () => {\n        setDescription(\"\");\n        fetch(\"https://clinicaltables.nlm.nih.gov/api/ncbi_genes/v3/search?authenticity_token=&terms=\" + gene)\n            .then(x => x.json())\n            .then(x => {\n                const matches = (x as QueryResponse)[3] && (x as QueryResponse)[3].filter(x => x[3] === gene);\n                setDescription(matches && matches.length >= 1 ? matches[0][4] : \"(no description available)\")\n            })\n            .catch();\n    }, [ gene ]);\n    return description;\n}\n\nfunction useSampleScatter(url: string, COLORS: { [key: string]: string }) {\n    const [ data, setData ] = useState<[ string, number, number ][]>([]);\n    useEffect(() => {\n        fetch(url)\n            .then(data => data.json())\n            .then(setData);\n    }, [ url ]);\n    const colors = useMemo( () => data.map(x => COLORS[x[0]]), [ data, COLORS ]);\n    return [ data, colors ] as [ [ string, number, number ][], string[] ];\n}\n\nfunction useGeneScatter(url: string) {\n    const [ data, setData ] = useState<{ [ key: string ]: [ number, number ] } | null>(null);\n    useEffect(() => {\n        fetch(url)\n            .then(data => data.json())\n            .then(setData);\n    }, [ url ]);\n    return data;\n}\n\nconst TissueClusterPlot: React.FC<{ gene?: string | undefined, title: string, fontSize: number, xOffset: number, yOffset: number, url: string, colors: { [key: string ]: string }, geneUrl: string, titleCoordinates: [ number, number ], titleSize: number }>\n  = ({ gene, fontSize, title, xOffset, yOffset, url, colors, geneUrl, titleCoordinates, titleSize }) => {\n\n    const [ sampleData, sampleColors ] = useSampleScatter(url, colors);\n    const geneData = useGeneScatter(geneUrl);\n\n    const [ highlighted, setHighlighted ] = useState(\"\");\n    const tPoints = useMemo( () => [\n        ...sampleData.map((x, i) => ({\n            x: x[1],\n            y: x[2],\n            data: x[0],\n            svgProps: {\n                fill: sampleColors[i],\n                r: 12,\n                strokeWidth: x[0] === highlighted ? 6 : 0,\n                stroke: \"#000000\",\n                fillOpacity: 0.6\n            }\n        }))\n    ].slice(sampleData.length - 2000), [ sampleData, sampleColors, highlighted]);\n    const points = useMemo( () => geneData && gene && geneData[gene] ? [\n        ...tPoints, { x: geneData[gene][0], y: geneData[gene][1], data: gene, svgProps: { fill: \"#00ff00\", r: 34, stroke: \"#000000\", strokeWidth: 3 } }\n    ] : tPoints, [ tPoints, gene, geneData ]);\n    const domain = useMemo( () => points.length === 0 ? { x: { start: 0, end: 1 }, y: { start: 0, end: 1 } } : ({\n        x: { start: lower5(Math.min(...points.map(x => x.x)) * 1.1), end: upper5(Math.max(...points.map(x => x.x)) * 1.1) },\n        y: { start: lower5(Math.min(...points.map(x => x.y)) * 1.1), end: upper5(Math.max(...points.map(x => x.y)) * 1.1) }\n    }), [ points ]);\n    const uref = useRef<SVGSVGElement>(null);\n\n    const [ tooltip, setTooltip ] = useState(-1);\n\n    return (\n        <div style={{ marginTop: \"-40px\", marginLeft: \"-50px\" }}>\n            <Chart\n                marginFraction={0.28}\n                innerSize={{ width: 2100, height: 2000 }}\n                domain={domain}\n                xAxisProps={{ ticks: range(domain.x.start, domain.x.end + 5, 5), title: 'UMAP-1' }}\n                yAxisProps={{ ticks: range(domain.y.start, domain.y.end + 5, 5), title: 'UMAP-2' }}\n                scatterData={[ points ]}\n                ref={uref}\n            >\n                <Scatter\n                    data={points}\n                    onPointMouseOver={(i: number) => { setTooltip(i); setHighlighted(tPoints[i]?.data); }}\n                    onPointMouseOut={() => { setTooltip(-1); setHighlighted(\"\"); }}\n                />\n                <text x={titleCoordinates[0]} y={titleCoordinates[1]} fontSize={titleSize} textAnchor=\"middle\">{title} {gene}</text>\n                { tooltip > -1 && (\n                    <rect\n                        x={points[tooltip].x - points[tooltip].data.replace(/_/g, \" \").length * xOffset}\n                        y={points[tooltip].y - yOffset + 0.7}\n                        width={points[tooltip].data.replace(/_/g, \" \").length * xOffset * 2}\n                        height={yOffset - 0.5}\n                        stroke=\"#000000\"\n                        strokeWidth={0.05}\n                        fill=\"#ffffff\"\n                        fillOpacity={0.9}\n                    />\n                )}\n                { tooltip > -1 && (\n                    <text\n                        x={points[tooltip].x}\n                        y={points[tooltip].y - yOffset - 0.1}\n                        fontSize={fontSize}\n                        textAnchor=\"middle\"\n                    >\n                        {points[tooltip].data.replace(/_/g, \" \")}\n                    </text>\n                )}\n            </Chart>\n        </div>\n    );\n\n}\n\nconst LABEL_MAP = {\n    \"motor\": \"Striatum\",\n    \"cortex\": \"Cortex\",\n    \"cerebellar\": \"Cerebellum\",\n    \"cord\": \"Brainstem\",\n    \"amygdala\": \"Limbic System\",\n    \"brain\": \"Overall Brain\"\n};\n\nconst LABEL_ORDER = [\n    \"brain\",\n    \"cord\",\n    \"cerebellar\",\n    \"amygdala\",\n    \"motor\",\n    \"cortex\"\n];\n\nfunction specificityCategory(c: number, k: string): string {\n    if (k === \"brain\") {\n        if (c > 0.15) return \"very specific\";\n        if (c > 0.1) return \"specific\";\n        if (c > 0.05) return \"moderately specific\";\n        if (c > 0.02) return \"slightly specific\";\n        return \"not specific\";\n    }\n    if (c > 0.008) return \"very specific\";\n    if (c > 0.005) return \"specific\";\n    if (c > 0.002) return \"moderately specific\";\n    if (c > 0.001) return \"slightly specific\";\n    return \"not specific\";\n}\n\nconst GeneOverview: React.FC <{ gene?: string | undefined }> = ({ gene }) => {\n    \n    const [ category, setCategory ] = useState(\"all\");\n    const description = useGeneDescription(gene || \"N/A\");\n    const specificities = useSpecificities(gene || \"\");\n    console.log(specificities);\n    const data = useMemo( () => [[{\n        header: \"\",\n        value: \"Gene Description\"\n    }, {\n        header: \"\",\n        value: description\n    }], [{\n        header: \"\",\n        value: \"Overall Brain Specificity Score\"\n    }, {\n        header: \"\",\n        value: specificities.get(\"brain\")?.toFixed(3) || \"loading\",\n        render: specificities.get(\"brain\") !== undefined ? (\n            <span style={{ fontWeight: specificityCategory(specificities.get(\"brain\")!, \"brain\") !== \"not specific\" ? \"bold\" : \"normal\" }}>\n                {specificityCategory(specificities.get(\"brain\")!, \"brain\")} ({specificities.get(\"brain\")!.toFixed(3)})\n            </span>\n        ) : \"\"\n    }], [{\n        header: \"\",\n        value: \"\"\n    }, {\n        header: \"\",\n        value: \"\"\n    }], [{\n        header: \"\",\n        value: \"Brain Region Specificity\",\n        render: (\n            <span style={{ fontWeight: \"bold\" }}>\n                Brain Region Specificity\n            </span>\n        )\n    }, {\n        header: \"\",\n        value: \"\"\n    }], ...LABEL_ORDER.filter(x => x !== \"brain\" && specificities.get(x) !== undefined).map(k => [{\n        header: \"\",\n        value: `${LABEL_MAP[k]} Specificity Score`\n    }, {\n        header: \"\",\n        value: (specificities.get(k)! * 10).toFixed(3),\n        render: (\n            <span style={{ fontWeight: specificityCategory(specificities.get(k)!, k) !== \"not specific\" ? \"bold\" : \"normal\" }}>\n                {specificityCategory(specificities.get(k)!, k)} ({(specificities.get(k)! * 10).toFixed(3)})\n            </span>\n        )\n    }])], [ description, specificities ]);\n\n    return (\n        <Grid container>\n            <Grid item sm={6} md={6} lg={6} xl={6}>\n                <Typography type=\"headline\" size=\"small\">\n                    Details and Brain Expression Pattern: {gene}\n                </Typography>\n                { data.length > 0 && <CustomizedTable style={{ width: \"max-content\" }} tabledata={data} /> }\n            </Grid>\n            <Grid item sm={6} md={6} lg={6} xl={6}>\n                <ToggleButtonGroup style={{ marginLeft: \"2em\" }} size={\"small\"} value={category} exclusive onChange={(_, x) => setCategory(x)}>\n                    <ToggleButton value=\"all\">\n                        All GTEx Tissues\n                    </ToggleButton>\n                    <ToggleButton value=\"brain\">\n                        GTEx Brain Regions\n                    </ToggleButton>\n                </ToggleButtonGroup>\n                { category === \"all\" ? (\n                    <TissueClusterPlot\n                        key=\"all\"\n                        gene={gene} \n                        yOffset={1.9}\n                        xOffset={0.3}\n                        fontSize={0.6}\n                        title=\"Tissue Cluster Identity:\"\n                        url=\"https://downloads.wenglab.org/GTEx-psychscreen/all-samples.coordinates.json\"\n                        colors={TISSUE_TYPE_COLORS}\n                        geneUrl=\"https://downloads.wenglab.org/GTEx-psychscreen/all-genes.coordinates.json\"\n                        titleCoordinates={[ 10, 18.5 ]}\n                        titleSize={1}\n                    />\n                ) : (\n                    <TissueClusterPlot\n                        key=\"brain\"\n                        gene={gene}\n                        yOffset={1.7}\n                        xOffset={0.15}\n                        fontSize={0.5}\n                        title=\"Brain Region Cluster Identity:\"\n                        url=\"https://downloads.wenglab.org/GTEx-psychscreen/all-samples.brain-coordinates.json\"\n                        colors={BRAIN_COLORS}\n                        geneUrl=\"https://downloads.wenglab.org/GTEx-psychscreen/all-genes.brain-coordinates.json\"\n                        titleCoordinates={[ 10, 9.5 ]}\n                        titleSize={0.55}\n                    />\n                )}\n            </Grid>\n        </Grid>\n    );\n};\nexport default GeneOverview;\n","import { gql, useQuery } from '@apollo/client';\nimport { Typography } from '@zscreen/psychscreen-ui-components';\nimport React, { useRef }  from 'react';\nimport { YAxis } from '../GenePortal/axis';\nimport { linearTransform } from '../GenePortal/violin/utils';\n\nfunction pickHex(color1, color2, weight) {\n    var w1 = weight;\n    var w2 = 1 - w1;\n    var rgb = [Math.round(color1[0] * w1 + color2[0] * w2),\n        Math.round(color1[1] * w1 + color2[1] * w2),\n        Math.round(color1[2] * w1 + color2[2] * w2)];\n    return rgb;\n}\n\nconst dotPlotQuery=gql`\nquery singleCellBoxPlot( $disease: String!, $gene:[String]){\n    singleCellBoxPlotQuery(disease: $disease, gene: $gene) {\n        expr_frac\n        mean_count\n        disease\n        gene\n        celltype\n    }\n}`\n\n\nconst DotPlot: React.FC<{ disease: string, gene: string}> = props => {\n    const ref = useRef<SVGSVGElement>(null);\n    const { data } = useQuery(dotPlotQuery,{\n        variables: {\n            disease: props.disease,\n            gene:[props.gene]\n        }\n\n    })    \n  const results: any = React.useMemo( () => new Map(\n            data?.singleCellBoxPlotQuery\n                .map(\n                    (x: any) => {\n                        return[\n                            x.celltype,\n                            {\n                                radius:  x.mean_count,\n                                colorpercent:  x.expr_frac\n                            },\n                        ] as [string, { radius: number, colorpercent: number }]}\n                )\n        ), [ data ]);\n    \n    const width = 15000\n    const height = width / 3\n\n    const keys = [...results.keys()].sort((a: any, b: any) => a.toLowerCase().localeCompare(b.toLowerCase()))\n  \n    const radiusDomain: [number, number] = React.useMemo(() => {\n        let radius = keys.map(k=>{\n            return results\n         .get(k)!.radius\n         \n         })\n        return [Math.min(...radius), Math.max(...radius)];\n    }, [results, keys]);\n    \n    const radiusTransform = linearTransform( radiusDomain,[20,60]);\n    \n    const length = (keys.length) + 4;\n    \n    const verticalTransform = linearTransform([0,1], [(height / 2) * 0.9, (height / 2)* 0.1]);\n    let radiusRange: number[] = []\n    var diff = +((+radiusDomain[1] - +radiusDomain[0]) / 4);\n    let start =+radiusDomain[0]\n    radiusRange.push(radiusDomain[0])\n    for(var i=0; i<4; i++){\n        start += diff;\n        radiusRange.push(start)\n      }\n    const colorPercent =[0,0.25,0.5,0.75,1]\n    \n    return(\n    <>\n    {data?.singleCellBoxPlotQuery.length===0 && <Typography type=\"body\" size=\"large\">\n                          No data found for {props.gene}\n                        </Typography> }\n    {data && data.singleCellBoxPlotQuery.length>0 && <svg viewBox={`0 0 ${width} ${width / 3}`} style={{ width: '100%' }} ref={ref}>        \n        <YAxis\n            title={props.gene}\n            width={(width / length) * 2}\n            height={height / 2}\n            range={[0,1]}\n        />\n        \n        {keys.map((x, i) => (\n                <React.Fragment key={`${x}_${i}`}>\n                    <g>                   \n                    <rect\n                        width={(width / length) * 0.8}\n                        x={((i + 2.1) * width) / length}\n                        y={height * 0.48}\n                        height={1}\n                        fill=\"#888888\"\n                    />\n                    <text\n                        key={x}\n                        fontSize=\"140px\"\n                        transform=\"rotate(-90)\"\n                        textAnchor=\"end\"\n                        y={((i + 2.5) * width) / length}\n                        x={-height / 2}\n                        height={width / (length - 1)}\n                        fill=\"#000000\"\n                        alignmentBaseline=\"middle\"\n                    >\n                        {x}\n                    </text>\n                    <circle fill={\"rgb(\"+pickHex([20,20,255],[235,235,255],results.get(x)!!.colorpercent).join(\",\")+\")\"} cy={verticalTransform(0.5)} r={radiusTransform(results.get(x)!!.radius)} cx={((i + 2.5) * width) / length}/>\n                    \n                    </g>\n                </React.Fragment>)\n        )}\n        <text fontSize=\"140px\" fill=\"#000000\" x={(((22 + 3.3) * width) / length)} y={(0)+ height * 0.75} >Mean Count </text>\n        {radiusRange.map((r,i)=>{\n            return(<>\n            <circle\n                        r={radiusTransform(r)} \n                        cx={(((23 + 3.3) * width) / length)}\n                        cy={(i*150)+ height * 0.8}\n                        fill=\"#000000\"\n                    />\n                    <text\n                       fontSize=\"140px\"\n                        x={((23 + 3.6) * width) / length}\n                        y={(i*150)+height * 0.81}\n                        fill=\"#000000\"\n                    > {r.toFixed(2)} </text>\n            </>)\n        })}\n        <text fontSize=\"140px\" fill=\"#000000\" x={((((14) + 3.3) * width) / length)} y={(0)+ height * 0.75} > Fraction Expressed </text>\n        {colorPercent.map((r,i)=>{\n            return(<>\n                    <rect\n                        width={100} \n                        height={100} \n                        x={((((15) + 3.3) * width) / length)}\n                        y={(i*150)+ height * 0.8}\n                        fill={\"rgb(\"+pickHex([20,20,255],[235,235,255],r).join(\",\")+\")\"}\n                    />\n                    <text\n                        fontSize=\"140px\"\n                        x={(((15) + 3.8) * width) / length}\n                        y={(i*150)+height * 0.82}\n                        fill=\"#000000\"\n                    > {r.toFixed(2)} </text>\n            </>)\n        })}\n       \n    </svg>}\n    \n    </>\n    )\n}\n\nexport default DotPlot","import { gql, useQuery } from '@apollo/client';\nimport { CircularProgress, Grid, Tabs, Tab, ToggleButton, ToggleButtonGroup } from '@mui/material';\nimport { Typography, Button, CustomizedTable } from '@zscreen/psychscreen-ui-components';\nimport { Chart, linearTransform, Scatter } from 'jubilant-carnival';\nimport { groupBy } from 'queryz';\nimport React, { useMemo, useState } from 'react';\nimport DotPlot from '../SingleCellPortal/DotPlot';\nimport { lower5, range, upper5 } from './GTexUMAP';\n\nexport type SingleCellGeneQueryItem = {\n    sampleid: string;\n    featureid: string;\n    featurekey: string;\n    val: number;\n    barcodekey: string;\n    n_genes: number;\n    n_cells: number;\n    n_counts: number;\n    anno: string;\n    channel: string;\n    percent_cells: number;\n    subclass: string;\n};\n\nexport type SingleCellUMAPQueryItem = {\n    subclass: string;\n    barcodekey: string;\n    umap_1: number;\n    umap_2: number;\n};\n\nexport type SingleCellUMAPQueryResponse = {\n    singleCellUmapQuery: SingleCellUMAPQueryItem[];\n};\n\nexport type SingleCellGeneQueryResponse = {\n    singleCellGenesQuery: SingleCellGeneQueryItem[];\n};\n\nexport const SINGLE_CELL_GENE_QUERY = gql`\nquery q($disease: String!, $featureKey: [String]) {\n   singleCellGenesQuery(disease: $disease, featurekey: $featureKey) {\n      sampleid\n      featureid\n      featurekey\n      val\n      barcodekey\n      n_genes\n      n_cells\n      n_counts\n      anno\n      channel\n      subclass\n      percent_cells\n   }\n}\n`;\n\nexport const SINGLE_CELL_UMAP_QUERY = gql`\nquery q($disease: String!) {\n   singleCellUmapQuery(disease: $disease) {\n      subclass\n      barcodekey\n      umap_1\n      umap_2\n   }\n}\n`;\n\nfunction useSingleCellGeneData(dataset: string, gene: string) {\n    return useQuery<SingleCellGeneQueryResponse>(SINGLE_CELL_GENE_QUERY, {\n        variables: {\n            disease: dataset,\n            featureKey: gene\n        }\n    });\n}\n\nfunction useSingleCellUMAPData(dataset: string) {\n    return useQuery<SingleCellUMAPQueryResponse>(SINGLE_CELL_UMAP_QUERY, {\n        variables: {\n            disease: dataset\n        }\n    });\n}\n\nfunction generateColors(n: number) {\n    const colors: string[] = [];\n    for (let i = 0; i < n; ++i)\n        colors.push(`hsl(${(360 / n) * (n - i)}, 80%, 50%)`);\n    return colors;\n}\n\nfunction useSingleCellData(dataset: string, gene: string) {\n    const { loading: expressionLoading, data: expressionData } = useSingleCellGeneData(dataset, gene);\n    const { loading: UMAPLoading, data: UMAPData } = useSingleCellUMAPData(dataset);\n    const maximumValue = Math.max(...(expressionData?.singleCellGenesQuery || [ { val: 0 }, { val: 1 } ]).map((x: { val: number }) => Math.log(x.val + 1)));\n    const results = useMemo( () => {\n        if (expressionLoading || UMAPLoading) return new Map<string, SingleCellGeneQueryItem & SingleCellUMAPQueryItem & { expressionColor: string }>([]);\n        const UMAP_map = new Map(UMAPData?.singleCellUmapQuery.map(x => [ x.barcodekey, x ]) || []);\n        const expression_map = new Map(expressionData?.singleCellGenesQuery.map(x => [ x.barcodekey, x ]) || []);\n        const gradient = linearTransform({ start: 0, end: maximumValue }, { start: 215, end: 0 });\n        return new Map<string, SingleCellGeneQueryItem & SingleCellUMAPQueryItem & { expressionColor: string }>([ ...UMAP_map.keys() ].filter(k => expression_map.get(k)).map(x => [\n            x, {\n                ...UMAP_map.get(x)!,\n                ...expression_map.get(x)!,\n                expressionColor: `rgb(255,${gradient(Math.log(expression_map.get(x)!.val + 1)).toFixed(0)},0)`\n            }\n        ]));\n    }, [ expressionLoading, expressionData, UMAPData, UMAPLoading, maximumValue ]);\n    const colors = useMemo( () => {\n        const unique_celltypes = new Set([ ...results.values() ].map(x => x.subclass));\n        const rcolors = generateColors(unique_celltypes.size);\n        return new Map([ ...unique_celltypes ].map((x, i) => [ x, rcolors[i] ]))\n    }, [ results ]);\n    return { loading: expressionLoading || UMAPLoading, data: results, colors, maximumValue };\n}\n\nconst DATASETS = [\n    \"DevBrain\",\n    \"IsoHuB\",\n    \"UCLA-ASD\",\n    \"Urban-DLPFC\"\n];\n\nconst SingleCell: React.FC<{ gene: string }> = ({ gene }) => {\n    const [ dataset, setDataset ] = useState(\"UCLA-ASD\");\n    const { loading, data, colors, maximumValue } = useSingleCellData(dataset, gene);\n    const [ tooltip, setTooltip ] = useState(-1);\n    const [ highlighted, setHighlighted ] = useState(\"\");\n    const [ colorScheme, setColorScheme ] = React.useState<string | null>('expression');\n    const points = useMemo( () => [ ...data.values() ].slice(6000).map(x => ({ x: x.umap_1, y: x.umap_2, data: x.subclass, val: x.val, svgProps: {\n        fill: colorScheme === \"expression\" ? x.expressionColor : colors.get(x.subclass),\n        fillOpacity: colorScheme === \"expression\" && x.val === 0 ? 0.1 : 0.6,\n        r: 8,\n        strokeWidth: x.subclass === highlighted ? 4 : 0,\n        stroke: \"#000000\",\n        strokeOpacity: 0.4\n    } })), [ data, highlighted, colorScheme, colors ]);\n    const groupedVals = useMemo( () => {\n        const groups = groupBy(points, x => x.data, x => x.val);\n        return [ ...groups.keys() ].sort().map(x => [{\n            header: \"Cell Type\",\n            value: x\n        }, {\n            header: \"Fraction Cells Non-Zero\",\n            value: groups.get(x)!.filter(x => x !== 0).length / groups.get(x)!.length,\n            render: (groups.get(x)!.filter(x => x !== 0).length / groups.get(x)!.length).toFixed(3)\n        }, {\n            header: \"Average Expression\",\n            value: groups.get(x)!.reduce((x, c) => x + c, 0) / groups.get(x)!.length,\n            render: (groups.get(x)!.reduce((x, c) => x + c, 0) / groups.get(x)!.length).toFixed(3)\n        }]).sort((a, b) => -(+a[2].value - +b[2].value));\n    }, [ points ]);\n    const domain = useMemo( () => points.length === 0 ? { x: { start: 0, end: 1 }, y: { start: 0, end: 1 } } : ({\n        x: { start: lower5(Math.min(...points.map(x => x.x)) * 1.1), end: upper5(Math.max(...points.map(x => x.x))) },\n        y: { start: lower5(Math.min(...points.map(x => x.y)) * 1.1), end: upper5(Math.max(...points.map(x => x.y))) }\n    }), [ points ]);\n    const [ tabIndex, setTabIndex ] = useState(0);\n    const handleTabChange = (_: any, newTabIndex: number) => {\n        setTabIndex(newTabIndex);\n    };\n    return (\n        <Grid container>\n            <Grid item sm={12} md={12} lg={12} xl={12} style={{ marginBottom: \"2em\" }}>\n                <Typography type=\"headline\" size=\"small\" style={{ marginBottom: \"0.55em\" }}>Select a Single Cell Dataset:</Typography>\n                { DATASETS.map( d => (\n                    <>\n                        <Button btheme=\"light\" bvariant={dataset === d ? \"filled\": \"outlined\"} key={d} onClick={() => setDataset(d)}>\n                            {d}\n                        </Button>&nbsp;\n                    </>\n                ))}\n            </Grid>\n            <Grid item sm={12}>\n                <Tabs value={tabIndex} onChange={handleTabChange}>\n                    <Tab label=\"Expression Summary\" />\n                    <Tab label=\"Detailed Expression Profile\" />\n                </Tabs>\n            </Grid>\n            { tabIndex === 0 ? (\n                <Grid item sm={12}>\n                    { loading ? <CircularProgress /> : (\n                        <DotPlot\n                            disease={dataset}\n                            gene={gene}\n                        />\n                    )}\n                </Grid>\n            ) : (\n                <>\n                    <Grid item sm={6} md={6} lg={6} xl={6}>\n                        { groupedVals.length > 0 && (\n                            <CustomizedTable\n                                style={{ width: \"max-content\" }}\n                                tabledata={groupedVals}\n                                onRowMouseOver={row => setHighlighted(row[0].value)}\n                                onRowMouseOut={() => setHighlighted(\"\")}\n                            />\n                        )}\n                    </Grid>\n                    <Grid item sm={6} md={6} lg={6} xl={6}>\n                        <div style={{ marginLeft: \"8em\" }}>\n                            <Typography style={{ marginLeft: \"2em\", marginBottom: \"0.5em\" }} type=\"body\" size=\"large\">Color Scheme:</Typography>\n                            <ToggleButtonGroup style={{ marginLeft: \"2em\" }} size={\"small\"} value={colorScheme} exclusive onChange={(_, x) => setColorScheme(x)}>\n                                <ToggleButton value=\"expression\">\n                                    {gene} Expression\n                                </ToggleButton>\n                                <ToggleButton value=\"cluster\">\n                                    Cell Type Cluster\n                                </ToggleButton>\n                            </ToggleButtonGroup>\n                        </div>\n                        <div style={{ marginLeft: \"-2em\", marginTop: \"-3em\" }}>\n                            { loading ? <CircularProgress /> : (\n                                <Chart\n                                    key={dataset}\n                                    marginFraction={0.28}\n                                    innerSize={{ width: 2100, height: 2000 }}\n                                    domain={domain}\n                                    xAxisProps={{ ticks: range(domain.x.start, domain.x.end + 1, 5), title: 'UMAP-1' }}\n                                    yAxisProps={{ ticks: range(domain.y.start, domain.y.end + 1, 5), title: 'UMAP-2' }}\n                                    scatterData={[ points ]}\n                                >\n                                    <Scatter\n                                        data={points}\n                                        onPointMouseOver={(i: number) => { setTooltip(i); setHighlighted(points[i]?.data); }}\n                                        onPointMouseOut={() => { setTooltip(-1); setHighlighted(\"\"); }}\n                                    />\n                                    <defs>\n                                        <linearGradient id=\"scale\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\n                                            <stop offset=\"0%\" stop-color=\"red\" />\n                                            <stop offset=\"100%\" stop-color=\"#ffcd00\" />\n                                        </linearGradient>\n                                    </defs>\n                                    { tooltip > -1 && (\n                                        <rect\n                                            x={points[tooltip].x - points[tooltip].data.replace(/_/g, \" \").length * 1}\n                                            y={points[tooltip].y - 3 + 0.7}\n                                            width={points[tooltip].data.replace(/_/g, \" \").length * 1 * 2}\n                                            height={3}\n                                            stroke=\"#000000\"\n                                            strokeWidth={0.05}\n                                            fill=\"#ffffff\"\n                                            fillOpacity={0.9}\n                                        />\n                                    )}\n                                    { tooltip > -1 && (\n                                        <text\n                                            x={points[tooltip].x}\n                                            y={points[tooltip].y - 4.2 - 0.1}\n                                            fontSize={2}\n                                            textAnchor=\"middle\"\n                                        >\n                                            {points[tooltip].data.replace(/_/g, \" \")}\n                                        </text>\n                                    )}\n                                    { colorScheme === \"expression\" && (\n                                        <rect\n                                            x={upper5(Math.max(...points.map(x => x.x))) + 2}\n                                            y={upper5(Math.max(...points.map(x => x.y))) - 2}\n                                            width={1}\n                                            height={upper5(Math.max(...points.map(x => x.y))) - lower5(Math.min(...points.map(x => x.y))) - 5}\n                                            fill=\"url(#scale)\"\n                                        />\n                                    )}\n                                    { colorScheme === \"expression\" && (\n                                        <text\n                                            x={upper5(Math.max(...points.map(x => x.x))) + 1}\n                                            y={(lower5(Math.min(...points.map(x => x.y))) + upper5(Math.max(...points.map(x => x.y)))) / 2 + 0.5}\n                                            transform=\"rotate(-90)\"\n                                            fontSize={1.5}\n                                            textAnchor=\"middle\"\n                                        >\n                                            {gene} Expression\n                                        </text>\n                                    )}\n                                    { colorScheme === \"expression\" && (\n                                        <text\n                                            x={upper5(Math.max(...points.map(x => x.x))) + 4}\n                                            y={upper5(Math.max(...points.map(x => x.y))) - 2.5}\n                                            fontSize={1.2}\n                                        >\n                                            {maximumValue.toFixed(1)}\n                                        </text>\n                                    )}\n                                    { colorScheme === \"expression\" && (\n                                        <text\n                                            x={upper5(Math.max(...points.map(x => x.x))) + 4}\n                                            y={lower5(Math.min(...points.map(x => x.y))) + 2.5}\n                                            fontSize={1.2}\n                                        >\n                                            0.0\n                                        </text>\n                                    )}\n                                </Chart>\n                            )}\n                        </div>\n                    </Grid>\n                </>\n            )}\n        </Grid>\n    );\n};\nexport default SingleCell;\n","import React, { useState, useMemo, useRef } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { AppBar, Typography } from '@zscreen/psychscreen-ui-components';\nimport { PORTALS } from '../../../App';\nimport { Divider, Grid } from '@mui/material';\nimport Box from '@mui/material/Box';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport ViolinPlot from './violin/violin';\nimport { gql, useQuery } from '@apollo/client';\nimport { groupBy } from 'queryz';\nimport { tissueColors } from './consts';\nimport OpenTarget from './OpenTarget';\nimport AssociatedxQTL from './AssociatedxQTL';\nimport GeneExpressionPage from './GeneExpression';\nimport Browser from './Browser/Browser';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport GeneOverview from './GeneOverview';\nimport SingleCell from './SingleCell';\n  \ntype GTExGeneQueryResponse = {\n    gtex_genes: {\n        val: number;\n        gene_id: string;\n        description: string;\n        tissue_type: string;\n        tissue_type_detail: string;\n    }[];\n};\n\nconst GTEX_GENES_QUERY= gql`\n  query gtexgenes( $gene_id: [String]!){\n      gtex_genes(gene_id: $gene_id) {\n          val \n          gene_id\n          description\n          tissue_type\n          tissue_type_detail\n      }\n  }\n`  \nconst GeneDetails: React.FC = (props) => {\n    const { gene } = useParams();\n    const { state }: any = useLocation();\n    const navigate = useNavigate();  \n    const [ tabIndex, setTabIndex ] = useState(0);\n    const ref = useRef<SVGSVGElement>(null);\n    const [ tissueCategory, setTissueCategory] = React.useState<string | null>('granular');\n    const { geneid, chromosome, start, end } = state ? state : { geneid: '', chromosome: '', start: null, end: null };\n    \n    const handleTissueCategory = (\n        _: any,\n        newTissueCategory: string | null,\n    ) => {\n        setTissueCategory(newTissueCategory);\n    };\n\n    const handleTabChange = (_: any, newTabIndex: number) => {\n        setTabIndex(newTabIndex);\n    };\n\n    const { data } = useQuery<GTExGeneQueryResponse>(GTEX_GENES_QUERY, {\t\t\n        variables: {\n            gene_id: geneid\n        },\n        skip: geneid === ''\n    });\n\n  const grouped = useMemo(\n      () =>\n          groupBy(\n              data?.gtex_genes || [],\n              x => tissueCategory === 'granular' ? x.tissue_type_detail : x.tissue_type,\n              x => x\n          ),\n      [ data,tissueCategory ]\n  );\n\n  const sortedKeys = useMemo(\n      () => (\n          [...grouped.keys()]\n              .filter(x => x !== null && grouped.get(x)!)\n              .sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()))\n      ),\n      [grouped]\n  );\n\n  const toPlot = useMemo(\n      () => new Map(sortedKeys.map(x => [\n          x,\n          new Map([[\n              'all',\n              grouped.get(x)!.flatMap(x => x.val).filter(x => x !== undefined).map(x => Math.log10(x! + 0.01)),\n          ]]),\n      ] as [string, Map<string, number[]>]).filter(x => x[1].get('all')!.length > 1)),\n      [sortedKeys, grouped]\n  );\n \n  const domain: [number, number] = useMemo(() => {\n      const values = [ ...toPlot.values() ].flatMap(x => x.get('all')!);\n      return [ Math.log10(0.001), Math.max(...values) + 0.5 ];\n  }, [toPlot]);\n  const width = useMemo(() => {\n      const keys = [ ...toPlot.keys() ].length;\n      return (54 + (keys < 27 ? 27 : keys)) * 200;\n  }, [toPlot]);\n \n  return (\n      <>\n            <AppBar\n              centered\n              onDownloadsClicked={() => navigate(\"/downloads\")}\n              onHomepageClicked={() => navigate(\"/\")}\n              onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n              style={{ marginBottom: \"63px\" }}\n            />\n            <Grid container {...props}> \n                <Grid item sm={1} lg={1.5} />\n                <Grid item sm={9}>\n                    <Typography type=\"headline\" size=\"large\" style={{ marginTop: \"-0.6em\", marginBottom: \"0.2em\" }}>\n                        <img alt=\"DNA\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Font_Awesome_5_solid_dna.svg/640px-Font_Awesome_5_solid_dna.svg.png\" width=\"1.7%\" />\n                        &nbsp;Gene Details: {gene}\n                    </Typography>\n                </Grid>\n                <Grid item sm={1} lg={1.5} />\n                <Grid item sm={1} lg={1.5} />  \n                <Grid item sm={9}>\n                  <Box>\n                    <Tabs value={tabIndex} onChange={handleTabChange}>\n                        <Tab label=\"Brain Specificity\" />\n                        <Tab label=\"Tissue Expression (GTEx)\" />\n                        <Tab label=\"Brain (Epi)genome Browser\" />\n                        <Tab label=\"Brain Expression by Age\" />\n                        <Tab label=\"Brain eQTLs and bCREs\" />\n                        <Tab label=\"Brain Single Cell Expression\" />\n                        { null && <Tab label=\"Open Target\" /> }\n                    </Tabs>\n                    <Divider/>\n                  </Box>\n                  <Box sx={{ padding: 2 }}>\n                    { tabIndex === 0 ? (\n                      <Box>\n                        <GeneOverview gene={gene} />\n                      </Box>\n                    ) : tabIndex === 2 ? (\n                      <Box>\n                        <Browser name={gene} coordinates={ {chromosome: chromosome,start: parseInt(start),end: parseInt(end)}}/>\n                      </Box>\n                    ) : tabIndex === 3 ? (\n                      <Box>\n                        <GeneExpressionPage id={geneid}/>\n                      </Box>\n                    ) : tabIndex === 4 ? (\n                      <Box>\n                        <AssociatedxQTL name={gene} coordinates={ {chromosome: chromosome,start: parseInt(start),end: parseInt(end)}\n                        }/>\n                      </Box>\n                    ) : tabIndex === 6 ? (\n                      <Box>\n                        <Typography  type=\"body\"\n                                    size=\"small\">\n                              <OpenTarget id={geneid}/>\n                        </Typography>\n                      </Box>\n                    ) : tabIndex === 5 ? (\n                      <Box>\n                            <SingleCell gene={gene || \"APOE\"} />\n                      </Box>\n                    ) : tabIndex === 1 ? (\n                      <Box>\n                        {(data &&  data?.gtex_genes.length === 0 )  ? <Typography type=\"body\" size=\"large\">\n                          No GTex data found for {gene}\n                        </Typography> : (\n                          <>\n                                <Typography type=\"body\" size=\"large\">Group By: </Typography>\n                                <br/>\n                                <ToggleButtonGroup size={\"small\"} value={tissueCategory} exclusive onChange={handleTissueCategory}>\n                                    <ToggleButton value=\"broad\">\n                                        Broad Tissue Category\n                                    </ToggleButton>\n                                    <ToggleButton value=\"granular\">\n                                        Granular Tissue Category\n                                    </ToggleButton>\n                                </ToggleButtonGroup>\n                                <svg viewBox={`0 0 ${width} ${width / 2}`} style={{ width: '100%' }} ref={ref}>\n                                    <ViolinPlot\n                                        data={toPlot}\n                                        title=\"log10 TPM\"\n                                        width={width}\n                                        height={width / 2}\n                                        colors={tissueColors}\n                                        domain={domain}\n                                        tKeys={54}\n                                    />\n                                </svg>\n                          </>)}\n                      </Box>\n                    ) : null }\n                  </Box>\n                </Grid>\n            </Grid>\n      </>\n  );\n};\nexport default GeneDetails;\n","import { gql, useQuery } from '@apollo/client';\nimport React from 'react';\nimport { Grid, Container } from '@mui/material';\nimport { Typography, CustomizedTable } from '@zscreen/psychscreen-ui-components';\ntype GWASPageProps = {\n    id: string;\n};\n\nexport type GWASEntry = {\n    pubMedId: string;\n    author: string;\n    name: string;\n};\n\ntype QueryResponse = {\n    snpQuery: { genomeWideAssociation: GWASEntry[] }[];\n};\n\n\nconst QUERY = gql`\nquery q($id: [String]) {\n  snpQuery(snpids: $id, assembly: \"hg38\") {\n    genomeWideAssociation {\n      pubMedId\n      author\n      name\n    }\n  }\n}\n`;\n\nconst GwasPage: React.FC<GWASPageProps> = (props) => {\n    const { data } = useQuery<QueryResponse>(QUERY, { variables: { id: props.id } });\n    \n    const gwasData  = data && data.snpQuery[0]?.genomeWideAssociation.length>0 && data.snpQuery[0]?.genomeWideAssociation.map((d: GWASEntry)=>{\n        return [{header: 'PubMed ID', value: d.pubMedId},\n        {header: 'Lead Author', value: d.author},\n        {header: 'Trait', value: d.name},\n    ]\n    })\n    \n    return( <Grid container {...props}>    \n        <Grid item sm={12}>\n            <Container style={{ marginTop: \"30px\", marginLeft: \"0px\" }}>\n            {data?.snpQuery[0]?.genomeWideAssociation.length ? (\n                <>\n                    <Typography\n                            type=\"display\"\n                            size=\"small\"\n                            style={{ fontWeight: 500, fontSize: \"28px\" }}\n                        > {props.id} has been identified in {data?.snpQuery[0]?.genomeWideAssociation.length} GWAS.</Typography>\n                    \n                </>\n            ) : <Typography  type=\"display\" style={{ fontWeight: 500, fontSize: \"28px\" }}\n            size=\"small\">{props.id} has not been identified in any GWAS catalogued by SCREEN.</Typography>}\n            {gwasData &&  <CustomizedTable style={{ width: \"max-content\" }}  tabledata={gwasData} />}\n            </Container>\n        </Grid>\n    </Grid>)\n}\nexport default GwasPage","\nimport { gql, useQuery } from '@apollo/client';\nimport { associateBy } from 'queryz';\nimport React, { useMemo } from 'react';\nimport { EGene } from './SNPDetails';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Typography, CustomizedTable } from '@zscreen/psychscreen-ui-components';\nconst QUERY = gql`\n    query q($id: [String!]) {\n        gene(name_prefix: $id, assembly: \"GRCh38\") {\n            name\n            id\n        }\n    }\n`;\n\ntype QueryResponse = {\n    gene: {\n        name: string;\n        id: string;\n    }[];\n};\nconst EGeneTable: React.FC<{ genes: EGene[], snp: string }> = props => {\n    \n    const { data, loading } = useQuery<QueryResponse>(QUERY, { variables: { id: props.genes.map(x => x.gene.split('.')[0]) } });\n    const genemap = useMemo( () => associateBy(props.genes, x => x.gene, x => x ), [ props ]);\n    const genes = useMemo( () => associateBy(\n        data?.gene || [],\n        x => x.id,\n        x => ({ ...genemap.get(x.id.split(\".\")[0]), name: x.name }) as EGene & { name: string }\n    ), [ data, genemap ]);\n    \n    const egeneData  = data && data.gene && [ ...genes.keys() ].map(k => genes.get(k)! ).map((d)=>{\n        return [{header: 'gene', value: d.name},\n        {header: 'p-value', value: d.nominal_pval, render: <span> {d.nominal_pval < 0.001 ? d.nominal_pval.toExponential(3) : d.nominal_pval.toFixed(3)}</span> },\n        {header: 'FDR', value: d.fdr, render:<span>{d.fdr < 0.001 ? d.fdr.toExponential(3) : d.fdr.toFixed(3)}</span>},\n        {header: 'slope', value: d.slope, render:<span>{d.slope.toFixed(3)}</span>}\n    ]\n    })\n    return (loading || (!egeneData)) ? <>\n    <Typography\n            type=\"body\"\n            size=\"large\"\n            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n        >\n                Loading Data...\n        </Typography>\n                        <br/>\n    <CircularProgress color=\"inherit\"/>\n    </> : egeneData && egeneData.length>0 ? (\n        <>\n\n            <Typography  type=\"display\" style={{ fontWeight: 500, fontSize: \"28px\" }}\n            size=\"small\">eGenes for {props.snp}:</Typography>\n             \n                <CustomizedTable style={{ width: \"max-content\" }}  tabledata={egeneData} />\n              \n            </>) : <>\n            <Typography\n                    type=\"display\"\n                    size=\"small\"\n                    style={{ fontWeight: 500, fontSize: \"28px\" }}\n                > No eGenes have been identified for this SNP.</Typography>\n            \n            </>\n            \n        \n    \n}\nexport default EGeneTable;","import { gql, useQuery } from '@apollo/client';\nimport { CircularProgress } from '@mui/material';\nimport { CustomizedTable, Typography } from '@zscreen/psychscreen-ui-components';\nimport React, { useMemo } from 'react';\nimport { GenomicRange } from './SNPDetails';\n\nexport const CCRE_FIELDS = gql`\nfragment CCREFields on CCRE {\n    accession\n    coordinates {\n        chromosome\n        start\n        end\n    }\n    rDHS\n    group\n    dnaseZ: maxZ(assay: \"dnase\")\n    h3k4me3Z: maxZ(assay: \"h3k4me3\")\n    h3k27acZ: maxZ(assay: \"h3k27ac\")\n    ctcfZ: maxZ(assay: \"ctcf\")\n}\n`;\n\nexport const SEARCH_QUERY = gql`\n    ${CCRE_FIELDS}\n    query ccre($assembly: String!, $coordinates: [GenomicRangeInput!], $accession: [String!]) {\n        cCREQuery(assembly: \"GRCh38\", coordinates: $coordinates, accession: $accession) {\n            ...CCREFields\n        }\n        rDHSQuery(assembly: $assembly, coordinates: $coordinates, accession: $accession) {\n            accession\n            coordinates {\n                chromosome\n                start\n                end\n            }\n            dnaseZ: maxZ(assay: \"dnase\")\n            h3k4me3Z: maxZ(assay: \"h3k4me3\")\n            h3k27acZ: maxZ(assay: \"h3k27ac\")\n            ctcfZ: maxZ(assay: \"ctcf\")\n        }\n    }\n`;\nexport type RegulatoryElementsProps = {\n    coordinates: GenomicRange;\n    assembly: string;\n}\n\nexport type CCREEntry = {\n    accession: string;\n    coordinates: GenomicRange;\n    rDHS: string;\n    group?: string;\n    dnaseZ?: number;\n    h3k4me3Z?: number;\n    h3k27acZ?: number;\n    ctcfZ?: number;\n    zScores?: {\n        score: number;\n    }[];\n};\n\nexport type SearchQueryResponse = {\n    cCREQuery: CCREEntry[];\n    rDHSQuery: CCREEntry[];\n}\n\nexport const COLORS: Map<string, string> = new Map([\n    [ \"PLS\", \"#ff0000\" ],\n    [ \"pELS\", \"#ffa700\" ],\n    [ \"dELS\", \"#ffcd00\" ],\n    [ \"DNase-H3K4me3\", \"#ffaaaa\" ],\n    [ \"CTCF-only\", \"#00b0f0\" ]\n]);\n\nexport const GROUPS: Map<string, string> = new Map([\n    [ \"PLS\", \"promoter-like\" ],\n    [ \"pELS\", \"proximal enhancer-like\" ],\n    [ \"dELS\", \"distal enhancer-like\" ],\n    [ \"DNase-H3K4me3\", \"DNase-H3K4me3\" ],\n    [ \"CTCF-only\", \"CTCF-only\" ]\n]);\n\nconst RegulatoryElements: React.FC<RegulatoryElementsProps> = props => {\n    const { data, loading } = useQuery<SearchQueryResponse>(SEARCH_QUERY, {\n        variables: {\n            assembly: props.assembly,\n            coordinates: props.coordinates\n        }\n    });\n    const ur = useMemo( () => (\n        new Set((data?.cCREQuery || []).map(x => x.rDHS))\n    ), [ data ]);\n    const allResults = useMemo( () => [\n        ...(data?.cCREQuery || []),\n        ...(data?.rDHSQuery || []).filter(x => !ur.has(x.accession))\n    ], [ data, ur ]);\n    const combinedResults = useMemo( () => [ ...allResults ], [ allResults ]);\n\n    const tableData = combinedResults.map(d=>{\n        return [{header: 'Accession', value: d.accession},\n        {header: 'Group', value:  GROUPS.get(d.group || \"\") || d.group || \"rDHS\", render: <svg height={18}>\n        <rect width={10} height={10} y={3} fill={COLORS.get(d.group || \"\") || \"#06da93\" } />\n        <text x={16} y={12}>{GROUPS.get(d.group || \"\") || d.group || \"rDHS\"}</text>\n    </svg>},\n        {header: 'DNase Z-score in fetal brain', value: (d.zScores && d.zScores[0].score) || -11, render: d.dnaseZ ? <span style={{ fontWeight: d.dnaseZ > 1.64 ? \"bold\" : \"normal\" }}>{d.dnaseZ.toFixed(2)}</span> : <span>--</span>},\n        {\n            header: \"Chromosome\",\n            value: d.coordinates.chromosome!\n        }, {\n            header: \"Start\",\n            value: d.coordinates.start,\n            render: d.coordinates.start.toLocaleString()\n        }, {\n            header: \"Length\",\n            value: d.coordinates.end - d.coordinates.start\n        }\n    ]\n    })\n\n    return(loading ? <>\n    <Typography\n            type=\"body\"\n            size=\"large\"\n            style={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', fontSize: \"16px\", fontWeight: 400, lineHeight: \"19px\" }}\n        >\n                Loading Data...\n        </Typography>\n                        <br/>\n    <CircularProgress color=\"inherit\"/>\n    </> : <>\n    <Typography  type=\"display\" style={{ fontWeight: 500, fontSize: \"28px\" }}\n            size=\"small\"> Your search returned {combinedResults.length.toLocaleString() || 0} cCREs and rDHSs.</Typography>\n            {tableData && tableData.length>0 &&  <CustomizedTable style={{ width: \"max-content\" }}  tabledata={tableData} />}\n    </> )\n}\n\nexport default RegulatoryElements;","import React, { useState, useMemo } from 'react';\nimport { GridProps, Grid, Divider } from '@mui/material';\nimport { AppBar, Typography } from '@zscreen/psychscreen-ui-components';\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { PORTALS } from \"../../../App\";\nimport Box from '@mui/material/Box';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport GwasPage from './GwasPage';\nimport { gql, useQuery } from '@apollo/client';\nimport EGeneTable from './EGeneTable';\nimport RegulatoryElements from './RegulatoryElements';\n\nexport const QUERY = gql`\nquery SNP(\n  $coordinates: [GenomicRangeInput]\n  $rSquaredThreshold: Float!\n  $id: [String]\n  $population: Population!\n  $chromosome: String\n  $start: Int\n  $end: Int\n) {\n  snpQuery(assembly: \"hg38\", coordinates: $coordinates, common: true) {\n    id\n    coordinates {\n      chromosome\n      start\n      end\n    }\n  }\n  fetal_eQTLQuery(population: SHARED, snp: $id) {\n    gene\n    nominal_pval\n    fdr\n    slope\n  }\n  snp: snpQuery(assembly: \"hg38\", snpids: $id) {\n    linkageDisequilibrium(rSquaredThreshold: $rSquaredThreshold, population: $population) {\n      id\n      rSquared\n      coordinates(assembly: \"hg38\") {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n  gene(chromosome: $chromosome, start: $start, end: $end, assembly: \"GRCh38\") {\n    name\n    strand\n    transcripts {\n      name\n      strand\n      exons {\n          coordinates {\n              chromosome\n              start\n              end\n          }\n      }\n      coordinates {\n        chromosome\n        start\n        end\n      }\n    }\n  }\n}\n`;\n\nexport type GenomicRange = {\n    chromosome?: string;\n    start: number;\n    end: number;\n}\nexport type Transcript = {\n    id: string;\n    name: string;\n    strand: string;\n    coordinates: GenomicRange;\n};\n\nexport type SNPQueryResponse = {\n    snpQuery: {\n        id: string;\n        coordinates: GenomicRange;\n    }[];\n    gene: {\n        name: string;\n        strand: string;\n        transcripts: Transcript[];\n    }[];\n};\n\nexport type EGene = {\n    gene: string;\n    nominal_pval: number;\n    fdr: number;\n    slope: number;\n};\n\ntype QueryResponse = {\n    snpQuery: {\n        id: string;\n        coordinates: GenomicRange;\n    }[];\n    snp: {\n        linkageDisequilibrium: {\n            id: string;\n            rSquared: number;\n            coordinates: GenomicRange;\n        }[];\n    }[];\n    fetal_eQTLQuery: EGene[];\n} & SNPQueryResponse;\n\nexport function expandCoordinates(coordinates: GenomicRange, l = 20000): GenomicRange {\n    return {\n        chromosome: coordinates.chromosome,\n        start: coordinates.start - l < 0 ? 0 : coordinates.start - l,\n        end: coordinates.end + l\n    };\n}\n\nconst SNPDetails: React.FC<GridProps> = (props) => {\n    const { snpid } = useParams();\n    const navigate = useNavigate(); \n    const [ tabIndex, setTabIndex] = useState(0);\n    const { state }: any = useLocation();\n    const { chromosome, start, end } = state ? state : { chromosome: '', start: null, end: null } \n    const coordinates = useMemo( () => ({chromosome: chromosome,start: parseInt(start),end: parseInt(end)}), [ chromosome, start, end ]);\n    const expandedCoordinates = useMemo( () => expandCoordinates(coordinates, 25000), [ coordinates ]);\n\n    const handleTabChange = (_: any, newTabIndex: number) => {\n        setTabIndex(newTabIndex);\n    };\n    const { data  } = useQuery<QueryResponse>(QUERY, {\n        variables: {\n            coordinates: expandedCoordinates,\n            population:  \"AFRICAN\",\n            rSquaredThreshold: 0.7,\n            id: snpid,\n            ...expandedCoordinates\n        }, context: {\n\t\t\tclientName: 'psychscreen'\n\t\t}\n    });\n    return(\n        <>\n            <AppBar\n                centered\n                onDownloadsClicked={() => navigate(\"/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n            />\n            <Grid container {...props}> \n                <Grid item sm={1} lg={1.5} />\n                <Grid item sm={9}>\n                    <Typography type=\"headline\" size=\"large\" style={{ marginTop: \"-0.6em\", marginBottom: \"0.2em\" }}>\n                        SNP Details: {snpid}\n                    </Typography>\n                </Grid>\n                <Grid item sm={1} lg={1.5} />\n                <Grid item sm={1} lg={1.5} />  \n                <Grid item sm={9}>\n                  <Box>\n                    <Tabs value={tabIndex} onChange={handleTabChange}>\n                        \n                        <Tab label=\"eGenes\" />\n                        <Tab label=\"Regulatory Elements\" />\n                        <Tab label=\"GWAS\" />\n                    </Tabs>\n                    <Divider/>\n                  </Box>\n                  <Box sx={{ padding: 2 }}>\n                    {tabIndex===0 && snpid && <EGeneTable genes={data?.fetal_eQTLQuery || []} snp={snpid} />}\n                    {tabIndex===1 && snpid &&  <RegulatoryElements\n                            coordinates={expandCoordinates(coordinates, 0)}\n                            assembly=\"grch38\"\n                        />}\n                   { tabIndex===2 && snpid && <GwasPage id={snpid}/> }\n                  </Box>\n                </Grid>\n            </Grid>\n        </>\n    )\n}\n\nexport default SNPDetails;","import React from 'react';\nimport { GridProps } from '@mui/material';\nimport { AppBar, Typography } from '@zscreen/psychscreen-ui-components';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { PORTALS } from \"../../../App\";\nimport DotPlot from './DotPlot'\n\nconst SingleCellDotPlot: React.FC<GridProps> = (props) => {\n    const navigate = useNavigate(); \n    const { disease, gene } = useParams();\n    return(<>\n     <AppBar\n                centered\n                onDownloadsClicked={() => navigate(\"/downloads\")}\n                onHomepageClicked={() => navigate(\"/\")}\n                onPortalClicked={index => navigate(`/psychscreen${PORTALS[index][0]}`)}\n                style={{ marginBottom: \"63px\" }}\n            />\n            {disease && gene && <>\n            \n            <Typography type=\"body\" size=\"large\">\n                          Disease: {disease} &nbsp; &nbsp; &nbsp; &nbsp; Gene: {gene}\n            </Typography>\n            <br/>\n            <DotPlot disease={disease} gene={gene}/></>}\n\n    </>)\n}\n\nexport default SingleCellDotPlot;","import React, { useMemo } from 'react';\nimport { BrowserRouter as Router, Route, Routes, Navigate  } from 'react-router-dom';\nimport '@zscreen/psychscreen-ui-components/src/App.css';\nimport { ApolloClient, ApolloProvider, InMemoryCache } from '@apollo/client';\nimport './App.css';\nimport { HomePage as WebHomePage } from './web/HomePage';\nimport { HomePage as TabletHomePage } from './mobile-portrait/HomePage';\nimport { DownloadsPage } from './web/DownloadsPage';\nimport { DiseaseTraitPortal, GenePortal, SNPPortal, SingleCellPortal } from './web/Portals';\nimport  DiseaseTraitDetails from './web/Portals/DiseaseTraitPortal/DiseaseTraitDetails';\nimport  SingleCellDetails from './web/Portals/SingleCellPortal/SingleCellDetails';\nimport { useTheme, useMediaQuery } from '@material-ui/core';\nimport { HttpLink } from 'apollo-link-http';\nimport { ApolloLink } from 'apollo-link';\nimport GeneDetails from './web/Portals/GenePortal/GeneDetails';\nimport GTexUMAP from './web/Portals/GenePortal/GTexUMAP';\nimport SNPDetails from './web/Portals/SnpPortal/SNPDetails';\nimport SingleCellDotPlot from './web/Portals/SingleCellPortal/SingleCellDotPlot';\n\nexport const PORTALS: [ string, React.FC ][] = [\n    [ \"/traits\", DiseaseTraitPortal ],\n    [ \"/gene\", GenePortal ],\n    [ \"/snp\", SNPPortal ],\n    [ \"/single-cell\", SingleCellPortal ]\n];\n\nconst wengLink = new HttpLink({\n    uri: \"https://ga.staging.wenglab.org/graphql\",\n});\n    \nconst openTargetLink = new HttpLink({\n    uri: \"https://api.genetics.opentargets.org/graphql\",\n});\n\nconst psychscreenLink = new HttpLink({\n    uri: \"https://psychscreen.api.wenglab.org/graphql\",\n});\n\n\nconst LINK = ApolloLink.split(\n    operation => operation.getContext().clientName === \"opentarget\",\n    openTargetLink, // <= apollo will send to this if clientName is \"opentarget\"\n    ApolloLink.split(operation => operation.getContext().clientName === \"psychscreen\", psychscreenLink, wengLink)   // <= otherwise will send to this\n);\n      \nconst App: React.FC = () => {\n   \n    const client = useMemo( () => new ApolloClient({\n        link: (LINK as any),\n        cache: new InMemoryCache()\n    }), []);\n    \n    //const { width, height } = useViewportSize();\n    const theme = useTheme();\n    //useMediaQuery(theme.breakpoints.down('sm'))   \n    //const HomePage = useMemo( () => width < 1280 && height > width ? TabletHomePage : WebHomePage, [ width ] );\n\n    const HomePage =  useMediaQuery(theme.breakpoints.down('sm')) ? TabletHomePage : WebHomePage;\n\n    return (\n        <ApolloProvider client={client}>\n            <Router>\n                <Routes>\n                    <Route path=\"/\" element={<Navigate replace to=\"/psychscreen\" />} />\n                    <Route path=\"/psychscreen\" element={<HomePage />} />\n                    <Route path=\"/psychscreen/downloads\" element={<DownloadsPage />} />\n                    <Route path=\"/psychscreen/traits/:disease\" element={<DiseaseTraitDetails />} />\n                    <Route path=\"/psychscreen/single-cell/:disease/:gene\" element={<SingleCellDotPlot />} />\n                    <Route path=\"/psychscreen/single-cell/:disease\" element={<SingleCellDetails />} />\n                    <Route path=\"/psychscreen/gene/:gene\" element={<GeneDetails />} />\n                    <Route path=\"/psychscreen/gene/gtexumap\" element={<GTexUMAP/>} />\n                    <Route path=\"/psychscreen/snp/:snpid\" element={<SNPDetails/>} />\n                    { PORTALS.map( portal => <Route path={`/psychscreen${portal[0] as string}`} element={React.createElement(portal[1], {})} /> )}\n                </Routes>\n            </Router>\n        </ApolloProvider>\n    );\n\n};\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}